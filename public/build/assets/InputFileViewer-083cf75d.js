var rn=Object.defineProperty;var an=(N,r,j)=>r in N?rn(N,r,{enumerable:!0,configurable:!0,writable:!0,value:j}):N[r]=j;var Dt=(N,r,j)=>(an(N,typeof r!="symbol"?r+"":r,j),j),de=(N,r,j)=>{if(!r.has(N))throw TypeError("Cannot "+j)};var b=(N,r,j)=>(de(N,r,"read from private field"),j?j.call(N):r.get(N)),Z=(N,r,j)=>{if(r.has(N))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(N):r.set(N,j)},pt=(N,r,j,c)=>(de(N,r,"write to private field"),c?c.call(N,j):r.set(N,j),j);var ie=(N,r,j,c)=>({set _(A){pt(N,r,A,j)},get _(){return b(N,r,c)}}),st=(N,r,j)=>(de(N,r,"access private method"),j);import{r as reactExports,k as getDefaultExportFromCjs,n as require$$5,R as React,a as jsx,F as Fragment,j as jsxs}from"./app-87882047.js";import{B as Button}from"./Button-2a3e8570.js";import{I as Icon}from"./Icon-74cb44c4.js";import{c as clsx}from"./clsx.m-1229b3e0.js";function _mergeNamespaces(N,r){for(var j=0;j<r.length;j++){const c=r[j];if(typeof c!="string"&&!Array.isArray(c)){for(const A in c)if(A!=="default"&&!(A in N)){const W=Object.getOwnPropertyDescriptor(c,A);W&&Object.defineProperty(N,A,W.get?W:{enumerable:!0,get:()=>c[A]})}}}return Object.freeze(Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}))}function UseInputFileViewer(N){const[r,j]=reactExports.useState(null),[c,A]=reactExports.useState(1),[W,q]=reactExports.useState(1),[Q,L]=reactExports.useState(0),[k,_]=reactExports.useState(0),I=reactExports.useRef(null),T=({numPages:a})=>{j(a)};return reactExports.useEffect(()=>{const a=I.current;a&&(L(a.offsetWidth),_(a.offsetHeight))},[N]),{numPages:r,pageNumber:c,setPageScale:q,frameWidth:Q,frameHeight:k,frameRef:I,onDocumentLoadSuccess:T,goToPrevPage:()=>{c>1&&A(c-1)},goToNextPage:()=>{c<r&&A(c+1)},calculatePageScale:(a,y)=>{const v=Q/a,P=k/y;return Math.min(v,P)}}}function commonjsRequire(N){throw new Error('Could not dynamically require "'+N+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};(function(module,exports){(function(r,j){module.exports=j()})(globalThis,()=>(()=>{var __webpack_modules__=[,(N,r)=>{var Ft;Object.defineProperty(r,"__esModule",{value:!0}),r.VerbosityLevel=r.Util=r.UnknownErrorException=r.UnexpectedResponseException=r.TextRenderingMode=r.RenderingIntentFlag=r.PromiseCapability=r.PermissionFlag=r.PasswordResponses=r.PasswordException=r.PageActionEventType=r.OPS=r.MissingPDFException=r.MAX_IMAGE_SIZE_TO_CACHE=r.LINE_FACTOR=r.LINE_DESCENT_FACTOR=r.InvalidPDFException=r.ImageKind=r.IDENTITY_MATRIX=r.FormatError=r.FeatureTest=r.FONT_IDENTITY_MATRIX=r.DocumentActionEventType=r.CMapCompressionType=r.BaseException=r.BASELINE_FACTOR=r.AnnotationType=r.AnnotationStateModelType=r.AnnotationReviewState=r.AnnotationReplyType=r.AnnotationMode=r.AnnotationMarkedState=r.AnnotationFlag=r.AnnotationFieldFlag=r.AnnotationEditorType=r.AnnotationEditorPrefix=r.AnnotationEditorParamsType=r.AnnotationBorderStyleType=r.AnnotationActionEventType=r.AbortException=void 0,r.assert=At,r.bytesToString=O,r.createValidAbsoluteUrl=yt,r.getModificationDate=_t,r.getVerbosityLevel=dt,r.info=ot,r.isArrayBuffer=ft,r.isArrayEqual=Et,r.normalizeUnicode=vt,r.objectFromMap=S,r.objectSize=m,r.setVerbosityLevel=tt,r.shadow=$,r.string32=i,r.stringToBytes=t,r.stringToPDFString=et,r.stringToUTF8String=rt,r.unreachable=gt,r.utf8StringToString=ut,r.warn=ct;const j=[1,0,0,1,0,0];r.IDENTITY_MATRIX=j;const c=[.001,0,0,.001,0,0];r.FONT_IDENTITY_MATRIX=c;const A=1e7;r.MAX_IMAGE_SIZE_TO_CACHE=A;const W=1.35;r.LINE_FACTOR=W;const q=.35;r.LINE_DESCENT_FACTOR=q;const Q=q/W;r.BASELINE_FACTOR=Q;const L={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};r.RenderingIntentFlag=L;const k={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};r.AnnotationMode=k;const _="pdfjs_internal_editor_";r.AnnotationEditorPrefix=_;const I={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};r.AnnotationEditorType=I;const T={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};r.AnnotationEditorParamsType=T;const x={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};r.PermissionFlag=x;const f={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};r.TextRenderingMode=f;const u={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};r.ImageKind=u;const a={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};r.AnnotationType=a;const y={MARKED:"Marked",REVIEW:"Review"};r.AnnotationStateModelType=y;const v={MARKED:"Marked",UNMARKED:"Unmarked"};r.AnnotationMarkedState=v;const P={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};r.AnnotationReviewState=P;const g={GROUP:"Group",REPLY:"R"};r.AnnotationReplyType=g;const e={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};r.AnnotationFlag=e;const o={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};r.AnnotationFieldFlag=o;const l={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};r.AnnotationBorderStyleType=l;const s={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};r.AnnotationActionEventType=s;const h={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};r.DocumentActionEventType=h;const R={O:"PageOpen",C:"PageClose"};r.PageActionEventType=R;const n={ERRORS:0,WARNINGS:1,INFOS:5};r.VerbosityLevel=n;const B={NONE:0,BINARY:1};r.CMapCompressionType=B;const V={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};r.OPS=V;const z={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};r.PasswordResponses=z;let J=n.WARNINGS;function tt(ht){Number.isInteger(ht)&&(J=ht)}function dt(){return J}function ot(ht){J>=n.INFOS&&console.log(`Info: ${ht}`)}function ct(ht){J>=n.WARNINGS&&console.log(`Warning: ${ht}`)}function gt(ht){throw new Error(ht)}function At(ht,w){ht||gt(w)}function St(ht){switch(ht==null?void 0:ht.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function yt(ht,w=null,D=null){if(!ht)return null;try{if(D&&typeof ht=="string"){if(D.addDefaultProtocol&&ht.startsWith("www.")){const mt=ht.match(/\./g);(mt==null?void 0:mt.length)>=2&&(ht=`http://${ht}`)}if(D.tryConvertEncoding)try{ht=rt(ht)}catch{}}const lt=w?new URL(ht,w):new URL(ht);if(St(lt))return lt}catch{}return null}function $(ht,w,D,lt=!1){return Object.defineProperty(ht,w,{value:D,enumerable:!lt,configurable:!0,writable:!1}),D}const d=function(){function w(D,lt){this.constructor===w&&gt("Cannot initialize BaseException."),this.message=D,this.name=lt}return w.prototype=new Error,w.constructor=w,w}();r.BaseException=d;class p extends d{constructor(w,D){super(w,"PasswordException"),this.code=D}}r.PasswordException=p;class E extends d{constructor(w,D){super(w,"UnknownErrorException"),this.details=D}}r.UnknownErrorException=E;class H extends d{constructor(w){super(w,"InvalidPDFException")}}r.InvalidPDFException=H;class M extends d{constructor(w){super(w,"MissingPDFException")}}r.MissingPDFException=M;class X extends d{constructor(w,D){super(w,"UnexpectedResponseException"),this.status=D}}r.UnexpectedResponseException=X;class U extends d{constructor(w){super(w,"FormatError")}}r.FormatError=U;class F extends d{constructor(w){super(w,"AbortException")}}r.AbortException=F;function O(ht){(typeof ht!="object"||(ht==null?void 0:ht.length)===void 0)&&gt("Invalid argument for bytesToString");const w=ht.length,D=8192;if(w<D)return String.fromCharCode.apply(null,ht);const lt=[];for(let mt=0;mt<w;mt+=D){const Pt=Math.min(mt+D,w),xt=ht.subarray(mt,Pt);lt.push(String.fromCharCode.apply(null,xt))}return lt.join("")}function t(ht){typeof ht!="string"&&gt("Invalid argument for stringToBytes");const w=ht.length,D=new Uint8Array(w);for(let lt=0;lt<w;++lt)D[lt]=ht.charCodeAt(lt)&255;return D}function i(ht){return String.fromCharCode(ht>>24&255,ht>>16&255,ht>>8&255,ht&255)}function m(ht){return Object.keys(ht).length}function S(ht){const w=Object.create(null);for(const[D,lt]of ht)w[D]=lt;return w}function C(){const ht=new Uint8Array(4);return ht[0]=1,new Uint32Array(ht.buffer,0,1)[0]===1}function G(){try{return new Function(""),!0}catch{return!1}}class nt{static get isLittleEndian(){return $(this,"isLittleEndian",C())}static get isEvalSupported(){return $(this,"isEvalSupported",G())}static get isOffscreenCanvasSupported(){return $(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?$(this,"platform",{isWin:!1,isMac:!1}):$(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}r.FeatureTest=nt;const K=[...Array(256).keys()].map(ht=>ht.toString(16).padStart(2,"0"));class it{static makeHexColor(w,D,lt){return`#${K[w]}${K[D]}${K[lt]}`}static scaleMinMax(w,D){let lt;w[0]?(w[0]<0&&(lt=D[0],D[0]=D[1],D[1]=lt),D[0]*=w[0],D[1]*=w[0],w[3]<0&&(lt=D[2],D[2]=D[3],D[3]=lt),D[2]*=w[3],D[3]*=w[3]):(lt=D[0],D[0]=D[2],D[2]=lt,lt=D[1],D[1]=D[3],D[3]=lt,w[1]<0&&(lt=D[2],D[2]=D[3],D[3]=lt),D[2]*=w[1],D[3]*=w[1],w[2]<0&&(lt=D[0],D[0]=D[1],D[1]=lt),D[0]*=w[2],D[1]*=w[2]),D[0]+=w[4],D[1]+=w[4],D[2]+=w[5],D[3]+=w[5]}static transform(w,D){return[w[0]*D[0]+w[2]*D[1],w[1]*D[0]+w[3]*D[1],w[0]*D[2]+w[2]*D[3],w[1]*D[2]+w[3]*D[3],w[0]*D[4]+w[2]*D[5]+w[4],w[1]*D[4]+w[3]*D[5]+w[5]]}static applyTransform(w,D){const lt=w[0]*D[0]+w[1]*D[2]+D[4],mt=w[0]*D[1]+w[1]*D[3]+D[5];return[lt,mt]}static applyInverseTransform(w,D){const lt=D[0]*D[3]-D[1]*D[2],mt=(w[0]*D[3]-w[1]*D[2]+D[2]*D[5]-D[4]*D[3])/lt,Pt=(-w[0]*D[1]+w[1]*D[0]+D[4]*D[1]-D[5]*D[0])/lt;return[mt,Pt]}static getAxialAlignedBoundingBox(w,D){const lt=it.applyTransform(w,D),mt=it.applyTransform(w.slice(2,4),D),Pt=it.applyTransform([w[0],w[3]],D),xt=it.applyTransform([w[2],w[1]],D);return[Math.min(lt[0],mt[0],Pt[0],xt[0]),Math.min(lt[1],mt[1],Pt[1],xt[1]),Math.max(lt[0],mt[0],Pt[0],xt[0]),Math.max(lt[1],mt[1],Pt[1],xt[1])]}static inverseTransform(w){const D=w[0]*w[3]-w[1]*w[2];return[w[3]/D,-w[1]/D,-w[2]/D,w[0]/D,(w[2]*w[5]-w[4]*w[3])/D,(w[4]*w[1]-w[5]*w[0])/D]}static singularValueDecompose2dScale(w){const D=[w[0],w[2],w[1],w[3]],lt=w[0]*D[0]+w[1]*D[2],mt=w[0]*D[1]+w[1]*D[3],Pt=w[2]*D[0]+w[3]*D[2],xt=w[2]*D[1]+w[3]*D[3],Rt=(lt+xt)/2,wt=Math.sqrt((lt+xt)**2-4*(lt*xt-Pt*mt))/2,Mt=Rt+wt||1,Ct=Rt-wt||1;return[Math.sqrt(Mt),Math.sqrt(Ct)]}static normalizeRect(w){const D=w.slice(0);return w[0]>w[2]&&(D[0]=w[2],D[2]=w[0]),w[1]>w[3]&&(D[1]=w[3],D[3]=w[1]),D}static intersect(w,D){const lt=Math.max(Math.min(w[0],w[2]),Math.min(D[0],D[2])),mt=Math.min(Math.max(w[0],w[2]),Math.max(D[0],D[2]));if(lt>mt)return null;const Pt=Math.max(Math.min(w[1],w[3]),Math.min(D[1],D[3])),xt=Math.min(Math.max(w[1],w[3]),Math.max(D[1],D[3]));return Pt>xt?null:[lt,Pt,mt,xt]}static bezierBoundingBox(w,D,lt,mt,Pt,xt,Rt,wt){const Mt=[],Ct=[[],[]];let It,Ot,Lt,kt,Bt,Ut,Wt,Gt;for(let Xt=0;Xt<2;++Xt){if(Xt===0?(Ot=6*w-12*lt+6*Pt,It=-3*w+9*lt-9*Pt+3*Rt,Lt=3*lt-3*w):(Ot=6*D-12*mt+6*xt,It=-3*D+9*mt-9*xt+3*wt,Lt=3*mt-3*D),Math.abs(It)<1e-12){if(Math.abs(Ot)<1e-12)continue;kt=-Lt/Ot,0<kt&&kt<1&&Mt.push(kt);continue}Wt=Ot*Ot-4*Lt*It,Gt=Math.sqrt(Wt),!(Wt<0)&&(Bt=(-Ot+Gt)/(2*It),0<Bt&&Bt<1&&Mt.push(Bt),Ut=(-Ot-Gt)/(2*It),0<Ut&&Ut<1&&Mt.push(Ut))}let Nt=Mt.length,jt;const qt=Nt;for(;Nt--;)kt=Mt[Nt],jt=1-kt,Ct[0][Nt]=jt*jt*jt*w+3*jt*jt*kt*lt+3*jt*kt*kt*Pt+kt*kt*kt*Rt,Ct[1][Nt]=jt*jt*jt*D+3*jt*jt*kt*mt+3*jt*kt*kt*xt+kt*kt*kt*wt;return Ct[0][qt]=w,Ct[1][qt]=D,Ct[0][qt+1]=Rt,Ct[1][qt+1]=wt,Ct[0].length=Ct[1].length=qt+2,[Math.min(...Ct[0]),Math.min(...Ct[1]),Math.max(...Ct[0]),Math.max(...Ct[1])]}}r.Util=it;const at=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function et(ht){if(ht[0]>="ï"){let D;if(ht[0]==="þ"&&ht[1]==="ÿ"?D="utf-16be":ht[0]==="ÿ"&&ht[1]==="þ"?D="utf-16le":ht[0]==="ï"&&ht[1]==="»"&&ht[2]==="¿"&&(D="utf-8"),D)try{const lt=new TextDecoder(D,{fatal:!0}),mt=t(ht);return lt.decode(mt)}catch(lt){ct(`stringToPDFString: "${lt}".`)}}const w=[];for(let D=0,lt=ht.length;D<lt;D++){const mt=at[ht.charCodeAt(D)];w.push(mt?String.fromCharCode(mt):ht.charAt(D))}return w.join("")}function rt(ht){return decodeURIComponent(escape(ht))}function ut(ht){return unescape(encodeURIComponent(ht))}function ft(ht){return typeof ht=="object"&&(ht==null?void 0:ht.byteLength)!==void 0}function Et(ht,w){if(ht.length!==w.length)return!1;for(let D=0,lt=ht.length;D<lt;D++)if(ht[D]!==w[D])return!1;return!0}function _t(ht=new Date){return[ht.getUTCFullYear().toString(),(ht.getUTCMonth()+1).toString().padStart(2,"0"),ht.getUTCDate().toString().padStart(2,"0"),ht.getUTCHours().toString().padStart(2,"0"),ht.getUTCMinutes().toString().padStart(2,"0"),ht.getUTCSeconds().toString().padStart(2,"0")].join("")}class Tt{constructor(){Z(this,Ft,!1);this.promise=new Promise((w,D)=>{this.resolve=lt=>{pt(this,Ft,!0),w(lt)},this.reject=lt=>{pt(this,Ft,!0),D(lt)}})}get settled(){return b(this,Ft)}}Ft=new WeakMap,r.PromiseCapability=Tt;let Y=null,bt=null;function vt(ht){return Y||(Y=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,bt=new Map([["ﬅ","ſt"]])),ht.replaceAll(Y,(w,D,lt)=>D?D.normalize("NFKC"):bt.get(lt))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var N,j,c,A,Kt,q,re,L,k,_,I,T,x,f,u,ue,y,v,fe,g,e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:l,NodeCMapReaderFactory:s,NodeFilterFactory:h,NodeStandardFontDataFactory:R}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=l,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=s,exports.DefaultFilterFactory=DefaultFilterFactory=h,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=R}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:l}=__w_pdfjs_require__(21);createPDFNetworkStream=s=>new l(s)}else{const{PDFNetworkStream:l}=__w_pdfjs_require__(24),{PDFFetchStream:s}=__w_pdfjs_require__(25);createPDFNetworkStream=h=>(0,_display_utils.isValidFetchUrl)(h.url)?new s(h):new l(h)}function getDocument(l){if(typeof l=="string"||l instanceof URL?l={url:l}:(0,_util.isArrayBuffer)(l)&&(l={data:l}),typeof l!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!l.url&&!l.data&&!l.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const s=new PDFDocumentLoadingTask,{docId:h}=s,R=l.url?getUrlProp(l.url):null,n=l.data?getDataProp(l.data):null,B=l.httpHeaders||null,V=l.withCredentials===!0,z=l.password??null,J=l.range instanceof PDFDataRangeTransport?l.range:null,tt=Number.isInteger(l.rangeChunkSize)&&l.rangeChunkSize>0?l.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let dt=l.worker instanceof PDFWorker?l.worker:null;const ot=l.verbosity,ct=typeof l.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(l.docBaseUrl)?l.docBaseUrl:null,gt=typeof l.cMapUrl=="string"?l.cMapUrl:null,At=l.cMapPacked!==!1,St=l.CMapReaderFactory||DefaultCMapReaderFactory,yt=typeof l.standardFontDataUrl=="string"?l.standardFontDataUrl:null,$=l.StandardFontDataFactory||DefaultStandardFontDataFactory,d=l.stopAtErrors!==!0,p=Number.isInteger(l.maxImageSize)&&l.maxImageSize>-1?l.maxImageSize:-1,E=l.isEvalSupported!==!1,H=typeof l.isOffscreenCanvasSupported=="boolean"?l.isOffscreenCanvasSupported:!_is_node.isNodeJS,M=Number.isInteger(l.canvasMaxAreaInBytes)?l.canvasMaxAreaInBytes:-1,X=typeof l.disableFontFace=="boolean"?l.disableFontFace:_is_node.isNodeJS,U=l.fontExtraProperties===!0,F=l.enableXfa===!0,O=l.ownerDocument||globalThis.document,t=l.disableRange===!0,i=l.disableStream===!0,m=l.disableAutoFetch===!0,S=l.pdfBug===!0,C=J?J.length:l.length??NaN,G=typeof l.useSystemFonts=="boolean"?l.useSystemFonts:!_is_node.isNodeJS&&!X,nt=typeof l.useWorkerFetch=="boolean"?l.useWorkerFetch:St===_display_utils.DOMCMapReaderFactory&&$===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(gt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(yt,document.baseURI),K=l.canvasFactory||new DefaultCanvasFactory({ownerDocument:O}),it=l.filterFactory||new DefaultFilterFactory({docId:h,ownerDocument:O}),at=null;(0,_util.setVerbosityLevel)(ot);const et={canvasFactory:K,filterFactory:it};if(nt||(et.cMapReaderFactory=new St({baseUrl:gt,isCompressed:At}),et.standardFontDataFactory=new $({baseUrl:yt})),!dt){const ft={verbosity:ot,port:_worker_options.GlobalWorkerOptions.workerPort};dt=ft.port?PDFWorker.fromPort(ft):new PDFWorker(ft),s._worker=dt}const rt={docId:h,apiVersion:"3.6.172",data:n,password:z,disableAutoFetch:m,rangeChunkSize:tt,length:C,docBaseUrl:ct,enableXfa:F,evaluatorOptions:{maxImageSize:p,disableFontFace:X,ignoreErrors:d,isEvalSupported:E,isOffscreenCanvasSupported:H,canvasMaxAreaInBytes:M,fontExtraProperties:U,useSystemFonts:G,cMapUrl:nt?gt:null,standardFontDataUrl:nt?yt:null}},ut={ignoreErrors:d,isEvalSupported:E,disableFontFace:X,fontExtraProperties:U,enableXfa:F,ownerDocument:O,disableAutoFetch:m,pdfBug:S,styleElement:at};return dt.promise.then(function(){if(s.destroyed)throw new Error("Loading aborted");const ft=_fetchDocument(dt,rt),Et=new Promise(function(_t){let Tt;J?Tt=new _transport_stream.PDFDataTransportStream({length:C,initialData:J.initialData,progressiveDone:J.progressiveDone,contentDispositionFilename:J.contentDispositionFilename,disableRange:t,disableStream:i},J):n||(Tt=createPDFNetworkStream({url:R,length:C,httpHeaders:B,withCredentials:V,rangeChunkSize:tt,disableRange:t,disableStream:i})),_t(Tt)});return Promise.all([ft,Et]).then(function([_t,Tt]){if(s.destroyed)throw new Error("Loading aborted");const Y=new _message_handler.MessageHandler(h,_t,dt.port),bt=new WorkerTransport(Y,s,Tt,ut,et);s._transport=bt,Y.send("Ready",null)})}).catch(s._capability.reject),s}async function _fetchDocument(l,s){if(l.destroyed)throw new Error("Worker was destroyed");const h=await l.messageHandler.sendWithPromise("GetDocRequest",s,s.data?[s.data.buffer]:null);if(l.destroyed)throw new Error("Worker was destroyed");return h}function getUrlProp(l){if(l instanceof URL)return l.href;try{return new URL(l,window.location).href}catch{if(_is_node.isNodeJS&&typeof l=="string")return l}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(l){if(_is_node.isNodeJS&&typeof Buffer<"u"&&l instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(l);if(l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength)return l;if(typeof l=="string")return(0,_util.stringToBytes)(l);if(typeof l=="object"&&!isNaN(l==null?void 0:l.length)||(0,_util.isArrayBuffer)(l))return new Uint8Array(l);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const r=class r{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ie(r,N)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var s;this.destroyed=!0,await((s=this._transport)==null?void 0:s.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};N=new WeakMap,Z(r,N,0);let PDFDocumentLoadingTask=r;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(s,h,R=!1,n=null){this.length=s,this.initialData=h,this.progressiveDone=R,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(s){this._rangeListeners.push(s)}addProgressListener(s){this._progressListeners.push(s)}addProgressiveReadListener(s){this._progressiveReadListeners.push(s)}addProgressiveDoneListener(s){this._progressiveDoneListeners.push(s)}onDataRange(s,h){for(const R of this._rangeListeners)R(s,h)}onDataProgress(s,h){this._readyCapability.promise.then(()=>{for(const R of this._progressListeners)R(s,h)})}onDataProgressiveRead(s){this._readyCapability.promise.then(()=>{for(const h of this._progressiveReadListeners)h(s)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const s of this._progressiveDoneListeners)s()})}transportReady(){this._readyCapability.resolve()}requestDataRange(s,h){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(s,h){this._pdfInfo=s,this._transport=h}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(s){return this._transport.getPage(s)}getPageIndex(s){return this._transport.getPageIndex(s)}getDestinations(){return this._transport.getDestinations()}getDestination(s){return this._transport.getDestination(s)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(s=!1){return this._transport.startCleanup(s||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(s,h,R,n=!1){Z(this,A);Z(this,q);Z(this,j,null);Z(this,c,!1);this._pageIndex=s,this._pageInfo=h,this._transport=R,this._stats=n?new _display_utils.StatTimer:null,this._pdfBug=n,this.commonObjs=R.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:s,rotation:h=this.rotate,offsetX:R=0,offsetY:n=0,dontFlip:B=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:s,rotation:h,offsetX:R,offsetY:n,dontFlip:B})}getAnnotations({intent:s="display"}={}){const h=this._transport.getRenderingIntent(s);return this._transport.getAnnotations(this._pageIndex,h.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var s;return((s=this._transport._htmlForXfa)==null?void 0:s.children[this._pageIndex])||null}render({canvasContext:s,viewport:h,intent:R="display",annotationMode:n=_util.AnnotationMode.ENABLE,transform:B=null,background:V=null,optionalContentConfigPromise:z=null,annotationCanvasMap:J=null,pageColors:tt=null,printAnnotationStorage:dt=null}){var $,d,p;if(($=arguments[0])!=null&&$.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(d=this._stats)==null||d.time("Overall");const ot=this._transport.getRenderingIntent(R,n,dt);pt(this,c,!1),st(this,q,re).call(this),z||(z=this._transport.getOptionalContentConfig());let ct=this._intentStates.get(ot.cacheKey);ct||(ct=Object.create(null),this._intentStates.set(ot.cacheKey,ct)),ct.streamReaderCancelTimeout&&(clearTimeout(ct.streamReaderCancelTimeout),ct.streamReaderCancelTimeout=null);const gt=!!(ot.renderingIntent&_util.RenderingIntentFlag.PRINT);ct.displayReadyCapability||(ct.displayReadyCapability=new _util.PromiseCapability,ct.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(ot));const At=E=>{var H,M;ct.renderTasks.delete(St),(this._maybeCleanupAfterRender||gt)&&pt(this,c,!0),st(this,A,Kt).call(this,!gt),E?(St.capability.reject(E),this._abortOperatorList({intentState:ct,reason:E instanceof Error?E:new Error(E)})):St.capability.resolve(),(H=this._stats)==null||H.timeEnd("Rendering"),(M=this._stats)==null||M.timeEnd("Overall")},St=new InternalRenderTask({callback:At,params:{canvasContext:s,viewport:h,transform:B,background:V},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:J,operatorList:ct.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!gt,pdfBug:this._pdfBug,pageColors:tt});(ct.renderTasks||(ct.renderTasks=new Set)).add(St);const yt=St.task;return Promise.all([ct.displayReadyCapability.promise,z]).then(([E,H])=>{var M;if(b(this,c)){At();return}(M=this._stats)==null||M.time("Rendering"),St.initializeGraphics({transparency:E,optionalContentConfig:H}),St.operatorListChanged()}).catch(At),yt}getOperatorList({intent:s="display",annotationMode:h=_util.AnnotationMode.ENABLE,printAnnotationStorage:R=null}={}){var J;function n(){V.operatorList.lastChunk&&(V.opListReadCapability.resolve(V.operatorList),V.renderTasks.delete(z))}const B=this._transport.getRenderingIntent(s,h,R,!0);let V=this._intentStates.get(B.cacheKey);V||(V=Object.create(null),this._intentStates.set(B.cacheKey,V));let z;return V.opListReadCapability||(z=Object.create(null),z.operatorListChanged=n,V.opListReadCapability=new _util.PromiseCapability,(V.renderTasks||(V.renderTasks=new Set)).add(z),V.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(J=this._stats)==null||J.time("Page Request"),this._pumpOperatorList(B)),V.opListReadCapability.promise}streamTextContent({includeMarkedContent:s=!1,disableNormalization:h=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:s===!0,disableNormalization:h===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(s={}){if(this._transport._htmlForXfa)return this.getXfa().then(R=>_xfa_text.XfaText.textContent(R));const h=this.streamTextContent(s);return new Promise(function(R,n){function B(){V.read().then(function({value:J,done:tt}){if(tt){R(z);return}Object.assign(z.styles,J.styles),z.items.push(...J.items),B()},n)}const V=h.getReader(),z={items:[],styles:Object.create(null)};B()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const s=[];for(const h of this._intentStates.values())if(this._abortOperatorList({intentState:h,reason:new Error("Page was destroyed."),force:!0}),!h.opListReadCapability)for(const R of h.renderTasks)s.push(R.completed),R.cancel();return this.objs.clear(),pt(this,c,!1),st(this,q,re).call(this),Promise.all(s)}cleanup(s=!1){pt(this,c,!0);const h=st(this,A,Kt).call(this,!1);return s&&h&&this._stats&&(this._stats=new _display_utils.StatTimer),h}_startRenderPage(s,h){var n,B;const R=this._intentStates.get(h);R&&((n=this._stats)==null||n.timeEnd("Page Request"),(B=R.displayReadyCapability)==null||B.resolve(s))}_renderPageChunk(s,h){for(let R=0,n=s.length;R<n;R++)h.operatorList.fnArray.push(s.fnArray[R]),h.operatorList.argsArray.push(s.argsArray[R]);h.operatorList.lastChunk=s.lastChunk,h.operatorList.separateAnnots=s.separateAnnots;for(const R of h.renderTasks)R.operatorListChanged();s.lastChunk&&st(this,A,Kt).call(this,!0)}_pumpOperatorList({renderingIntent:s,cacheKey:h,annotationStorageMap:R}){const B=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:s,cacheKey:h,annotationStorage:R}).getReader(),V=this._intentStates.get(h);V.streamReader=B;const z=()=>{B.read().then(({value:J,done:tt})=>{if(tt){V.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(J,V),z())},J=>{if(V.streamReader=null,!this._transport.destroyed){if(V.operatorList){V.operatorList.lastChunk=!0;for(const tt of V.renderTasks)tt.operatorListChanged();st(this,A,Kt).call(this,!0)}if(V.displayReadyCapability)V.displayReadyCapability.reject(J);else if(V.opListReadCapability)V.opListReadCapability.reject(J);else throw J}})};z()}_abortOperatorList({intentState:s,reason:h,force:R=!1}){if(s.streamReader){if(s.streamReaderCancelTimeout&&(clearTimeout(s.streamReaderCancelTimeout),s.streamReaderCancelTimeout=null),!R){if(s.renderTasks.size>0)return;if(h instanceof _display_utils.RenderingCancelledException){let n=RENDERING_CANCELLED_TIMEOUT;h.extraDelay>0&&h.extraDelay<1e3&&(n+=h.extraDelay),s.streamReaderCancelTimeout=setTimeout(()=>{s.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:s,reason:h,force:!0})},n);return}}if(s.streamReader.cancel(new _util.AbortException(h.message)).catch(()=>{}),s.streamReader=null,!this._transport.destroyed){for(const[n,B]of this._intentStates)if(B===s){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}j=new WeakMap,c=new WeakMap,A=new WeakSet,Kt=function(s=!1){if(st(this,q,re).call(this),!b(this,c))return!1;if(s)return pt(this,j,setTimeout(()=>{pt(this,j,null),st(this,A,Kt).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:h,operatorList:R}of this._intentStates.values())if(h.size>0||!R.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),pt(this,c,!1),!0},q=new WeakSet,re=function(){b(this,j)&&(clearTimeout(b(this,j)),pt(this,j,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Z(this,L,new Set);Z(this,k,Promise.resolve())}postMessage(s,h){const R={data:structuredClone(s,h?{transfer:h}:null)};b(this,k).then(()=>{for(const n of b(this,L))n.call(this,R)})}addEventListener(s,h){b(this,L).add(h)}removeEventListener(s,h){b(this,L).delete(h)}terminate(){b(this,L).clear()}}L=new WeakMap,k=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const l=(_=document==null?void 0:document.currentScript)==null?void 0:_.src;l&&(PDFWorkerUtil.fallbackWorkerSrc=l.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(l,s){let h;try{if(h=new URL(l),!h.origin||h.origin==="null")return!1}catch{return!1}const R=new URL(s,h);return h.origin===R.origin},PDFWorkerUtil.createCDNWrapper=function(l){const s=`importScripts("${l}");`;return URL.createObjectURL(new Blob([s]))}}const _PDFWorker=class _PDFWorker{constructor({name:l=null,port:s=null,verbosity:h=(0,_util.getVerbosityLevel)()}={}){if(s&&b(_PDFWorker,I).has(s))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=l,this.destroyed=!1,this.verbosity=h,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,s){b(_PDFWorker,I).set(s,this),this._initializeFromPort(s);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(l){this._port=l,this._messageHandler=new _message_handler.MessageHandler("main","worker",l),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:l}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,l)||(l=PDFWorkerUtil.createCDNWrapper(new URL(l,window.location).href));const s=new Worker(l),h=new _message_handler.MessageHandler("main","worker",s),R=()=>{s.removeEventListener("error",n),h.destroy(),s.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},n=()=>{this._webWorker||R()};s.addEventListener("error",n),h.on("test",V=>{if(s.removeEventListener("error",n),this.destroyed){R();return}V?(this._messageHandler=h,this._port=s,this._webWorker=s,this._readyCapability.resolve(),h.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),h.destroy(),s.terminate())}),h.on("ready",V=>{if(s.removeEventListener("error",n),this.destroyed){R();return}try{B()}catch{this._setupFakeWorker()}});const B=()=>{const V=new Uint8Array;h.send("test",V,[V.buffer])};B();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(l=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const s=new LoopbackPort;this._port=s;const h=`fake${PDFWorkerUtil.fakeWorkerId++}`,R=new _message_handler.MessageHandler(h+"_worker",h,s);l.setup(R,s);const n=new _message_handler.MessageHandler(h,h+"_worker",s);this._messageHandler=n,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})}).catch(l=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${l.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),b(_PDFWorker,I).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(l){if(!(l!=null&&l.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return b(this,I).has(l.port)?b(this,I).get(l.port):new _PDFWorker(l)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var l;try{return((l=globalThis.pdfjsWorker)==null?void 0:l.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};I=new WeakMap,Z(_PDFWorker,I,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(s,h,R,n,B){Z(this,u);Z(this,T,new Map);Z(this,x,new Map);Z(this,f,new Map);this.messageHandler=s,this.loadingTask=h,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this._params=n,this.canvasFactory=B.canvasFactory,this.filterFactory=B.filterFactory,this.cMapReaderFactory=B.cMapReaderFactory,this.standardFontDataFactory=B.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=R,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(s,h=_util.AnnotationMode.ENABLE,R=null,n=!1){let B=_util.RenderingIntentFlag.DISPLAY,V=null;switch(s){case"any":B=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":B=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${s}`)}switch(h){case _util.AnnotationMode.DISABLE:B+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:B+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:B+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,V=(B&_util.RenderingIntentFlag.PRINT&&R instanceof _annotation_storage.PrintAnnotationStorage?R:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${h}`)}return n&&(B+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:B,cacheKey:`${B}_${_annotation_storage.AnnotationStorage.getHash(V)}`,annotationStorageMap:V}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const s=[];for(const R of b(this,x).values())s.push(R._destroy());b(this,x).clear(),b(this,f).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const h=this.messageHandler.sendWithPromise("Terminate",null);return s.push(h),Promise.all(s).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),b(this,T).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:s,loadingTask:h}=this;s.on("GetReader",(R,n)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=B=>{this._lastProgress={loaded:B.loaded,total:B.total}},n.onPull=()=>{this._fullReader.read().then(function({value:B,done:V}){if(V){n.close();return}(0,_util.assert)(B instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(B),1,[B])}).catch(B=>{n.error(B)})},n.onCancel=B=>{this._fullReader.cancel(B),n.ready.catch(V=>{if(!this.destroyed)throw V})}}),s.on("ReaderHeadersReady",R=>{const n=new _util.PromiseCapability,B=this._fullReader;return B.headersReady.then(()=>{var V;(!B.isStreamingSupported||!B.isRangeSupported)&&(this._lastProgress&&((V=h.onProgress)==null||V.call(h,this._lastProgress)),B.onProgress=z=>{var J;(J=h.onProgress)==null||J.call(h,{loaded:z.loaded,total:z.total})}),n.resolve({isStreamingSupported:B.isStreamingSupported,isRangeSupported:B.isRangeSupported,contentLength:B.contentLength})},n.reject),n.promise}),s.on("GetRangeReader",(R,n)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const B=this._networkStream.getRangeReader(R.begin,R.end);if(!B){n.close();return}n.onPull=()=>{B.read().then(function({value:V,done:z}){if(z){n.close();return}(0,_util.assert)(V instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(V),1,[V])}).catch(V=>{n.error(V)})},n.onCancel=V=>{B.cancel(V),n.ready.catch(z=>{if(!this.destroyed)throw z})}}),s.on("GetDoc",({pdfInfo:R})=>{this._numPages=R.numPages,this._htmlForXfa=R.htmlForXfa,delete R.htmlForXfa,h._capability.resolve(new PDFDocumentProxy(R,this))}),s.on("DocException",function(R){let n;switch(R.name){case"PasswordException":n=new _util.PasswordException(R.message,R.code);break;case"InvalidPDFException":n=new _util.InvalidPDFException(R.message);break;case"MissingPDFException":n=new _util.MissingPDFException(R.message);break;case"UnexpectedResponseException":n=new _util.UnexpectedResponseException(R.message,R.status);break;case"UnknownErrorException":n=new _util.UnknownErrorException(R.message,R.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}h._capability.reject(n)}),s.on("PasswordRequest",R=>{if(this._passwordCapability=new _util.PromiseCapability,h.onPassword){const n=B=>{B instanceof Error?this._passwordCapability.reject(B):this._passwordCapability.resolve({password:B})};try{h.onPassword(n,R.code)}catch(B){this._passwordCapability.reject(B)}}else this._passwordCapability.reject(new _util.PasswordException(R.message,R.code));return this._passwordCapability.promise}),s.on("DataLoaded",R=>{var n;(n=h.onProgress)==null||n.call(h,{loaded:R.length,total:R.length}),this.downloadInfoCapability.resolve(R)}),s.on("StartRenderPage",R=>{if(this.destroyed)return;b(this,x).get(R.pageIndex)._startRenderPage(R.transparency,R.cacheKey)}),s.on("commonobj",([R,n,B])=>{var V;if(!this.destroyed&&!this.commonObjs.has(R))switch(n){case"Font":const z=this._params;if("error"in B){const dt=B.error;(0,_util.warn)(`Error during font loading: ${dt}`),this.commonObjs.resolve(R,dt);break}const J=z.pdfBug&&((V=globalThis.FontInspector)!=null&&V.enabled)?(dt,ot)=>globalThis.FontInspector.fontAdded(dt,ot):null,tt=new _font_loader.FontFaceObject(B,{isEvalSupported:z.isEvalSupported,disableFontFace:z.disableFontFace,ignoreErrors:z.ignoreErrors,inspectFont:J});this.fontLoader.bind(tt).catch(dt=>s.sendWithPromise("FontFallback",{id:R})).finally(()=>{!z.fontExtraProperties&&tt.data&&(tt.data=null),this.commonObjs.resolve(R,tt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(R,B);break;default:throw new Error(`Got unknown common object type ${n}`)}}),s.on("obj",([R,n,B,V])=>{var J;if(this.destroyed)return;const z=b(this,x).get(n);if(!z.objs.has(R))switch(B){case"Image":if(z.objs.resolve(R,V),V){let tt;if(V.bitmap){const{width:dt,height:ot}=V;tt=dt*ot*4}else tt=((J=V.data)==null?void 0:J.length)||0;tt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(z._maybeCleanupAfterRender=!0)}break;case"Pattern":z.objs.resolve(R,V);break;default:throw new Error(`Got unknown object type ${B}`)}}),s.on("DocProgress",R=>{var n;this.destroyed||(n=h.onProgress)==null||n.call(h,{loaded:R.loaded,total:R.total})}),s.on("FetchBuiltInCMap",R=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(R):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),s.on("FetchStandardFontData",R=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(R):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((s=this._fullReader)==null?void 0:s.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(s){if(!Number.isInteger(s)||s<=0||s>this._numPages)return Promise.reject(new Error("Invalid page request."));const h=s-1,R=b(this,f).get(h);if(R)return R;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:h}).then(B=>{if(this.destroyed)throw new Error("Transport destroyed");const V=new PDFPageProxy(h,B,this,this._params.pdfBug);return b(this,x).set(h,V),V});return b(this,f).set(h,n),n}getPageIndex(s){return typeof s!="object"||s===null||!Number.isInteger(s.num)||s.num<0||!Number.isInteger(s.gen)||s.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:s.num,gen:s.gen})}getAnnotations(s,h){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:s,intent:h})}getFieldObjects(){return st(this,u,ue).call(this,"GetFieldObjects")}hasJSActions(){return st(this,u,ue).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(s){return typeof s!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:s})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(s){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:s})}getStructTree(s){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:s})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(s=>new _optional_content_config.OptionalContentConfig(s))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const s="GetMetadata",h=b(this,T).get(s);if(h)return h;const R=this.messageHandler.sendWithPromise(s,null).then(n=>{var B,V;return{info:n[0],metadata:n[1]?new _metadata.Metadata(n[1]):null,contentDispositionFilename:((B=this._fullReader)==null?void 0:B.filename)??null,contentLength:((V=this._fullReader)==null?void 0:V.contentLength)??null}});return b(this,T).set(s,R),R}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(s=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const h of b(this,x).values())if(!h.cleanup())throw new Error(`startCleanup: Page ${h.pageNumber} is currently rendering.`);this.commonObjs.clear(),s||this.fontLoader.clear(),b(this,T).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:s,enableXfa:h}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:s,enableXfa:h})}}T=new WeakMap,x=new WeakMap,f=new WeakMap,u=new WeakSet,ue=function(s,h=null){const R=b(this,T).get(s);if(R)return R;const n=this.messageHandler.sendWithPromise(s,h);return b(this,T).set(s,n),n};class PDFObjects{constructor(){Z(this,v);Z(this,y,Object.create(null))}get(s,h=null){if(h){const n=st(this,v,fe).call(this,s);return n.capability.promise.then(()=>h(n.data)),null}const R=b(this,y)[s];if(!(R!=null&&R.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${s}.`);return R.data}has(s){const h=b(this,y)[s];return(h==null?void 0:h.capability.settled)||!1}resolve(s,h=null){const R=st(this,v,fe).call(this,s);R.data=h,R.capability.resolve()}clear(){var s;for(const h in b(this,y)){const{data:R}=b(this,y)[h];(s=R==null?void 0:R.bitmap)==null||s.close()}pt(this,y,Object.create(null))}}y=new WeakMap,v=new WeakSet,fe=function(s){const h=b(this,y)[s];return h||(b(this,y)[s]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(s){Z(this,g,null);pt(this,g,s),this.onContinue=null}get promise(){return b(this,g).capability.promise}cancel(s=0){b(this,g).cancel(null,s)}get separateAnnots(){const{separateAnnots:s}=b(this,g).operatorList;if(!s)return!1;const{annotationCanvasMap:h}=b(this,g);return s.form||s.canvas&&(h==null?void 0:h.size)>0}}g=new WeakMap,exports.RenderTask=RenderTask;const o=class o{constructor({callback:s,params:h,objs:R,commonObjs:n,annotationCanvasMap:B,operatorList:V,pageIndex:z,canvasFactory:J,filterFactory:tt,useRequestAnimationFrame:dt=!1,pdfBug:ot=!1,pageColors:ct=null}){this.callback=s,this.params=h,this.objs=R,this.commonObjs=n,this.annotationCanvasMap=B,this.operatorListIdx=null,this.operatorList=V,this._pageIndex=z,this.canvasFactory=J,this.filterFactory=tt,this._pdfBug=ot,this.pageColors=ct,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=dt===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=h.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:s=!1,optionalContentConfig:h}){var z,J;if(this.cancelled)return;if(this._canvas){if(b(o,e).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");b(o,e).add(this._canvas)}this._pdfBug&&((z=globalThis.StepperManager)!=null&&z.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:R,viewport:n,transform:B,background:V}=this.params;this.gfx=new _canvas.CanvasGraphics(R,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:h},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:B,viewport:n,transparency:s,background:V}),this.operatorListIdx=0,this.graphicsReady=!0,(J=this.graphicsReadyCallback)==null||J.call(this)}cancel(s=null,h=0){var R;this.running=!1,this.cancelled=!0,(R=this.gfx)==null||R.endDrawing(),this._canvas&&b(o,e).delete(this._canvas),this.callback(s||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",h))}operatorListChanged(){var s;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(s=this.stepper)==null||s.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&b(o,e).delete(this._canvas),this.callback())))}};e=new WeakMap,Z(o,e,new WeakSet);let InternalRenderTask=o;const version="3.6.172";exports.version=version;const build="4d3dfe254";exports.build=build},(N,r,j)=>{var L,k,_,De,T;Object.defineProperty(r,"__esModule",{value:!0}),r.PrintAnnotationStorage=r.AnnotationStorage=void 0;var c=j(1),A=j(4),W=j(8);class q{constructor(){Z(this,_);Z(this,L,!1);Z(this,k,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(f,u){const a=b(this,k).get(f);return a===void 0?u:Object.assign(u,a)}getRawValue(f){return b(this,k).get(f)}remove(f){if(b(this,k).delete(f),b(this,k).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const u of b(this,k).values())if(u instanceof A.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(f,u){const a=b(this,k).get(f);let y=!1;if(a!==void 0)for(const[v,P]of Object.entries(u))a[v]!==P&&(y=!0,a[v]=P);else y=!0,b(this,k).set(f,u);y&&st(this,_,De).call(this),u instanceof A.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(u.constructor._type)}has(f){return b(this,k).has(f)}getAll(){return b(this,k).size>0?(0,c.objectFromMap)(b(this,k)):null}setAll(f){for(const[u,a]of Object.entries(f))this.setValue(u,a)}get size(){return b(this,k).size}resetModified(){b(this,L)&&(pt(this,L,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Q(this)}get serializable(){if(b(this,k).size===0)return null;const f=new Map;for(const[u,a]of b(this,k)){const y=a instanceof A.AnnotationEditor?a.serialize():a;y&&f.set(u,y)}return f}static getHash(f){if(!f)return"";const u=new W.MurmurHash3_64;for(const[a,y]of f)u.update(`${a}:${JSON.stringify(y)}`);return u.hexdigest()}}L=new WeakMap,k=new WeakMap,_=new WeakSet,De=function(){b(this,L)||(pt(this,L,!0),typeof this.onSetModified=="function"&&this.onSetModified())},r.AnnotationStorage=q;class Q extends q{constructor(u){super();Z(this,T,null);pt(this,T,structuredClone(u.serializable))}get print(){(0,c.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return b(this,T)}}T=new WeakMap,r.PrintAnnotationStorage=Q},(N,r,j)=>{var q,Q,L,k,_,I;Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationEditor=void 0;var c=j(5),A=j(1);const T=class T{constructor(f){Z(this,q,this.focusin.bind(this));Z(this,Q,this.focusout.bind(this));Z(this,L,!1);Z(this,k,!1);Z(this,_,!1);Dt(this,"_uiManager",null);Z(this,I,T._zIndex++);this.constructor===T&&(0,A.unreachable)("Cannot initialize AnnotationEditor."),this.parent=f.parent,this.id=f.id,this.width=this.height=null,this.pageIndex=f.parent.pageIndex,this.name=f.name,this.div=null,this._uiManager=f.uiManager;const{rotation:u,rawDims:{pageWidth:a,pageHeight:y,pageX:v,pageY:P}}=this.parent.viewport;this.rotation=u,this.pageRotation=(360+u-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[a,y],this.pageTranslation=[v,P];const[g,e]=this.parentDimensions;this.x=f.x/g,this.y=f.y/e,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,A.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(f){this._uiManager.addCommands(f)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=b(this,I)}setParent(f){f!==null&&(this.pageIndex=f.pageIndex,this.pageDimensions=f.pageDimensions),this.parent=f}focusin(f){b(this,L)?pt(this,L,!1):this.parent.setSelected(this)}focusout(f){var a;if(!this.isAttachedToDOM)return;const u=f.relatedTarget;u!=null&&u.closest(`#${this.id}`)||(f.preventDefault(),(a=this.parent)!=null&&a.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(f){const u=this.parent.div.getBoundingClientRect();this.startX=f.clientX-u.x,this.startY=f.clientY-u.y,f.dataTransfer.setData("text/plain",this.id),f.dataTransfer.effectAllowed="move"}setAt(f,u,a,y){const[v,P]=this.parentDimensions;[a,y]=this.screenToPageTranslation(a,y),this.x=(f+a)/v,this.y=(u+y)/P,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(f,u){const[a,y]=this.parentDimensions;[f,u]=this.screenToPageTranslation(f,u),this.x+=f/a,this.y+=u/y,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(f,u){switch(this.parentRotation){case 90:return[u,-f];case 180:return[-f,-u];case 270:return[-u,f];default:return[f,u]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:f}=this._uiManager.viewParameters,[u,a]=this.pageDimensions;return[u*f,a*f]}setDims(f,u){const[a,y]=this.parentDimensions;this.div.style.width=`${100*f/a}%`,this.div.style.height=`${100*u/y}%`}fixDims(){const{style:f}=this.div,{height:u,width:a}=f,y=a.endsWith("%"),v=u.endsWith("%");if(y&&v)return;const[P,g]=this.parentDimensions;y||(f.width=`${100*parseFloat(a)/P}%`),v||(f.height=`${100*parseFloat(u)/g}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",b(this,q)),this.div.addEventListener("focusout",b(this,Q));const[f,u]=this.getInitialTranslation();return this.translate(f,u),(0,c.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(f){const{isMac:u}=A.FeatureTest.platform;if(f.button!==0||f.ctrlKey&&u){f.preventDefault();return}f.ctrlKey&&!u||f.shiftKey||f.metaKey&&u?this.parent.toggleSelected(this):this.parent.setSelected(this),pt(this,L,!0)}getRect(f,u){const a=this.parentScale,[y,v]=this.pageDimensions,[P,g]=this.pageTranslation,e=f/a,o=u/a,l=this.x*y,s=this.y*v,h=this.width*y,R=this.height*v;switch(this.rotation){case 0:return[l+e+P,v-s-o-R+g,l+e+h+P,v-s-o+g];case 90:return[l+o+P,v-s+e+g,l+o+R+P,v-s+e+h+g];case 180:return[l-e-h+P,v-s+o+g,l-e+P,v-s+o+R+g];case 270:return[l-o-R+P,v-s-e-h+g,l-o+P,v-s-e+g];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(f,u){const[a,y,v,P]=f,g=v-a,e=P-y;switch(this.rotation){case 0:return[a,u-P,g,e];case 90:return[a,u-y,e,g];case 180:return[v,u-y,g,e];case 270:return[v,u-P,e,g];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){pt(this,_,!0)}disableEditMode(){pt(this,_,!1)}isInEditMode(){return b(this,_)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var f;(f=this.div)==null||f.addEventListener("focusin",b(this,q))}serialize(){(0,A.unreachable)("An editor must be serializable")}static deserialize(f,u,a){const y=new this.prototype.constructor({parent:u,id:u.getNextId(),uiManager:a});y.rotation=f.rotation;const[v,P]=y.pageDimensions,[g,e,o,l]=y.getRectInCurrentCoords(f.rect,P);return y.x=g/v,y.y=e/P,y.width=o/v,y.height=l/P,y}remove(){this.div.removeEventListener("focusin",b(this,q)),this.div.removeEventListener("focusout",b(this,Q)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var f;(f=this.div)==null||f.classList.add("selectedEditor")}unselect(){var f;(f=this.div)==null||f.classList.remove("selectedEditor")}updateParams(f,u){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return b(this,k)}set isEditing(f){pt(this,k,f),f?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};q=new WeakMap,Q=new WeakMap,L=new WeakMap,k=new WeakMap,_=new WeakMap,I=new WeakMap,Dt(T,"_colorManager",new c.ColorManager),Dt(T,"_zIndex",1);let W=T;r.AnnotationEditor=W},(N,r,j)=>{var T,x,f,u,a,y,Le,g,e,o,l,s,h,R,n,B,V,z,J,tt,dt,ot,ct,gt,At,St,yt,$,d,p,E,Ie,M,pe,U,Ne,O,je,i,Ht,S,te,G,Be,K,Ue,at,ge,rt,ee,ft,me;Object.defineProperty(r,"__esModule",{value:!0}),r.KeyboardManager=r.CommandManager=r.ColorManager=r.AnnotationEditorUIManager=void 0,r.bindEvents=W,r.opacityToHex=q;var c=j(1),A=j(6);function W(Tt,Y,bt){for(const vt of bt)Y.addEventListener(vt,Tt[vt].bind(Tt))}function q(Tt){return Math.round(Math.min(255,Math.max(1,255*Tt))).toString(16).padStart(2,"0")}class Q{constructor(){Z(this,T,0)}getId(){return`${c.AnnotationEditorPrefix}${ie(this,T)._++}`}}T=new WeakMap;class L{constructor(Y=128){Z(this,x,[]);Z(this,f,!1);Z(this,u,void 0);Z(this,a,-1);pt(this,u,Y)}add({cmd:Y,undo:bt,mustExec:vt,type:Ft=NaN,overwriteIfSameType:ht=!1,keepUndo:w=!1}){if(vt&&Y(),b(this,f))return;const D={cmd:Y,undo:bt,type:Ft};if(b(this,a)===-1){b(this,x).length>0&&(b(this,x).length=0),pt(this,a,0),b(this,x).push(D);return}if(ht&&b(this,x)[b(this,a)].type===Ft){w&&(D.undo=b(this,x)[b(this,a)].undo),b(this,x)[b(this,a)]=D;return}const lt=b(this,a)+1;lt===b(this,u)?b(this,x).splice(0,1):(pt(this,a,lt),lt<b(this,x).length&&b(this,x).splice(lt)),b(this,x).push(D)}undo(){b(this,a)!==-1&&(pt(this,f,!0),b(this,x)[b(this,a)].undo(),pt(this,f,!1),pt(this,a,b(this,a)-1))}redo(){b(this,a)<b(this,x).length-1&&(pt(this,a,b(this,a)+1),pt(this,f,!0),b(this,x)[b(this,a)].cmd(),pt(this,f,!1))}hasSomethingToUndo(){return b(this,a)!==-1}hasSomethingToRedo(){return b(this,a)<b(this,x).length-1}destroy(){pt(this,x,null)}}x=new WeakMap,f=new WeakMap,u=new WeakMap,a=new WeakMap,r.CommandManager=L;class k{constructor(Y){Z(this,y);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:bt}=c.FeatureTest.platform;for(const[vt,Ft]of Y)for(const ht of vt){const w=ht.startsWith("mac+");bt&&w?(this.callbacks.set(ht.slice(4),Ft),this.allKeys.add(ht.split("+").at(-1))):!bt&&!w&&(this.callbacks.set(ht,Ft),this.allKeys.add(ht.split("+").at(-1)))}}exec(Y,bt){if(!this.allKeys.has(bt.key))return;const vt=this.callbacks.get(st(this,y,Le).call(this,bt));vt&&(vt.bind(Y)(),bt.stopPropagation(),bt.preventDefault())}}y=new WeakSet,Le=function(Y){Y.altKey&&this.buffer.push("alt"),Y.ctrlKey&&this.buffer.push("ctrl"),Y.metaKey&&this.buffer.push("meta"),Y.shiftKey&&this.buffer.push("shift"),this.buffer.push(Y.key);const bt=this.buffer.join("+");return this.buffer.length=0,bt},r.KeyboardManager=k;const P=class P{get _colors(){const Y=new Map([["CanvasText",null],["Canvas",null]]);return(0,A.getColorValues)(Y),(0,c.shadow)(this,"_colors",Y)}convert(Y){const bt=(0,A.getRGB)(Y);if(!window.matchMedia("(forced-colors: active)").matches)return bt;for(const[vt,Ft]of this._colors)if(Ft.every((ht,w)=>ht===bt[w]))return P._colorsMapping.get(vt);return bt}getHexCode(Y){const bt=this._colors.get(Y);return bt?c.Util.makeHexColor(...bt):Y}};Dt(P,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let _=P;r.ColorManager=_;const _t=class _t{constructor(Y,bt,vt){Z(this,E);Z(this,M);Z(this,U);Z(this,O);Z(this,i);Z(this,S);Z(this,G);Z(this,K);Z(this,at);Z(this,rt);Z(this,ft);Z(this,g,null);Z(this,e,new Map);Z(this,o,new Map);Z(this,l,null);Z(this,s,new L);Z(this,h,0);Z(this,R,null);Z(this,n,new Set);Z(this,B,null);Z(this,V,new Q);Z(this,z,!1);Z(this,J,c.AnnotationEditorType.NONE);Z(this,tt,new Set);Z(this,dt,this.copy.bind(this));Z(this,ot,this.cut.bind(this));Z(this,ct,this.paste.bind(this));Z(this,gt,this.keydown.bind(this));Z(this,At,this.onEditingAction.bind(this));Z(this,St,this.onPageChanging.bind(this));Z(this,yt,this.onScaleChanging.bind(this));Z(this,$,this.onRotationChanging.bind(this));Z(this,d,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Z(this,p,null);pt(this,p,Y),pt(this,B,bt),b(this,B)._on("editingaction",b(this,At)),b(this,B)._on("pagechanging",b(this,St)),b(this,B)._on("scalechanging",b(this,yt)),b(this,B)._on("rotationchanging",b(this,$)),pt(this,l,vt),this.viewParameters={realScale:A.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){st(this,M,pe).call(this),b(this,B)._off("editingaction",b(this,At)),b(this,B)._off("pagechanging",b(this,St)),b(this,B)._off("scalechanging",b(this,yt)),b(this,B)._off("rotationchanging",b(this,$));for(const Y of b(this,o).values())Y.destroy();b(this,o).clear(),b(this,e).clear(),b(this,n).clear(),pt(this,g,null),b(this,tt).clear(),b(this,s).destroy()}onPageChanging({pageNumber:Y}){pt(this,h,Y-1)}focusMainContainer(){b(this,p).focus()}addShouldRescale(Y){b(this,n).add(Y)}removeShouldRescale(Y){b(this,n).delete(Y)}onScaleChanging({scale:Y}){this.commitOrRemove(),this.viewParameters.realScale=Y*A.PixelsPerInch.PDF_TO_CSS_UNITS;for(const bt of b(this,n))bt.onScaleChanging()}onRotationChanging({pagesRotation:Y}){this.commitOrRemove(),this.viewParameters.rotation=Y}addToAnnotationStorage(Y){!Y.isEmpty()&&b(this,l)&&!b(this,l).has(Y.id)&&b(this,l).setValue(Y.id,Y)}copy(Y){if(Y.preventDefault(),b(this,g)&&b(this,g).commitOrRemove(),!this.hasSelection)return;const bt=[];for(const vt of b(this,tt))vt.isEmpty()||bt.push(vt.serialize());bt.length!==0&&Y.clipboardData.setData("application/pdfjs",JSON.stringify(bt))}cut(Y){this.copy(Y),this.delete()}paste(Y){Y.preventDefault();let bt=Y.clipboardData.getData("application/pdfjs");if(!bt)return;try{bt=JSON.parse(bt)}catch(Ft){(0,c.warn)(`paste: "${Ft.message}".`);return}if(!Array.isArray(bt))return;this.unselectAll();const vt=b(this,o).get(b(this,h));try{const Ft=[];for(const D of bt){const lt=vt.deserialize(D);if(!lt)return;Ft.push(lt)}const ht=()=>{for(const D of Ft)st(this,at,ge).call(this,D);st(this,ft,me).call(this,Ft)},w=()=>{for(const D of Ft)D.remove()};this.addCommands({cmd:ht,undo:w,mustExec:!0})}catch(Ft){(0,c.warn)(`paste: "${Ft.message}".`)}}keydown(Y){var bt;(bt=this.getActive())!=null&&bt.shouldGetKeyboardEvents()||_t._keyboardManager.exec(this,Y)}onEditingAction(Y){["undo","redo","delete","selectAll"].includes(Y.name)&&this[Y.name]()}setEditingState(Y){Y?(st(this,E,Ie).call(this),st(this,U,Ne).call(this),st(this,i,Ht).call(this,{isEditing:b(this,J)!==c.AnnotationEditorType.NONE,isEmpty:st(this,rt,ee).call(this),hasSomethingToUndo:b(this,s).hasSomethingToUndo(),hasSomethingToRedo:b(this,s).hasSomethingToRedo(),hasSelectedEditor:!1})):(st(this,M,pe).call(this),st(this,O,je).call(this),st(this,i,Ht).call(this,{isEditing:!1}))}registerEditorTypes(Y){if(!b(this,R)){pt(this,R,Y);for(const bt of b(this,R))st(this,S,te).call(this,bt.defaultPropertiesToUpdate)}}getId(){return b(this,V).getId()}get currentLayer(){return b(this,o).get(b(this,h))}get currentPageIndex(){return b(this,h)}addLayer(Y){b(this,o).set(Y.pageIndex,Y),b(this,z)?Y.enable():Y.disable()}removeLayer(Y){b(this,o).delete(Y.pageIndex)}updateMode(Y){if(pt(this,J,Y),Y===c.AnnotationEditorType.NONE)this.setEditingState(!1),st(this,K,Ue).call(this);else{this.setEditingState(!0),st(this,G,Be).call(this);for(const bt of b(this,o).values())bt.updateMode(Y)}}updateToolbar(Y){Y!==b(this,J)&&b(this,B).dispatch("switchannotationeditormode",{source:this,mode:Y})}updateParams(Y,bt){if(b(this,R)){for(const vt of b(this,tt))vt.updateParams(Y,bt);for(const vt of b(this,R))vt.updateDefaultParams(Y,bt)}}getEditors(Y){const bt=[];for(const vt of b(this,e).values())vt.pageIndex===Y&&bt.push(vt);return bt}getEditor(Y){return b(this,e).get(Y)}addEditor(Y){b(this,e).set(Y.id,Y)}removeEditor(Y){var bt;b(this,e).delete(Y.id),this.unselect(Y),(bt=b(this,l))==null||bt.remove(Y.id)}setActiveEditor(Y){b(this,g)!==Y&&(pt(this,g,Y),Y&&st(this,S,te).call(this,Y.propertiesToUpdate))}toggleSelected(Y){if(b(this,tt).has(Y)){b(this,tt).delete(Y),Y.unselect(),st(this,i,Ht).call(this,{hasSelectedEditor:this.hasSelection});return}b(this,tt).add(Y),Y.select(),st(this,S,te).call(this,Y.propertiesToUpdate),st(this,i,Ht).call(this,{hasSelectedEditor:!0})}setSelected(Y){for(const bt of b(this,tt))bt!==Y&&bt.unselect();b(this,tt).clear(),b(this,tt).add(Y),Y.select(),st(this,S,te).call(this,Y.propertiesToUpdate),st(this,i,Ht).call(this,{hasSelectedEditor:!0})}isSelected(Y){return b(this,tt).has(Y)}unselect(Y){Y.unselect(),b(this,tt).delete(Y),st(this,i,Ht).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return b(this,tt).size!==0}undo(){b(this,s).undo(),st(this,i,Ht).call(this,{hasSomethingToUndo:b(this,s).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:st(this,rt,ee).call(this)})}redo(){b(this,s).redo(),st(this,i,Ht).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:b(this,s).hasSomethingToRedo(),isEmpty:st(this,rt,ee).call(this)})}addCommands(Y){b(this,s).add(Y),st(this,i,Ht).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:st(this,rt,ee).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Y=[...b(this,tt)],bt=()=>{for(const Ft of Y)Ft.remove()},vt=()=>{for(const Ft of Y)st(this,at,ge).call(this,Ft)};this.addCommands({cmd:bt,undo:vt,mustExec:!0})}commitOrRemove(){var Y;(Y=b(this,g))==null||Y.commitOrRemove()}selectAll(){for(const Y of b(this,tt))Y.commit();st(this,ft,me).call(this,b(this,e).values())}unselectAll(){if(b(this,g)){b(this,g).commitOrRemove();return}if(b(this,tt).size!==0){for(const Y of b(this,tt))Y.unselect();b(this,tt).clear(),st(this,i,Ht).call(this,{hasSelectedEditor:!1})}}isActive(Y){return b(this,g)===Y}getActive(){return b(this,g)}getMode(){return b(this,J)}};g=new WeakMap,e=new WeakMap,o=new WeakMap,l=new WeakMap,s=new WeakMap,h=new WeakMap,R=new WeakMap,n=new WeakMap,B=new WeakMap,V=new WeakMap,z=new WeakMap,J=new WeakMap,tt=new WeakMap,dt=new WeakMap,ot=new WeakMap,ct=new WeakMap,gt=new WeakMap,At=new WeakMap,St=new WeakMap,yt=new WeakMap,$=new WeakMap,d=new WeakMap,p=new WeakMap,E=new WeakSet,Ie=function(){b(this,p).addEventListener("keydown",b(this,gt))},M=new WeakSet,pe=function(){b(this,p).removeEventListener("keydown",b(this,gt))},U=new WeakSet,Ne=function(){document.addEventListener("copy",b(this,dt)),document.addEventListener("cut",b(this,ot)),document.addEventListener("paste",b(this,ct))},O=new WeakSet,je=function(){document.removeEventListener("copy",b(this,dt)),document.removeEventListener("cut",b(this,ot)),document.removeEventListener("paste",b(this,ct))},i=new WeakSet,Ht=function(Y){Object.entries(Y).some(([vt,Ft])=>b(this,d)[vt]!==Ft)&&b(this,B).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(b(this,d),Y)})},S=new WeakSet,te=function(Y){b(this,B).dispatch("annotationeditorparamschanged",{source:this,details:Y})},G=new WeakSet,Be=function(){if(!b(this,z)){pt(this,z,!0);for(const Y of b(this,o).values())Y.enable()}},K=new WeakSet,Ue=function(){if(this.unselectAll(),b(this,z)){pt(this,z,!1);for(const Y of b(this,o).values())Y.disable()}},at=new WeakSet,ge=function(Y){const bt=b(this,o).get(Y.pageIndex);bt?bt.addOrRebuild(Y):this.addEditor(Y)},rt=new WeakSet,ee=function(){if(b(this,e).size===0)return!0;if(b(this,e).size===1)for(const Y of b(this,e).values())return Y.isEmpty();return!1},ft=new WeakSet,me=function(Y){b(this,tt).clear();for(const bt of Y)bt.isEmpty()||(b(this,tt).add(bt),bt.select());st(this,i,Ht).call(this,{hasSelectedEditor:!0})},Dt(_t,"_keyboardManager",new k([[["ctrl+a","mac+meta+a"],_t.prototype.selectAll],[["ctrl+z","mac+meta+z"],_t.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],_t.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],_t.prototype.delete],[["Escape","mac+Escape"],_t.prototype.unselectAll]]));let I=_t;r.AnnotationEditorUIManager=I},(N,r,j)=>{var dt,ot,ct,gt,At,St,yt,$,d,Jt,E,zt,M,Vt;Object.defineProperty(r,"__esModule",{value:!0}),r.StatTimer=r.RenderingCancelledException=r.PixelsPerInch=r.PageViewport=r.PDFDateString=r.DOMStandardFontDataFactory=r.DOMSVGFactory=r.DOMFilterFactory=r.DOMCanvasFactory=r.DOMCMapReaderFactory=r.AnnotationPrefix=void 0,r.deprecated=l,r.getColorValues=B,r.getCurrentTransform=V,r.getCurrentTransformInverse=z,r.getFilenameFromUrl=v,r.getPdfFilenameFromUrl=P,r.getRGB=n,r.getXfaPageViewport=R,r.isDataScheme=a,r.isPdfFile=y,r.isValidFetchUrl=e,r.loadScript=o,r.setLayerDimensions=J;var c=j(7),A=j(1);const W="http://www.w3.org/2000/svg",q="pdfjs_internal_id_";r.AnnotationPrefix=q;const tt=class tt{};Dt(tt,"CSS",96),Dt(tt,"PDF",72),Dt(tt,"PDF_TO_CSS_UNITS",tt.CSS/tt.PDF);let Q=tt;r.PixelsPerInch=Q;class L extends c.BaseFilterFactory{constructor({docId:O,ownerDocument:t=globalThis.document}={}){super();Z(this,d);Z(this,E);Z(this,M);Z(this,dt,void 0);Z(this,ot,void 0);Z(this,ct,void 0);Z(this,gt,void 0);Z(this,At,void 0);Z(this,St,void 0);Z(this,yt,void 0);Z(this,$,0);pt(this,ct,O),pt(this,gt,t)}addFilter(O){if(!O)return"none";let t=b(this,d,Jt).get(O);if(t)return t;let i,m,S,C;if(O.length===1){const at=O[0],et=new Array(256);for(let rt=0;rt<256;rt++)et[rt]=at[rt]/255;C=i=m=S=et.join(",")}else{const[at,et,rt]=O,ut=new Array(256),ft=new Array(256),Et=new Array(256);for(let _t=0;_t<256;_t++)ut[_t]=at[_t]/255,ft[_t]=et[_t]/255,Et[_t]=rt[_t]/255;i=ut.join(","),m=ft.join(","),S=Et.join(","),C=`${i}${m}${S}`}if(t=b(this,d,Jt).get(C),t)return b(this,d,Jt).set(O,t),t;const G=`g_${b(this,ct)}_transfer_map_${ie(this,$)._++}`,nt=`url(#${G})`;b(this,d,Jt).set(O,nt),b(this,d,Jt).set(C,nt);const K=b(this,gt).createElementNS(W,"filter",W);K.setAttribute("id",G),K.setAttribute("color-interpolation-filters","sRGB");const it=b(this,gt).createElementNS(W,"feComponentTransfer");return K.append(it),st(this,M,Vt).call(this,it,"feFuncR",i),st(this,M,Vt).call(this,it,"feFuncG",m),st(this,M,Vt).call(this,it,"feFuncB",S),b(this,E,zt).append(K),nt}addHCMFilter(O,t){var rt;const i=`${O}-${t}`;if(b(this,St)===i)return b(this,yt);if(pt(this,St,i),pt(this,yt,"none"),(rt=b(this,At))==null||rt.remove(),!O||!t)return b(this,yt);b(this,E,zt).style.color=O,O=getComputedStyle(b(this,E,zt)).getPropertyValue("color");const m=n(O);O=A.Util.makeHexColor(...m),b(this,E,zt).style.color=t,t=getComputedStyle(b(this,E,zt)).getPropertyValue("color");const S=n(t);if(t=A.Util.makeHexColor(...S),b(this,E,zt).style.color="",O==="#000000"&&t==="#ffffff"||O===t)return b(this,yt);const C=new Array(256);for(let ut=0;ut<=255;ut++){const ft=ut/255;C[ut]=ft<=.03928?ft/12.92:((ft+.055)/1.055)**2.4}const G=C.join(","),nt=`g_${b(this,ct)}_hcm_filter`,K=pt(this,At,b(this,gt).createElementNS(W,"filter",W));K.setAttribute("id",nt),K.setAttribute("color-interpolation-filters","sRGB");let it=b(this,gt).createElementNS(W,"feComponentTransfer");K.append(it),st(this,M,Vt).call(this,it,"feFuncR",G),st(this,M,Vt).call(this,it,"feFuncG",G),st(this,M,Vt).call(this,it,"feFuncB",G);const at=b(this,gt).createElementNS(W,"feColorMatrix");at.setAttribute("type","matrix"),at.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),K.append(at),it=b(this,gt).createElementNS(W,"feComponentTransfer"),K.append(it);const et=(ut,ft)=>{const Et=m[ut]/255,_t=S[ut]/255,Tt=new Array(ft+1);for(let Y=0;Y<=ft;Y++)Tt[Y]=Et+Y/ft*(_t-Et);return Tt.join(",")};return st(this,M,Vt).call(this,it,"feFuncR",et(0,5)),st(this,M,Vt).call(this,it,"feFuncG",et(1,5)),st(this,M,Vt).call(this,it,"feFuncB",et(2,5)),b(this,E,zt).append(K),pt(this,yt,`url(#${nt})`),b(this,yt)}destroy(O=!1){O&&b(this,yt)||(b(this,ot)&&(b(this,ot).parentNode.parentNode.remove(),pt(this,ot,null)),b(this,dt)&&(b(this,dt).clear(),pt(this,dt,null)),pt(this,$,0))}}dt=new WeakMap,ot=new WeakMap,ct=new WeakMap,gt=new WeakMap,At=new WeakMap,St=new WeakMap,yt=new WeakMap,$=new WeakMap,d=new WeakSet,Jt=function(){return b(this,dt)||pt(this,dt,new Map)},E=new WeakSet,zt=function(){if(!b(this,ot)){const O=b(this,gt).createElement("div"),{style:t}=O;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const i=b(this,gt).createElementNS(W,"svg");i.setAttribute("width",0),i.setAttribute("height",0),pt(this,ot,b(this,gt).createElementNS(W,"defs")),O.append(i),i.append(b(this,ot)),b(this,gt).body.append(O)}return b(this,ot)},M=new WeakSet,Vt=function(O,t,i){const m=b(this,gt).createElementNS(W,t);m.setAttribute("type","discrete"),m.setAttribute("tableValues",i),O.append(m)},r.DOMFilterFactory=L;class k extends c.BaseCanvasFactory{constructor({ownerDocument:F=globalThis.document}={}){super(),this._document=F}_createCanvas(F,O){const t=this._document.createElement("canvas");return t.width=F,t.height=O,t}}r.DOMCanvasFactory=k;async function _(U,F=!1){if(e(U,document.baseURI)){const O=await fetch(U);if(!O.ok)throw new Error(O.statusText);return F?new Uint8Array(await O.arrayBuffer()):(0,A.stringToBytes)(await O.text())}return new Promise((O,t)=>{const i=new XMLHttpRequest;i.open("GET",U,!0),F&&(i.responseType="arraybuffer"),i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){let m;if(F&&i.response?m=new Uint8Array(i.response):!F&&i.responseText&&(m=(0,A.stringToBytes)(i.responseText)),m){O(m);return}}t(new Error(i.statusText))}},i.send(null)})}class I extends c.BaseCMapReaderFactory{_fetchData(F,O){return _(F,this.isCompressed).then(t=>({cMapData:t,compressionType:O}))}}r.DOMCMapReaderFactory=I;class T extends c.BaseStandardFontDataFactory{_fetchData(F){return _(F,!0)}}r.DOMStandardFontDataFactory=T;class x extends c.BaseSVGFactory{_createSVG(F){return document.createElementNS(W,F)}}r.DOMSVGFactory=x;class f{constructor({viewBox:F,scale:O,rotation:t,offsetX:i=0,offsetY:m=0,dontFlip:S=!1}){this.viewBox=F,this.scale=O,this.rotation=t,this.offsetX=i,this.offsetY=m;const C=(F[2]+F[0])/2,G=(F[3]+F[1])/2;let nt,K,it,at;switch(t%=360,t<0&&(t+=360),t){case 180:nt=-1,K=0,it=0,at=1;break;case 90:nt=0,K=1,it=1,at=0;break;case 270:nt=0,K=-1,it=-1,at=0;break;case 0:nt=1,K=0,it=0,at=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}S&&(it=-it,at=-at);let et,rt,ut,ft;nt===0?(et=Math.abs(G-F[1])*O+i,rt=Math.abs(C-F[0])*O+m,ut=(F[3]-F[1])*O,ft=(F[2]-F[0])*O):(et=Math.abs(C-F[0])*O+i,rt=Math.abs(G-F[1])*O+m,ut=(F[2]-F[0])*O,ft=(F[3]-F[1])*O),this.transform=[nt*O,K*O,it*O,at*O,et-nt*O*C-it*O*G,rt-K*O*C-at*O*G],this.width=ut,this.height=ft}get rawDims(){const{viewBox:F}=this;return(0,A.shadow)(this,"rawDims",{pageWidth:F[2]-F[0],pageHeight:F[3]-F[1],pageX:F[0],pageY:F[1]})}clone({scale:F=this.scale,rotation:O=this.rotation,offsetX:t=this.offsetX,offsetY:i=this.offsetY,dontFlip:m=!1}={}){return new f({viewBox:this.viewBox.slice(),scale:F,rotation:O,offsetX:t,offsetY:i,dontFlip:m})}convertToViewportPoint(F,O){return A.Util.applyTransform([F,O],this.transform)}convertToViewportRectangle(F){const O=A.Util.applyTransform([F[0],F[1]],this.transform),t=A.Util.applyTransform([F[2],F[3]],this.transform);return[O[0],O[1],t[0],t[1]]}convertToPdfPoint(F,O){return A.Util.applyInverseTransform([F,O],this.transform)}}r.PageViewport=f;class u extends A.BaseException{constructor(F,O,t=0){super(F,"RenderingCancelledException"),this.type=O,this.extraDelay=t}}r.RenderingCancelledException=u;function a(U){const F=U.length;let O=0;for(;O<F&&U[O].trim()==="";)O++;return U.substring(O,O+5).toLowerCase()==="data:"}function y(U){return typeof U=="string"&&/\.pdf$/i.test(U)}function v(U,F=!1){return F||([U]=U.split(/[#?]/,1)),U.substring(U.lastIndexOf("/")+1)}function P(U,F="document.pdf"){if(typeof U!="string")return F;if(a(U))return(0,A.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),F;const O=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,t=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=O.exec(U);let m=t.exec(i[1])||t.exec(i[2])||t.exec(i[3]);if(m&&(m=m[0],m.includes("%")))try{m=t.exec(decodeURIComponent(m))[0]}catch{}return m||F}class g{constructor(){Dt(this,"started",Object.create(null));Dt(this,"times",[])}time(F){F in this.started&&(0,A.warn)(`Timer is already running for ${F}`),this.started[F]=Date.now()}timeEnd(F){F in this.started||(0,A.warn)(`Timer has not been started for ${F}`),this.times.push({name:F,start:this.started[F],end:Date.now()}),delete this.started[F]}toString(){const F=[];let O=0;for(const{name:t}of this.times)O=Math.max(t.length,O);for(const{name:t,start:i,end:m}of this.times)F.push(`${t.padEnd(O)} ${m-i}ms
`);return F.join("")}}r.StatTimer=g;function e(U,F){try{const{protocol:O}=F?new URL(U,F):new URL(U);return O==="http:"||O==="https:"}catch{return!1}}function o(U,F=!1){return new Promise((O,t)=>{const i=document.createElement("script");i.src=U,i.onload=function(m){F&&i.remove(),O(m)},i.onerror=function(){t(new Error(`Cannot load script at: ${i.src}`))},(document.head||document.documentElement).append(i)})}function l(U){console.log("Deprecated API usage: "+U)}let s;class h{static toDateObject(F){if(!F||typeof F!="string")return null;s||(s=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const O=s.exec(F);if(!O)return null;const t=parseInt(O[1],10);let i=parseInt(O[2],10);i=i>=1&&i<=12?i-1:0;let m=parseInt(O[3],10);m=m>=1&&m<=31?m:1;let S=parseInt(O[4],10);S=S>=0&&S<=23?S:0;let C=parseInt(O[5],10);C=C>=0&&C<=59?C:0;let G=parseInt(O[6],10);G=G>=0&&G<=59?G:0;const nt=O[7]||"Z";let K=parseInt(O[8],10);K=K>=0&&K<=23?K:0;let it=parseInt(O[9],10)||0;return it=it>=0&&it<=59?it:0,nt==="-"?(S+=K,C+=it):nt==="+"&&(S-=K,C-=it),new Date(Date.UTC(t,i,m,S,C,G))}}r.PDFDateString=h;function R(U,{scale:F=1,rotation:O=0}){const{width:t,height:i}=U.attributes.style,m=[0,0,parseInt(t),parseInt(i)];return new f({viewBox:m,scale:F,rotation:O})}function n(U){if(U.startsWith("#")){const F=parseInt(U.slice(1),16);return[(F&16711680)>>16,(F&65280)>>8,F&255]}return U.startsWith("rgb(")?U.slice(4,-1).split(",").map(F=>parseInt(F)):U.startsWith("rgba(")?U.slice(5,-1).split(",").map(F=>parseInt(F)).slice(0,3):((0,A.warn)(`Not a valid color format: "${U}"`),[0,0,0])}function B(U){const F=document.createElement("span");F.style.visibility="hidden",document.body.append(F);for(const O of U.keys()){F.style.color=O;const t=window.getComputedStyle(F).color;U.set(O,n(t))}F.remove()}function V(U){const{a:F,b:O,c:t,d:i,e:m,f:S}=U.getTransform();return[F,O,t,i,m,S]}function z(U){const{a:F,b:O,c:t,d:i,e:m,f:S}=U.getTransform().invertSelf();return[F,O,t,i,m,S]}function J(U,F,O=!1,t=!0){if(F instanceof f){const{pageWidth:i,pageHeight:m}=F.rawDims,{style:S}=U,C=`calc(var(--scale-factor) * ${i}px)`,G=`calc(var(--scale-factor) * ${m}px)`;!O||F.rotation%180===0?(S.width=C,S.height=G):(S.width=G,S.height=C)}t&&U.setAttribute("data-main-rotation",F.rotation)}},(N,r,j)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BaseStandardFontDataFactory=r.BaseSVGFactory=r.BaseFilterFactory=r.BaseCanvasFactory=r.BaseCMapReaderFactory=void 0;var c=j(1);class A{constructor(){this.constructor===A&&(0,c.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(_){return"none"}addHCMFilter(_,I){return"none"}destroy(_=!1){}}r.BaseFilterFactory=A;class W{constructor(){this.constructor===W&&(0,c.unreachable)("Cannot initialize BaseCanvasFactory.")}create(_,I){if(_<=0||I<=0)throw new Error("Invalid canvas size");const T=this._createCanvas(_,I);return{canvas:T,context:T.getContext("2d")}}reset(_,I,T){if(!_.canvas)throw new Error("Canvas is not specified");if(I<=0||T<=0)throw new Error("Invalid canvas size");_.canvas.width=I,_.canvas.height=T}destroy(_){if(!_.canvas)throw new Error("Canvas is not specified");_.canvas.width=0,_.canvas.height=0,_.canvas=null,_.context=null}_createCanvas(_,I){(0,c.unreachable)("Abstract method `_createCanvas` called.")}}r.BaseCanvasFactory=W;class q{constructor({baseUrl:_=null,isCompressed:I=!0}){this.constructor===q&&(0,c.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=_,this.isCompressed=I}async fetch({name:_}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!_)throw new Error("CMap name must be specified.");const I=this.baseUrl+_+(this.isCompressed?".bcmap":""),T=this.isCompressed?c.CMapCompressionType.BINARY:c.CMapCompressionType.NONE;return this._fetchData(I,T).catch(x=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${I}`)})}_fetchData(_,I){(0,c.unreachable)("Abstract method `_fetchData` called.")}}r.BaseCMapReaderFactory=q;class Q{constructor({baseUrl:_=null}){this.constructor===Q&&(0,c.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=_}async fetch({filename:_}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!_)throw new Error("Font filename must be specified.");const I=`${this.baseUrl}${_}`;return this._fetchData(I).catch(T=>{throw new Error(`Unable to load font data at: ${I}`)})}_fetchData(_){(0,c.unreachable)("Abstract method `_fetchData` called.")}}r.BaseStandardFontDataFactory=Q;class L{constructor(){this.constructor===L&&(0,c.unreachable)("Cannot initialize BaseSVGFactory.")}create(_,I,T=!1){if(_<=0||I<=0)throw new Error("Invalid SVG dimensions");const x=this._createSVG("svg:svg");return x.setAttribute("version","1.1"),T||(x.setAttribute("width",`${_}px`),x.setAttribute("height",`${I}px`)),x.setAttribute("preserveAspectRatio","none"),x.setAttribute("viewBox",`0 0 ${_} ${I}`),x}createElement(_){if(typeof _!="string")throw new Error("Invalid SVG element type");return this._createSVG(_)}_createSVG(_){(0,c.unreachable)("Abstract method `_createSVG` called.")}}r.BaseSVGFactory=L},(N,r,j)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.MurmurHash3_64=void 0;var c=j(1);const A=3285377520,W=4294901760,q=65535;class Q{constructor(k){this.h1=k?k&4294967295:A,this.h2=k?k&4294967295:A}update(k){let _,I;if(typeof k=="string"){_=new Uint8Array(k.length*2),I=0;for(let l=0,s=k.length;l<s;l++){const h=k.charCodeAt(l);h<=255?_[I++]=h:(_[I++]=h>>>8,_[I++]=h&255)}}else if((0,c.isArrayBuffer)(k))_=k.slice(),I=_.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const T=I>>2,x=I-T*4,f=new Uint32Array(_.buffer,0,T);let u=0,a=0,y=this.h1,v=this.h2;const P=3432918353,g=461845907,e=P&q,o=g&q;for(let l=0;l<T;l++)l&1?(u=f[l],u=u*P&W|u*e&q,u=u<<15|u>>>17,u=u*g&W|u*o&q,y^=u,y=y<<13|y>>>19,y=y*5+3864292196):(a=f[l],a=a*P&W|a*e&q,a=a<<15|a>>>17,a=a*g&W|a*o&q,v^=a,v=v<<13|v>>>19,v=v*5+3864292196);switch(u=0,x){case 3:u^=_[T*4+2]<<16;case 2:u^=_[T*4+1]<<8;case 1:u^=_[T*4],u=u*P&W|u*e&q,u=u<<15|u>>>17,u=u*g&W|u*o&q,T&1?y^=u:v^=u}this.h1=y,this.h2=v}hexdigest(){let k=this.h1,_=this.h2;return k^=_>>>1,k=k*3981806797&W|k*36045&q,_=_*4283543511&W|((_<<16|k>>>16)*2950163797&W)>>>16,k^=_>>>1,k=k*444984403&W|k*60499&q,_=_*3301882366&W|((_<<16|k>>>16)*3120437893&W)>>>16,k^=_>>>1,(k>>>0).toString(16).padStart(8,"0")+(_>>>0).toString(16).padStart(8,"0")}}r.MurmurHash3_64=Q},(N,r,j)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FontLoader=r.FontFaceObject=void 0;var c=j(1),A=j(10);class W{constructor({ownerDocument:L=globalThis.document,styleElement:k=null}){this._document=L,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(L){this.nativeFontFaces.push(L),this._document.fonts.add(L)}insertRule(L){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const k=this.styleElement.sheet;k.insertRule(L,k.cssRules.length)}clear(){for(const L of this.nativeFontFaces)this._document.fonts.delete(L);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(L){if(L.attached||L.missingFile)return;if(L.attached=!0,this.isFontLoadingAPISupported){const _=L.createNativeFontFace();if(_){this.addNativeFontFace(_);try{await _.loaded}catch(I){throw(0,c.warn)(`Failed to load font '${_.family}': '${I}'.`),L.disableFontFace=!0,I}}return}const k=L.createFontFaceRule();if(k){if(this.insertRule(k),this.isSyncFontLoadingSupported)return;await new Promise(_=>{const I=this._queueLoadingCallback(_);this._prepareFontLoadEvent(L,I)})}}get isFontLoadingAPISupported(){var k;const L=!!((k=this._document)!=null&&k.fonts);return(0,c.shadow)(this,"isFontLoadingAPISupported",L)}get isSyncFontLoadingSupported(){let L=!1;return(A.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(L=!0),(0,c.shadow)(this,"isSyncFontLoadingSupported",L)}_queueLoadingCallback(L){function k(){for((0,c.assert)(!I.done,"completeRequest() cannot be called twice."),I.done=!0;_.length>0&&_[0].done;){const T=_.shift();setTimeout(T.callback,0)}}const{loadingRequests:_}=this,I={done:!1,complete:k,callback:L};return _.push(I),I}get _loadTestFont(){const L=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,c.shadow)(this,"_loadTestFont",L)}_prepareFontLoadEvent(L,k){function _(n,B){return n.charCodeAt(B)<<24|n.charCodeAt(B+1)<<16|n.charCodeAt(B+2)<<8|n.charCodeAt(B+3)&255}function I(n,B,V,z){const J=n.substring(0,B),tt=n.substring(B+V);return J+z+tt}let T,x;const f=this._document.createElement("canvas");f.width=1,f.height=1;const u=f.getContext("2d");let a=0;function y(n,B){if(++a>30){(0,c.warn)("Load test font never loaded."),B();return}if(u.font="30px "+n,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){B();return}setTimeout(y.bind(null,n,B))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let P=this._loadTestFont;P=I(P,976,v.length,v);const e=16,o=1482184792;let l=_(P,e);for(T=0,x=v.length-3;T<x;T+=4)l=l-o+_(v,T)|0;T<v.length&&(l=l-o+_(v+"XXX",T)|0),P=I(P,e,4,(0,c.string32)(l));const s=`url(data:font/opentype;base64,${btoa(P)});`,h=`@font-face {font-family:"${v}";src:${s}}`;this.insertRule(h);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const n of[L.loadedName,v]){const B=this._document.createElement("span");B.textContent="Hi",B.style.fontFamily=n,R.append(B)}this._document.body.append(R),y(v,()=>{R.remove(),k.complete()})}}r.FontLoader=W;class q{constructor(L,{isEvalSupported:k=!0,disableFontFace:_=!1,ignoreErrors:I=!1,inspectFont:T=null}){this.compiledGlyphs=Object.create(null);for(const x in L)this[x]=L[x];this.isEvalSupported=k!==!1,this.disableFontFace=_===!0,this.ignoreErrors=I===!0,this._inspectFont=T}createNativeFontFace(){var k;if(!this.data||this.disableFontFace)return null;let L;if(!this.cssFontInfo)L=new FontFace(this.loadedName,this.data,{});else{const _={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(_.style=`oblique ${this.cssFontInfo.italicAngle}deg`),L=new FontFace(this.cssFontInfo.fontFamily,this.data,_)}return(k=this._inspectFont)==null||k.call(this,this),L}createFontFaceRule(){var I;if(!this.data||this.disableFontFace)return null;const L=(0,c.bytesToString)(this.data),k=`url(data:${this.mimetype};base64,${btoa(L)});`;let _;if(!this.cssFontInfo)_=`@font-face {font-family:"${this.loadedName}";src:${k}}`;else{let T=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(T+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),_=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${T}src:${k}}`}return(I=this._inspectFont)==null||I.call(this,this,k),_}getPathGenerator(L,k){if(this.compiledGlyphs[k]!==void 0)return this.compiledGlyphs[k];let _;try{_=L.get(this.loadedName+"_path_"+k)}catch(I){if(!this.ignoreErrors)throw I;return(0,c.warn)(`getPathGenerator - ignoring character: "${I}".`),this.compiledGlyphs[k]=function(T,x){}}if(this.isEvalSupported&&c.FeatureTest.isEvalSupported){const I=[];for(const T of _){const x=T.args!==void 0?T.args.join(","):"";I.push("c.",T.cmd,"(",x,`);
`)}return this.compiledGlyphs[k]=new Function("c","size",I.join(""))}return this.compiledGlyphs[k]=function(I,T){for(const x of _)x.cmd==="scale"&&(x.args=[T,-T]),I[x.cmd].apply(I,x.args)}}}r.FontFaceObject=q},(N,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isNodeJS=void 0;const j=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");r.isNodeJS=j},(N,r,j)=>{var ct,be,At,ye;Object.defineProperty(r,"__esModule",{value:!0}),r.CanvasGraphics=void 0;var c=j(1),A=j(6),W=j(12),q=j(13),Q=j(10);const L=16,k=100,_=4096,I=15,T=10,x=1e3,f=16;function u($,d){if($._removeMirroring)throw new Error("Context is already forwarding operations.");$.__originalSave=$.save,$.__originalRestore=$.restore,$.__originalRotate=$.rotate,$.__originalScale=$.scale,$.__originalTranslate=$.translate,$.__originalTransform=$.transform,$.__originalSetTransform=$.setTransform,$.__originalResetTransform=$.resetTransform,$.__originalClip=$.clip,$.__originalMoveTo=$.moveTo,$.__originalLineTo=$.lineTo,$.__originalBezierCurveTo=$.bezierCurveTo,$.__originalRect=$.rect,$.__originalClosePath=$.closePath,$.__originalBeginPath=$.beginPath,$._removeMirroring=()=>{$.save=$.__originalSave,$.restore=$.__originalRestore,$.rotate=$.__originalRotate,$.scale=$.__originalScale,$.translate=$.__originalTranslate,$.transform=$.__originalTransform,$.setTransform=$.__originalSetTransform,$.resetTransform=$.__originalResetTransform,$.clip=$.__originalClip,$.moveTo=$.__originalMoveTo,$.lineTo=$.__originalLineTo,$.bezierCurveTo=$.__originalBezierCurveTo,$.rect=$.__originalRect,$.closePath=$.__originalClosePath,$.beginPath=$.__originalBeginPath,delete $._removeMirroring},$.save=function(){d.save(),this.__originalSave()},$.restore=function(){d.restore(),this.__originalRestore()},$.translate=function(E,H){d.translate(E,H),this.__originalTranslate(E,H)},$.scale=function(E,H){d.scale(E,H),this.__originalScale(E,H)},$.transform=function(E,H,M,X,U,F){d.transform(E,H,M,X,U,F),this.__originalTransform(E,H,M,X,U,F)},$.setTransform=function(E,H,M,X,U,F){d.setTransform(E,H,M,X,U,F),this.__originalSetTransform(E,H,M,X,U,F)},$.resetTransform=function(){d.resetTransform(),this.__originalResetTransform()},$.rotate=function(E){d.rotate(E),this.__originalRotate(E)},$.clip=function(E){d.clip(E),this.__originalClip(E)},$.moveTo=function(p,E){d.moveTo(p,E),this.__originalMoveTo(p,E)},$.lineTo=function(p,E){d.lineTo(p,E),this.__originalLineTo(p,E)},$.bezierCurveTo=function(p,E,H,M,X,U){d.bezierCurveTo(p,E,H,M,X,U),this.__originalBezierCurveTo(p,E,H,M,X,U)},$.rect=function(p,E,H,M){d.rect(p,E,H,M),this.__originalRect(p,E,H,M)},$.closePath=function(){d.closePath(),this.__originalClosePath()},$.beginPath=function(){d.beginPath(),this.__originalBeginPath()}}class a{constructor(d){this.canvasFactory=d,this.cache=Object.create(null)}getCanvas(d,p,E){let H;return this.cache[d]!==void 0?(H=this.cache[d],this.canvasFactory.reset(H,p,E)):(H=this.canvasFactory.create(p,E),this.cache[d]=H),H}delete(d){delete this.cache[d]}clear(){for(const d in this.cache){const p=this.cache[d];this.canvasFactory.destroy(p),delete this.cache[d]}}}function y($,d,p,E,H,M,X,U,F,O){const[t,i,m,S,C,G]=(0,A.getCurrentTransform)($);if(i===0&&m===0){const it=X*t+C,at=Math.round(it),et=U*S+G,rt=Math.round(et),ut=(X+F)*t+C,ft=Math.abs(Math.round(ut)-at)||1,Et=(U+O)*S+G,_t=Math.abs(Math.round(Et)-rt)||1;return $.setTransform(Math.sign(t),0,0,Math.sign(S),at,rt),$.drawImage(d,p,E,H,M,0,0,ft,_t),$.setTransform(t,i,m,S,C,G),[ft,_t]}if(t===0&&S===0){const it=U*m+C,at=Math.round(it),et=X*i+G,rt=Math.round(et),ut=(U+O)*m+C,ft=Math.abs(Math.round(ut)-at)||1,Et=(X+F)*i+G,_t=Math.abs(Math.round(Et)-rt)||1;return $.setTransform(0,Math.sign(i),Math.sign(m),0,at,rt),$.drawImage(d,p,E,H,M,0,0,_t,ft),$.setTransform(t,i,m,S,C,G),[_t,ft]}$.drawImage(d,p,E,H,M,X,U,F,O);const nt=Math.hypot(t,i),K=Math.hypot(m,S);return[nt*F,K*O]}function v($){const{width:d,height:p}=$;if(d>x||p>x)return null;const E=1e3,H=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),M=d+1;let X=new Uint8Array(M*(p+1)),U,F,O;const t=d+7&-8;let i=new Uint8Array(t*p),m=0;for(const K of $.data){let it=128;for(;it>0;)i[m++]=K&it?0:255,it>>=1}let S=0;for(m=0,i[m]!==0&&(X[0]=1,++S),F=1;F<d;F++)i[m]!==i[m+1]&&(X[F]=i[m]?2:1,++S),m++;for(i[m]!==0&&(X[F]=2,++S),U=1;U<p;U++){m=U*t,O=U*M,i[m-t]!==i[m]&&(X[O]=i[m]?1:8,++S);let K=(i[m]?4:0)+(i[m-t]?8:0);for(F=1;F<d;F++)K=(K>>2)+(i[m+1]?4:0)+(i[m-t+1]?8:0),H[K]&&(X[O+F]=H[K],++S),m++;if(i[m-t]!==i[m]&&(X[O+F]=i[m]?2:4,++S),S>E)return null}for(m=t*(p-1),O=U*M,i[m]!==0&&(X[O]=8,++S),F=1;F<d;F++)i[m]!==i[m+1]&&(X[O+F]=i[m]?4:8,++S),m++;if(i[m]!==0&&(X[O+F]=4,++S),S>E)return null;const C=new Int32Array([0,M,-1,0,-M,0,0,0,1]),G=new Path2D;for(U=0;S&&U<=p;U++){let K=U*M;const it=K+d;for(;K<it&&!X[K];)K++;if(K===it)continue;G.moveTo(K%M,U);const at=K;let et=X[K];do{const rt=C[et];do K+=rt;while(!X[K]);const ut=X[K];ut!==5&&ut!==10?(et=ut,X[K]=0):(et=ut&51*et>>4,X[K]&=et>>2|et<<2),G.lineTo(K%M,K/M|0),X[K]||--S}while(at!==K);--U}return i=null,X=null,function(K){K.save(),K.scale(1/d,-1/p),K.translate(0,-p),K.fill(G),K.beginPath(),K.restore()}}class P{constructor(d,p){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=c.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=c.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=c.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,d,p])}clone(){const d=Object.create(this);return d.clipBox=this.clipBox.slice(),d}setCurrentPoint(d,p){this.x=d,this.y=p}updatePathMinMax(d,p,E){[p,E]=c.Util.applyTransform([p,E],d),this.minX=Math.min(this.minX,p),this.minY=Math.min(this.minY,E),this.maxX=Math.max(this.maxX,p),this.maxY=Math.max(this.maxY,E)}updateRectMinMax(d,p){const E=c.Util.applyTransform(p,d),H=c.Util.applyTransform(p.slice(2),d);this.minX=Math.min(this.minX,E[0],H[0]),this.minY=Math.min(this.minY,E[1],H[1]),this.maxX=Math.max(this.maxX,E[0],H[0]),this.maxY=Math.max(this.maxY,E[1],H[1])}updateScalingPathMinMax(d,p){c.Util.scaleMinMax(d,p),this.minX=Math.min(this.minX,p[0]),this.maxX=Math.max(this.maxX,p[1]),this.minY=Math.min(this.minY,p[2]),this.maxY=Math.max(this.maxY,p[3])}updateCurvePathMinMax(d,p,E,H,M,X,U,F,O,t){const i=c.Util.bezierBoundingBox(p,E,H,M,X,U,F,O);if(t){t[0]=Math.min(t[0],i[0],i[2]),t[1]=Math.max(t[1],i[0],i[2]),t[2]=Math.min(t[2],i[1],i[3]),t[3]=Math.max(t[3],i[1],i[3]);return}this.updateRectMinMax(d,i)}getPathBoundingBox(d=W.PathType.FILL,p=null){const E=[this.minX,this.minY,this.maxX,this.maxY];if(d===W.PathType.STROKE){p||(0,c.unreachable)("Stroke bounding box must include transform.");const H=c.Util.singularValueDecompose2dScale(p),M=H[0]*this.lineWidth/2,X=H[1]*this.lineWidth/2;E[0]-=M,E[1]-=X,E[2]+=M,E[3]+=X}return E}updateClipFromPath(){const d=c.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(d||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(d){this.clipBox=d,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(d=W.PathType.FILL,p=null){return c.Util.intersect(this.clipBox,this.getPathBoundingBox(d,p))}}function g($,d){if(typeof ImageData<"u"&&d instanceof ImageData){$.putImageData(d,0,0);return}const p=d.height,E=d.width,H=p%f,M=(p-H)/f,X=H===0?M:M+1,U=$.createImageData(E,f);let F=0,O;const t=d.data,i=U.data;let m,S,C,G;if(d.kind===c.ImageKind.GRAYSCALE_1BPP){const nt=t.byteLength,K=new Uint32Array(i.buffer,0,i.byteLength>>2),it=K.length,at=E+7>>3,et=4294967295,rt=c.FeatureTest.isLittleEndian?4278190080:255;for(m=0;m<X;m++){for(C=m<M?f:H,O=0,S=0;S<C;S++){const ut=nt-F;let ft=0;const Et=ut>at?E:ut*8-7,_t=Et&-8;let Tt=0,Y=0;for(;ft<_t;ft+=8)Y=t[F++],K[O++]=Y&128?et:rt,K[O++]=Y&64?et:rt,K[O++]=Y&32?et:rt,K[O++]=Y&16?et:rt,K[O++]=Y&8?et:rt,K[O++]=Y&4?et:rt,K[O++]=Y&2?et:rt,K[O++]=Y&1?et:rt;for(;ft<Et;ft++)Tt===0&&(Y=t[F++],Tt=128),K[O++]=Y&Tt?et:rt,Tt>>=1}for(;O<it;)K[O++]=0;$.putImageData(U,0,m*f)}}else if(d.kind===c.ImageKind.RGBA_32BPP){for(S=0,G=E*f*4,m=0;m<M;m++)i.set(t.subarray(F,F+G)),F+=G,$.putImageData(U,0,S),S+=f;m<X&&(G=E*H*4,i.set(t.subarray(F,F+G)),$.putImageData(U,0,S))}else if(d.kind===c.ImageKind.RGB_24BPP)for(C=f,G=E*C,m=0;m<X;m++){for(m>=M&&(C=H,G=E*C),O=0,S=G;S--;)i[O++]=t[F++],i[O++]=t[F++],i[O++]=t[F++],i[O++]=255;$.putImageData(U,0,m*f)}else throw new Error(`bad image kind: ${d.kind}`)}function e($,d){if(d.bitmap){$.drawImage(d.bitmap,0,0);return}const p=d.height,E=d.width,H=p%f,M=(p-H)/f,X=H===0?M:M+1,U=$.createImageData(E,f);let F=0;const O=d.data,t=U.data;for(let i=0;i<X;i++){const m=i<M?f:H;({srcPos:F}=(0,q.convertBlackAndWhiteToRGBA)({src:O,srcPos:F,dest:t,width:E,height:m,nonBlackColor:0})),$.putImageData(U,0,i*f)}}function o($,d){const p=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const E of p)$[E]!==void 0&&(d[E]=$[E]);$.setLineDash!==void 0&&(d.setLineDash($.getLineDash()),d.lineDashOffset=$.lineDashOffset)}function l($){$.strokeStyle=$.fillStyle="#000000",$.fillRule="nonzero",$.globalAlpha=1,$.lineWidth=1,$.lineCap="butt",$.lineJoin="miter",$.miterLimit=10,$.globalCompositeOperation="source-over",$.font="10px sans-serif",$.setLineDash!==void 0&&($.setLineDash([]),$.lineDashOffset=0),Q.isNodeJS||($.filter="none")}function s($,d,p,E){const H=$.length;for(let M=3;M<H;M+=4){const X=$[M];if(X===0)$[M-3]=d,$[M-2]=p,$[M-1]=E;else if(X<255){const U=255-X;$[M-3]=$[M-3]*X+d*U>>8,$[M-2]=$[M-2]*X+p*U>>8,$[M-1]=$[M-1]*X+E*U>>8}}}function h($,d,p){const E=$.length,H=1/255;for(let M=3;M<E;M+=4){const X=p?p[$[M]]:$[M];d[M]=d[M]*X*H|0}}function R($,d,p){const E=$.length;for(let H=3;H<E;H+=4){const M=$[H-3]*77+$[H-2]*152+$[H-1]*28;d[H]=p?d[H]*p[M>>8]>>8:d[H]*M>>16}}function n($,d,p,E,H,M,X,U,F,O,t){const i=!!M,m=i?M[0]:0,S=i?M[1]:0,C=i?M[2]:0;let G;H==="Luminosity"?G=R:G=h;const K=Math.min(E,Math.ceil(1048576/p));for(let it=0;it<E;it+=K){const at=Math.min(K,E-it),et=$.getImageData(U-O,it+(F-t),p,at),rt=d.getImageData(U,it+F,p,at);i&&s(et.data,m,S,C),G(et.data,rt.data,X),d.putImageData(rt,U,it+F)}}function B($,d,p,E){const H=E[0],M=E[1],X=E[2]-H,U=E[3]-M;X===0||U===0||(n(d.context,p,X,U,d.subtype,d.backdrop,d.transferMap,H,M,d.offsetX,d.offsetY),$.save(),$.globalAlpha=1,$.globalCompositeOperation="source-over",$.setTransform(1,0,0,1,0,0),$.drawImage(p.canvas,0,0),$.restore())}function V($,d){const p=c.Util.singularValueDecompose2dScale($);p[0]=Math.fround(p[0]),p[1]=Math.fround(p[1]);const E=Math.fround((globalThis.devicePixelRatio||1)*A.PixelsPerInch.PDF_TO_CSS_UNITS);return d!==void 0?d:p[0]<=E||p[1]<=E}const z=["butt","round","square"],J=["miter","round","bevel"],tt={},dt={},yt=class yt{constructor(d,p,E,H,M,{optionalContentConfig:X,markedContentStack:U=null},F,O){Z(this,ct);Z(this,At);this.ctx=d,this.current=new P(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=p,this.objs=E,this.canvasFactory=H,this.filterFactory=M,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=U||[],this.optionalContentConfig=X,this.cachedCanvases=new a(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=F,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=O,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(d,p=null){return typeof d=="string"?d.startsWith("g_")?this.commonObjs.get(d):this.objs.get(d):p}beginDrawing({transform:d,viewport:p,transparency:E=!1,background:H=null}){const M=this.ctx.canvas.width,X=this.ctx.canvas.height,U=this.ctx.fillStyle;if(this.ctx.fillStyle=H||"#ffffff",this.ctx.fillRect(0,0,M,X),this.ctx.fillStyle=U,E){const F=this.cachedCanvases.getCanvas("transparent",M,X);this.compositeCtx=this.ctx,this.transparentCanvas=F.canvas,this.ctx=F.context,this.ctx.save(),this.ctx.transform(...(0,A.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),l(this.ctx),d&&(this.ctx.transform(...d),this.outputScaleX=d[0],this.outputScaleY=d[0]),this.ctx.transform(...p.transform),this.viewportScale=p.scale,this.baseTransform=(0,A.getCurrentTransform)(this.ctx)}executeOperatorList(d,p,E,H){const M=d.argsArray,X=d.fnArray;let U=p||0;const F=M.length;if(F===U)return U;const O=F-U>T&&typeof E=="function",t=O?Date.now()+I:0;let i=0;const m=this.commonObjs,S=this.objs;let C;for(;;){if(H!==void 0&&U===H.nextBreakPoint)return H.breakIt(U,E),U;if(C=X[U],C!==c.OPS.dependency)this[C].apply(this,M[U]);else for(const G of M[U]){const nt=G.startsWith("g_")?m:S;if(!nt.has(G))return nt.get(G,E),U}if(U++,U===F)return U;if(O&&++i>T){if(Date.now()>t)return E(),U;i=0}}}endDrawing(){st(this,ct,be).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const d of this._cachedBitmapsMap.values()){for(const p of d.values())typeof HTMLCanvasElement<"u"&&p instanceof HTMLCanvasElement&&(p.width=p.height=0);d.clear()}this._cachedBitmapsMap.clear(),st(this,At,ye).call(this)}_scaleImage(d,p){const E=d.width,H=d.height;let M=Math.max(Math.hypot(p[0],p[1]),1),X=Math.max(Math.hypot(p[2],p[3]),1),U=E,F=H,O="prescale1",t,i;for(;M>2&&U>1||X>2&&F>1;){let m=U,S=F;M>2&&U>1&&(m=U>=16384?Math.floor(U/2)-1||1:Math.ceil(U/2),M/=U/m),X>2&&F>1&&(S=F>=16384?Math.floor(F/2)-1||1:Math.ceil(F)/2,X/=F/S),t=this.cachedCanvases.getCanvas(O,m,S),i=t.context,i.clearRect(0,0,m,S),i.drawImage(d,0,0,U,F,0,0,m,S),d=t.canvas,U=m,F=S,O=O==="prescale1"?"prescale2":"prescale1"}return{img:d,paintWidth:U,paintHeight:F}}_createMaskCanvas(d){const p=this.ctx,{width:E,height:H}=d,M=this.current.fillColor,X=this.current.patternFill,U=(0,A.getCurrentTransform)(p);let F,O,t,i;if((d.bitmap||d.data)&&d.count>1){const ft=d.bitmap||d.data.buffer;O=JSON.stringify(X?U:[U.slice(0,4),M]),F=this._cachedBitmapsMap.get(ft),F||(F=new Map,this._cachedBitmapsMap.set(ft,F));const Et=F.get(O);if(Et&&!X){const _t=Math.round(Math.min(U[0],U[2])+U[4]),Tt=Math.round(Math.min(U[1],U[3])+U[5]);return{canvas:Et,offsetX:_t,offsetY:Tt}}t=Et}t||(i=this.cachedCanvases.getCanvas("maskCanvas",E,H),e(i.context,d));let m=c.Util.transform(U,[1/E,0,0,-1/H,0,0]);m=c.Util.transform(m,[1,0,0,1,0,-H]);const S=c.Util.applyTransform([0,0],m),C=c.Util.applyTransform([E,H],m),G=c.Util.normalizeRect([S[0],S[1],C[0],C[1]]),nt=Math.round(G[2]-G[0])||1,K=Math.round(G[3]-G[1])||1,it=this.cachedCanvases.getCanvas("fillCanvas",nt,K),at=it.context,et=Math.min(S[0],C[0]),rt=Math.min(S[1],C[1]);at.translate(-et,-rt),at.transform(...m),t||(t=this._scaleImage(i.canvas,(0,A.getCurrentTransformInverse)(at)),t=t.img,F&&X&&F.set(O,t)),at.imageSmoothingEnabled=V((0,A.getCurrentTransform)(at),d.interpolate),y(at,t,0,0,t.width,t.height,0,0,E,H),at.globalCompositeOperation="source-in";const ut=c.Util.transform((0,A.getCurrentTransformInverse)(at),[1,0,0,1,-et,-rt]);return at.fillStyle=X?M.getPattern(p,this,ut,W.PathType.FILL):M,at.fillRect(0,0,E,H),F&&!X&&(this.cachedCanvases.delete("fillCanvas"),F.set(O,it.canvas)),{canvas:it.canvas,offsetX:Math.round(et),offsetY:Math.round(rt)}}setLineWidth(d){d!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=d,this.ctx.lineWidth=d}setLineCap(d){this.ctx.lineCap=z[d]}setLineJoin(d){this.ctx.lineJoin=J[d]}setMiterLimit(d){this.ctx.miterLimit=d}setDash(d,p){const E=this.ctx;E.setLineDash!==void 0&&(E.setLineDash(d),E.lineDashOffset=p)}setRenderingIntent(d){}setFlatness(d){}setGState(d){for(const[p,E]of d)switch(p){case"LW":this.setLineWidth(E);break;case"LC":this.setLineCap(E);break;case"LJ":this.setLineJoin(E);break;case"ML":this.setMiterLimit(E);break;case"D":this.setDash(E[0],E[1]);break;case"RI":this.setRenderingIntent(E);break;case"FL":this.setFlatness(E);break;case"Font":this.setFont(E[0],E[1]);break;case"CA":this.current.strokeAlpha=E;break;case"ca":this.current.fillAlpha=E,this.ctx.globalAlpha=E;break;case"BM":this.ctx.globalCompositeOperation=E;break;case"SMask":this.current.activeSMask=E?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(E);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const d=this.inSMaskMode;this.current.activeSMask&&!d?this.beginSMaskMode():!this.current.activeSMask&&d&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const d=this.ctx.canvas.width,p=this.ctx.canvas.height,E="smaskGroupAt"+this.groupLevel,H=this.cachedCanvases.getCanvas(E,d,p);this.suspendedCtx=this.ctx,this.ctx=H.context;const M=this.ctx;M.setTransform(...(0,A.getCurrentTransform)(this.suspendedCtx)),o(this.suspendedCtx,M),u(M,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),o(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(d){if(!this.current.activeSMask)return;d?(d[0]=Math.floor(d[0]),d[1]=Math.floor(d[1]),d[2]=Math.ceil(d[2]),d[3]=Math.ceil(d[3])):d=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const p=this.current.activeSMask,E=this.suspendedCtx;B(E,p,this.ctx,d),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(o(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const d=this.current;this.stateStack.push(d),this.current=d.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),o(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(d,p,E,H,M,X){this.ctx.transform(d,p,E,H,M,X),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(d,p,E){const H=this.ctx,M=this.current;let X=M.x,U=M.y,F,O;const t=(0,A.getCurrentTransform)(H),i=t[0]===0&&t[3]===0||t[1]===0&&t[2]===0,m=i?E.slice(0):null;for(let S=0,C=0,G=d.length;S<G;S++)switch(d[S]|0){case c.OPS.rectangle:X=p[C++],U=p[C++];const nt=p[C++],K=p[C++],it=X+nt,at=U+K;H.moveTo(X,U),nt===0||K===0?H.lineTo(it,at):(H.lineTo(it,U),H.lineTo(it,at),H.lineTo(X,at)),i||M.updateRectMinMax(t,[X,U,it,at]),H.closePath();break;case c.OPS.moveTo:X=p[C++],U=p[C++],H.moveTo(X,U),i||M.updatePathMinMax(t,X,U);break;case c.OPS.lineTo:X=p[C++],U=p[C++],H.lineTo(X,U),i||M.updatePathMinMax(t,X,U);break;case c.OPS.curveTo:F=X,O=U,X=p[C+4],U=p[C+5],H.bezierCurveTo(p[C],p[C+1],p[C+2],p[C+3],X,U),M.updateCurvePathMinMax(t,F,O,p[C],p[C+1],p[C+2],p[C+3],X,U,m),C+=6;break;case c.OPS.curveTo2:F=X,O=U,H.bezierCurveTo(X,U,p[C],p[C+1],p[C+2],p[C+3]),M.updateCurvePathMinMax(t,F,O,X,U,p[C],p[C+1],p[C+2],p[C+3],m),X=p[C+2],U=p[C+3],C+=4;break;case c.OPS.curveTo3:F=X,O=U,X=p[C+2],U=p[C+3],H.bezierCurveTo(p[C],p[C+1],X,U,X,U),M.updateCurvePathMinMax(t,F,O,p[C],p[C+1],X,U,X,U,m),C+=4;break;case c.OPS.closePath:H.closePath();break}i&&M.updateScalingPathMinMax(t,m),M.setCurrentPoint(X,U)}closePath(){this.ctx.closePath()}stroke(d=!0){const p=this.ctx,E=this.current.strokeColor;p.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof E=="object"&&(E!=null&&E.getPattern)?(p.save(),p.strokeStyle=E.getPattern(p,this,(0,A.getCurrentTransformInverse)(p),W.PathType.STROKE),this.rescaleAndStroke(!1),p.restore()):this.rescaleAndStroke(!0)),d&&this.consumePath(this.current.getClippedPathBoundingBox()),p.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(d=!0){const p=this.ctx,E=this.current.fillColor,H=this.current.patternFill;let M=!1;H&&(p.save(),p.fillStyle=E.getPattern(p,this,(0,A.getCurrentTransformInverse)(p),W.PathType.FILL),M=!0);const X=this.current.getClippedPathBoundingBox();this.contentVisible&&X!==null&&(this.pendingEOFill?(p.fill("evenodd"),this.pendingEOFill=!1):p.fill()),M&&p.restore(),d&&this.consumePath(X)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=tt}eoClip(){this.pendingClip=dt}beginText(){this.current.textMatrix=c.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const d=this.pendingTextPaths,p=this.ctx;if(d===void 0){p.beginPath();return}p.save(),p.beginPath();for(const E of d)p.setTransform(...E.transform),p.translate(E.x,E.y),E.addToPath(p,E.fontSize);p.restore(),p.clip(),p.beginPath(),delete this.pendingTextPaths}setCharSpacing(d){this.current.charSpacing=d}setWordSpacing(d){this.current.wordSpacing=d}setHScale(d){this.current.textHScale=d/100}setLeading(d){this.current.leading=-d}setFont(d,p){const E=this.commonObjs.get(d),H=this.current;if(!E)throw new Error(`Can't find font for ${d}`);if(H.fontMatrix=E.fontMatrix||c.FONT_IDENTITY_MATRIX,(H.fontMatrix[0]===0||H.fontMatrix[3]===0)&&(0,c.warn)("Invalid font matrix for font "+d),p<0?(p=-p,H.fontDirection=-1):H.fontDirection=1,this.current.font=E,this.current.fontSize=p,E.isType3Font)return;const M=E.loadedName||"sans-serif";let X="normal";E.black?X="900":E.bold&&(X="bold");const U=E.italic?"italic":"normal",F=`"${M}", ${E.fallbackName}`;let O=p;p<L?O=L:p>k&&(O=k),this.current.fontSizeScale=p/O,this.ctx.font=`${U} ${X} ${O}px ${F}`}setTextRenderingMode(d){this.current.textRenderingMode=d}setTextRise(d){this.current.textRise=d}moveText(d,p){this.current.x=this.current.lineX+=d,this.current.y=this.current.lineY+=p}setLeadingMoveText(d,p){this.setLeading(-p),this.moveText(d,p)}setTextMatrix(d,p,E,H,M,X){this.current.textMatrix=[d,p,E,H,M,X],this.current.textMatrixScale=Math.hypot(d,p),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(d,p,E,H){const M=this.ctx,X=this.current,U=X.font,F=X.textRenderingMode,O=X.fontSize/X.fontSizeScale,t=F&c.TextRenderingMode.FILL_STROKE_MASK,i=!!(F&c.TextRenderingMode.ADD_TO_PATH_FLAG),m=X.patternFill&&!U.missingFile;let S;(U.disableFontFace||i||m)&&(S=U.getPathGenerator(this.commonObjs,d)),U.disableFontFace||m?(M.save(),M.translate(p,E),M.beginPath(),S(M,O),H&&M.setTransform(...H),(t===c.TextRenderingMode.FILL||t===c.TextRenderingMode.FILL_STROKE)&&M.fill(),(t===c.TextRenderingMode.STROKE||t===c.TextRenderingMode.FILL_STROKE)&&M.stroke(),M.restore()):((t===c.TextRenderingMode.FILL||t===c.TextRenderingMode.FILL_STROKE)&&M.fillText(d,p,E),(t===c.TextRenderingMode.STROKE||t===c.TextRenderingMode.FILL_STROKE)&&M.strokeText(d,p,E)),i&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,A.getCurrentTransform)(M),x:p,y:E,fontSize:O,addToPath:S})}get isFontSubpixelAAEnabled(){const{context:d}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);d.scale(1.5,1),d.fillText("I",0,10);const p=d.getImageData(0,0,10,10).data;let E=!1;for(let H=3;H<p.length;H+=4)if(p[H]>0&&p[H]<255){E=!0;break}return(0,c.shadow)(this,"isFontSubpixelAAEnabled",E)}showText(d){const p=this.current,E=p.font;if(E.isType3Font)return this.showType3Text(d);const H=p.fontSize;if(H===0)return;const M=this.ctx,X=p.fontSizeScale,U=p.charSpacing,F=p.wordSpacing,O=p.fontDirection,t=p.textHScale*O,i=d.length,m=E.vertical,S=m?1:-1,C=E.defaultVMetrics,G=H*p.fontMatrix[0],nt=p.textRenderingMode===c.TextRenderingMode.FILL&&!E.disableFontFace&&!p.patternFill;M.save(),M.transform(...p.textMatrix),M.translate(p.x,p.y+p.textRise),O>0?M.scale(t,-1):M.scale(t,1);let K;if(p.patternFill){M.save();const ut=p.fillColor.getPattern(M,this,(0,A.getCurrentTransformInverse)(M),W.PathType.FILL);K=(0,A.getCurrentTransform)(M),M.restore(),M.fillStyle=ut}let it=p.lineWidth;const at=p.textMatrixScale;if(at===0||it===0){const ut=p.textRenderingMode&c.TextRenderingMode.FILL_STROKE_MASK;(ut===c.TextRenderingMode.STROKE||ut===c.TextRenderingMode.FILL_STROKE)&&(it=this.getSinglePixelWidth())}else it/=at;if(X!==1&&(M.scale(X,X),it/=X),M.lineWidth=it,E.isInvalidPDFjsFont){const ut=[];let ft=0;for(const Et of d)ut.push(Et.unicode),ft+=Et.width;M.fillText(ut.join(""),0,0),p.x+=ft*G*t,M.restore(),this.compose();return}let et=0,rt;for(rt=0;rt<i;++rt){const ut=d[rt];if(typeof ut=="number"){et+=S*ut*H/1e3;continue}let ft=!1;const Et=(ut.isSpace?F:0)+U,_t=ut.fontChar,Tt=ut.accent;let Y,bt,vt=ut.width;if(m){const ht=ut.vmetric||C,w=-(ut.vmetric?ht[1]:vt*.5)*G,D=ht[2]*G;vt=ht?-ht[0]:vt,Y=w/X,bt=(et+D)/X}else Y=et/X,bt=0;if(E.remeasure&&vt>0){const ht=M.measureText(_t).width*1e3/H*X;if(vt<ht&&this.isFontSubpixelAAEnabled){const w=vt/ht;ft=!0,M.save(),M.scale(w,1),Y/=w}else vt!==ht&&(Y+=(vt-ht)/2e3*H/X)}if(this.contentVisible&&(ut.isInFont||E.missingFile)){if(nt&&!Tt)M.fillText(_t,Y,bt);else if(this.paintChar(_t,Y,bt,K),Tt){const ht=Y+H*Tt.offset.x/X,w=bt-H*Tt.offset.y/X;this.paintChar(Tt.fontChar,ht,w,K)}}let Ft;m?Ft=vt*G-Et*O:Ft=vt*G+Et*O,et+=Ft,ft&&M.restore()}m?p.y-=et:p.x+=et*t,M.restore(),this.compose()}showType3Text(d){const p=this.ctx,E=this.current,H=E.font,M=E.fontSize,X=E.fontDirection,U=H.vertical?1:-1,F=E.charSpacing,O=E.wordSpacing,t=E.textHScale*X,i=E.fontMatrix||c.FONT_IDENTITY_MATRIX,m=d.length,S=E.textRenderingMode===c.TextRenderingMode.INVISIBLE;let C,G,nt,K;if(!(S||M===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,p.save(),p.transform(...E.textMatrix),p.translate(E.x,E.y),p.scale(t,X),C=0;C<m;++C){if(G=d[C],typeof G=="number"){K=U*G*M/1e3,this.ctx.translate(K,0),E.x+=K*t;continue}const it=(G.isSpace?O:0)+F,at=H.charProcOperatorList[G.operatorListId];if(!at){(0,c.warn)(`Type3 character "${G.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=G,this.save(),p.scale(M,M),p.transform(...i),this.executeOperatorList(at),this.restore()),nt=c.Util.applyTransform([G.width,0],i)[0]*M+it,p.translate(nt,0),E.x+=nt*t}p.restore(),this.processingType3=null}}setCharWidth(d,p){}setCharWidthAndBounds(d,p,E,H,M,X){this.ctx.rect(E,H,M-E,X-H),this.ctx.clip(),this.endPath()}getColorN_Pattern(d){let p;if(d[0]==="TilingPattern"){const E=d[1],H=this.baseTransform||(0,A.getCurrentTransform)(this.ctx),M={createCanvasGraphics:X=>new yt(X,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};p=new W.TilingPattern(d,E,this.ctx,M,H)}else p=this._getPattern(d[1],d[2]);return p}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(d,p,E){const H=c.Util.makeHexColor(d,p,E);this.ctx.strokeStyle=H,this.current.strokeColor=H}setFillRGBColor(d,p,E){const H=c.Util.makeHexColor(d,p,E);this.ctx.fillStyle=H,this.current.fillColor=H,this.current.patternFill=!1}_getPattern(d,p=null){let E;return this.cachedPatterns.has(d)?E=this.cachedPatterns.get(d):(E=(0,W.getShadingPattern)(this.getObject(d)),this.cachedPatterns.set(d,E)),p&&(E.matrix=p),E}shadingFill(d){if(!this.contentVisible)return;const p=this.ctx;this.save();const E=this._getPattern(d);p.fillStyle=E.getPattern(p,this,(0,A.getCurrentTransformInverse)(p),W.PathType.SHADING);const H=(0,A.getCurrentTransformInverse)(p);if(H){const M=p.canvas,X=M.width,U=M.height,F=c.Util.applyTransform([0,0],H),O=c.Util.applyTransform([0,U],H),t=c.Util.applyTransform([X,0],H),i=c.Util.applyTransform([X,U],H),m=Math.min(F[0],O[0],t[0],i[0]),S=Math.min(F[1],O[1],t[1],i[1]),C=Math.max(F[0],O[0],t[0],i[0]),G=Math.max(F[1],O[1],t[1],i[1]);this.ctx.fillRect(m,S,C-m,G-S)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,c.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,c.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(d,p){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(d)&&d.length===6&&this.transform(...d),this.baseTransform=(0,A.getCurrentTransform)(this.ctx),p)){const E=p[2]-p[0],H=p[3]-p[1];this.ctx.rect(p[0],p[1],E,H),this.current.updateRectMinMax((0,A.getCurrentTransform)(this.ctx),p),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(d){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const p=this.ctx;d.isolated||(0,c.info)("TODO: Support non-isolated groups."),d.knockout&&(0,c.warn)("Knockout groups not supported.");const E=(0,A.getCurrentTransform)(p);if(d.matrix&&p.transform(...d.matrix),!d.bbox)throw new Error("Bounding box is required.");let H=c.Util.getAxialAlignedBoundingBox(d.bbox,(0,A.getCurrentTransform)(p));const M=[0,0,p.canvas.width,p.canvas.height];H=c.Util.intersect(H,M)||[0,0,0,0];const X=Math.floor(H[0]),U=Math.floor(H[1]);let F=Math.max(Math.ceil(H[2])-X,1),O=Math.max(Math.ceil(H[3])-U,1),t=1,i=1;F>_&&(t=F/_,F=_),O>_&&(i=O/_,O=_),this.current.startNewPathAndClipBox([0,0,F,O]);let m="groupAt"+this.groupLevel;d.smask&&(m+="_smask_"+this.smaskCounter++%2);const S=this.cachedCanvases.getCanvas(m,F,O),C=S.context;C.scale(1/t,1/i),C.translate(-X,-U),C.transform(...E),d.smask?this.smaskStack.push({canvas:S.canvas,context:C,offsetX:X,offsetY:U,scaleX:t,scaleY:i,subtype:d.smask.subtype,backdrop:d.smask.backdrop,transferMap:d.smask.transferMap||null,startTransformInverse:null}):(p.setTransform(1,0,0,1,0,0),p.translate(X,U),p.scale(t,i),p.save()),o(p,C),this.ctx=C,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(p),this.groupLevel++}endGroup(d){if(!this.contentVisible)return;this.groupLevel--;const p=this.ctx,E=this.groupStack.pop();if(this.ctx=E,this.ctx.imageSmoothingEnabled=!1,d.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const H=(0,A.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...H);const M=c.Util.getAxialAlignedBoundingBox([0,0,p.canvas.width,p.canvas.height],H);this.ctx.drawImage(p.canvas,0,0),this.ctx.restore(),this.compose(M)}}beginAnnotation(d,p,E,H,M){if(st(this,ct,be).call(this),l(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(p)&&p.length===4){const X=p[2]-p[0],U=p[3]-p[1];if(M&&this.annotationCanvasMap){E=E.slice(),E[4]-=p[0],E[5]-=p[1],p=p.slice(),p[0]=p[1]=0,p[2]=X,p[3]=U;const[F,O]=c.Util.singularValueDecompose2dScale((0,A.getCurrentTransform)(this.ctx)),{viewportScale:t}=this,i=Math.ceil(X*this.outputScaleX*t),m=Math.ceil(U*this.outputScaleY*t);this.annotationCanvas=this.canvasFactory.create(i,m);const{canvas:S,context:C}=this.annotationCanvas;this.annotationCanvasMap.set(d,S),this.annotationCanvas.savedCtx=this.ctx,this.ctx=C,this.ctx.save(),this.ctx.setTransform(F,0,0,-O,0,U*O),l(this.ctx)}else l(this.ctx),this.ctx.rect(p[0],p[1],X,U),this.ctx.clip(),this.endPath()}this.current=new P(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...E),this.transform(...H)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),st(this,At,ye).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(d){if(!this.contentVisible)return;const p=d.count;d=this.getObject(d.data,d),d.count=p;const E=this.ctx,H=this.processingType3;if(H&&(H.compiled===void 0&&(H.compiled=v(d)),H.compiled)){H.compiled(E);return}const M=this._createMaskCanvas(d),X=M.canvas;E.save(),E.setTransform(1,0,0,1,0,0),E.drawImage(X,M.offsetX,M.offsetY),E.restore(),this.compose()}paintImageMaskXObjectRepeat(d,p,E=0,H=0,M,X){if(!this.contentVisible)return;d=this.getObject(d.data,d);const U=this.ctx;U.save();const F=(0,A.getCurrentTransform)(U);U.transform(p,E,H,M,0,0);const O=this._createMaskCanvas(d);U.setTransform(1,0,0,1,O.offsetX-F[4],O.offsetY-F[5]);for(let t=0,i=X.length;t<i;t+=2){const m=c.Util.transform(F,[p,E,H,M,X[t],X[t+1]]),[S,C]=c.Util.applyTransform([0,0],m);U.drawImage(O.canvas,S,C)}U.restore(),this.compose()}paintImageMaskXObjectGroup(d){if(!this.contentVisible)return;const p=this.ctx,E=this.current.fillColor,H=this.current.patternFill;for(const M of d){const{data:X,width:U,height:F,transform:O}=M,t=this.cachedCanvases.getCanvas("maskCanvas",U,F),i=t.context;i.save();const m=this.getObject(X,M);e(i,m),i.globalCompositeOperation="source-in",i.fillStyle=H?E.getPattern(i,this,(0,A.getCurrentTransformInverse)(p),W.PathType.FILL):E,i.fillRect(0,0,U,F),i.restore(),p.save(),p.transform(...O),p.scale(1,-1),y(p,t.canvas,0,0,U,F,0,-1,1,1),p.restore()}this.compose()}paintImageXObject(d){if(!this.contentVisible)return;const p=this.getObject(d);if(!p){(0,c.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(p)}paintImageXObjectRepeat(d,p,E,H){if(!this.contentVisible)return;const M=this.getObject(d);if(!M){(0,c.warn)("Dependent image isn't ready yet");return}const X=M.width,U=M.height,F=[];for(let O=0,t=H.length;O<t;O+=2)F.push({transform:[p,0,0,E,H[O],H[O+1]],x:0,y:0,w:X,h:U});this.paintInlineImageXObjectGroup(M,F)}applyTransferMapsToCanvas(d){return this.current.transferMaps!=="none"&&(d.filter=this.current.transferMaps,d.drawImage(d.canvas,0,0),d.filter="none"),d.canvas}applyTransferMapsToBitmap(d){if(this.current.transferMaps==="none")return d.bitmap;const{bitmap:p,width:E,height:H}=d,M=this.cachedCanvases.getCanvas("inlineImage",E,H),X=M.context;return X.filter=this.current.transferMaps,X.drawImage(p,0,0),X.filter="none",M.canvas}paintInlineImageXObject(d){if(!this.contentVisible)return;const p=d.width,E=d.height,H=this.ctx;this.save(),Q.isNodeJS||(H.filter="none"),H.scale(1/p,-1/E);let M;if(d.bitmap)M=this.applyTransferMapsToBitmap(d);else if(typeof HTMLElement=="function"&&d instanceof HTMLElement||!d.data)M=d;else{const F=this.cachedCanvases.getCanvas("inlineImage",p,E).context;g(F,d),M=this.applyTransferMapsToCanvas(F)}const X=this._scaleImage(M,(0,A.getCurrentTransformInverse)(H));H.imageSmoothingEnabled=V((0,A.getCurrentTransform)(H),d.interpolate),y(H,X.img,0,0,X.paintWidth,X.paintHeight,0,-E,p,E),this.compose(),this.restore()}paintInlineImageXObjectGroup(d,p){if(!this.contentVisible)return;const E=this.ctx;let H;if(d.bitmap)H=d.bitmap;else{const M=d.width,X=d.height,F=this.cachedCanvases.getCanvas("inlineImage",M,X).context;g(F,d),H=this.applyTransferMapsToCanvas(F)}for(const M of p)E.save(),E.transform(...M.transform),E.scale(1,-1),y(E,H,M.x,M.y,M.w,M.h,0,-1,1,1),E.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(d){}markPointProps(d,p){}beginMarkedContent(d){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(d,p){d==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(p)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(d){const p=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(d);const E=this.ctx;this.pendingClip&&(p||(this.pendingClip===dt?E.clip("evenodd"):E.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),E.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const d=(0,A.getCurrentTransform)(this.ctx);if(d[1]===0&&d[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(d[0]),Math.abs(d[3]));else{const p=Math.abs(d[0]*d[3]-d[2]*d[1]),E=Math.hypot(d[0],d[2]),H=Math.hypot(d[1],d[3]);this._cachedGetSinglePixelWidth=Math.max(E,H)/p}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:d}=this.current,p=(0,A.getCurrentTransform)(this.ctx);let E,H;if(p[1]===0&&p[2]===0){const M=Math.abs(p[0]),X=Math.abs(p[3]);if(d===0)E=1/M,H=1/X;else{const U=M*d,F=X*d;E=U<1?1/U:1,H=F<1?1/F:1}}else{const M=Math.abs(p[0]*p[3]-p[2]*p[1]),X=Math.hypot(p[0],p[1]),U=Math.hypot(p[2],p[3]);if(d===0)E=U/M,H=X/M;else{const F=d*M;E=U>F?U/F:1,H=X>F?X/F:1}}this._cachedScaleForStroking=[E,H]}return this._cachedScaleForStroking}rescaleAndStroke(d){const{ctx:p}=this,{lineWidth:E}=this.current,[H,M]=this.getScaleForStroking();if(p.lineWidth=E||1,H===1&&M===1){p.stroke();return}let X,U,F;d&&(X=(0,A.getCurrentTransform)(p),U=p.getLineDash().slice(),F=p.lineDashOffset),p.scale(H,M);const O=Math.max(H,M);p.setLineDash(p.getLineDash().map(t=>t/O)),p.lineDashOffset/=O,p.stroke(),d&&(p.setTransform(...X),p.setLineDash(U),p.lineDashOffset=F)}isContentVisible(){for(let d=this.markedContentStack.length-1;d>=0;d--)if(!this.markedContentStack[d].visible)return!1;return!0}};ct=new WeakSet,be=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},At=new WeakSet,ye=function(){if(this.pageColors){const d=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(d!=="none"){const p=this.ctx.filter;this.ctx.filter=d,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=p}}};let ot=yt;r.CanvasGraphics=ot;for(const $ in c.OPS)ot.prototype[$]!==void 0&&(ot.prototype[c.OPS[$]]=ot.prototype[$])},(N,r,j)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TilingPattern=r.PathType=void 0,r.getShadingPattern=x;var c=j(1),A=j(6);const W={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};r.PathType=W;function q(y,v){if(!v)return;const P=v[2]-v[0],g=v[3]-v[1],e=new Path2D;e.rect(v[0],v[1],P,g),y.clip(e)}class Q{constructor(){this.constructor===Q&&(0,c.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,c.unreachable)("Abstract method `getPattern` called.")}}class L extends Q{constructor(v){super(),this._type=v[1],this._bbox=v[2],this._colorStops=v[3],this._p0=v[4],this._p1=v[5],this._r0=v[6],this._r1=v[7],this.matrix=null}_createGradient(v){let P;this._type==="axial"?P=v.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(P=v.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const g of this._colorStops)P.addColorStop(g[0],g[1]);return P}getPattern(v,P,g,e){let o;if(e===W.STROKE||e===W.FILL){const l=P.current.getClippedPathBoundingBox(e,(0,A.getCurrentTransform)(v))||[0,0,0,0],s=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,R=P.cachedCanvases.getCanvas("pattern",s,h,!0),n=R.context;n.clearRect(0,0,n.canvas.width,n.canvas.height),n.beginPath(),n.rect(0,0,n.canvas.width,n.canvas.height),n.translate(-l[0],-l[1]),g=c.Util.transform(g,[1,0,0,1,l[0],l[1]]),n.transform(...P.baseTransform),this.matrix&&n.transform(...this.matrix),q(n,this._bbox),n.fillStyle=this._createGradient(n),n.fill(),o=v.createPattern(R.canvas,"no-repeat");const B=new DOMMatrix(g);o.setTransform(B)}else q(v,this._bbox),o=this._createGradient(v);return o}}function k(y,v,P,g,e,o,l,s){const h=v.coords,R=v.colors,n=y.data,B=y.width*4;let V;h[P+1]>h[g+1]&&(V=P,P=g,g=V,V=o,o=l,l=V),h[g+1]>h[e+1]&&(V=g,g=e,e=V,V=l,l=s,s=V),h[P+1]>h[g+1]&&(V=P,P=g,g=V,V=o,o=l,l=V);const z=(h[P]+v.offsetX)*v.scaleX,J=(h[P+1]+v.offsetY)*v.scaleY,tt=(h[g]+v.offsetX)*v.scaleX,dt=(h[g+1]+v.offsetY)*v.scaleY,ot=(h[e]+v.offsetX)*v.scaleX,ct=(h[e+1]+v.offsetY)*v.scaleY;if(J>=ct)return;const gt=R[o],At=R[o+1],St=R[o+2],yt=R[l],$=R[l+1],d=R[l+2],p=R[s],E=R[s+1],H=R[s+2],M=Math.round(J),X=Math.round(ct);let U,F,O,t,i,m,S,C;for(let G=M;G<=X;G++){if(G<dt){let et;G<J?et=0:et=(J-G)/(J-dt),U=z-(z-tt)*et,F=gt-(gt-yt)*et,O=At-(At-$)*et,t=St-(St-d)*et}else{let et;G>ct?et=1:dt===ct?et=0:et=(dt-G)/(dt-ct),U=tt-(tt-ot)*et,F=yt-(yt-p)*et,O=$-($-E)*et,t=d-(d-H)*et}let nt;G<J?nt=0:G>ct?nt=1:nt=(J-G)/(J-ct),i=z-(z-ot)*nt,m=gt-(gt-p)*nt,S=At-(At-E)*nt,C=St-(St-H)*nt;const K=Math.round(Math.min(U,i)),it=Math.round(Math.max(U,i));let at=B*G+K*4;for(let et=K;et<=it;et++)nt=(U-et)/(U-i),nt<0?nt=0:nt>1&&(nt=1),n[at++]=F-(F-m)*nt|0,n[at++]=O-(O-S)*nt|0,n[at++]=t-(t-C)*nt|0,n[at++]=255}}function _(y,v,P){const g=v.coords,e=v.colors;let o,l;switch(v.type){case"lattice":const s=v.verticesPerRow,h=Math.floor(g.length/s)-1,R=s-1;for(o=0;o<h;o++){let n=o*s;for(let B=0;B<R;B++,n++)k(y,P,g[n],g[n+1],g[n+s],e[n],e[n+1],e[n+s]),k(y,P,g[n+s+1],g[n+1],g[n+s],e[n+s+1],e[n+1],e[n+s])}break;case"triangles":for(o=0,l=g.length;o<l;o+=3)k(y,P,g[o],g[o+1],g[o+2],e[o],e[o+1],e[o+2]);break;default:throw new Error("illegal figure")}}class I extends Q{constructor(v){super(),this._coords=v[2],this._colors=v[3],this._figures=v[4],this._bounds=v[5],this._bbox=v[7],this._background=v[8],this.matrix=null}_createMeshCanvas(v,P,g){const s=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),R=Math.ceil(this._bounds[2])-s,n=Math.ceil(this._bounds[3])-h,B=Math.min(Math.ceil(Math.abs(R*v[0]*1.1)),3e3),V=Math.min(Math.ceil(Math.abs(n*v[1]*1.1)),3e3),z=R/B,J=n/V,tt={coords:this._coords,colors:this._colors,offsetX:-s,offsetY:-h,scaleX:1/z,scaleY:1/J},dt=B+2*2,ot=V+2*2,ct=g.getCanvas("mesh",dt,ot,!1),gt=ct.context,At=gt.createImageData(B,V);if(P){const yt=At.data;for(let $=0,d=yt.length;$<d;$+=4)yt[$]=P[0],yt[$+1]=P[1],yt[$+2]=P[2],yt[$+3]=255}for(const yt of this._figures)_(At,yt,tt);return gt.putImageData(At,2,2),{canvas:ct.canvas,offsetX:s-2*z,offsetY:h-2*J,scaleX:z,scaleY:J}}getPattern(v,P,g,e){q(v,this._bbox);let o;if(e===W.SHADING)o=c.Util.singularValueDecompose2dScale((0,A.getCurrentTransform)(v));else if(o=c.Util.singularValueDecompose2dScale(P.baseTransform),this.matrix){const s=c.Util.singularValueDecompose2dScale(this.matrix);o=[o[0]*s[0],o[1]*s[1]]}const l=this._createMeshCanvas(o,e===W.SHADING?null:this._background,P.cachedCanvases);return e!==W.SHADING&&(v.setTransform(...P.baseTransform),this.matrix&&v.transform(...this.matrix)),v.translate(l.offsetX,l.offsetY),v.scale(l.scaleX,l.scaleY),v.createPattern(l.canvas,"no-repeat")}}class T extends Q{getPattern(){return"hotpink"}}function x(y){switch(y[0]){case"RadialAxial":return new L(y);case"Mesh":return new I(y);case"Dummy":return new T}throw new Error(`Unknown IR type: ${y[0]}`)}const f={COLORED:1,UNCOLORED:2},a=class a{constructor(v,P,g,e,o){this.operatorList=v[2],this.matrix=v[3]||[1,0,0,1,0,0],this.bbox=v[4],this.xstep=v[5],this.ystep=v[6],this.paintType=v[7],this.tilingType=v[8],this.color=P,this.ctx=g,this.canvasGraphicsFactory=e,this.baseTransform=o}createPatternCanvas(v){const P=this.operatorList,g=this.bbox,e=this.xstep,o=this.ystep,l=this.paintType,s=this.tilingType,h=this.color,R=this.canvasGraphicsFactory;(0,c.info)("TilingType: "+s);const n=g[0],B=g[1],V=g[2],z=g[3],J=c.Util.singularValueDecompose2dScale(this.matrix),tt=c.Util.singularValueDecompose2dScale(this.baseTransform),dt=[J[0]*tt[0],J[1]*tt[1]],ot=this.getSizeAndScale(e,this.ctx.canvas.width,dt[0]),ct=this.getSizeAndScale(o,this.ctx.canvas.height,dt[1]),gt=v.cachedCanvases.getCanvas("pattern",ot.size,ct.size,!0),At=gt.context,St=R.createCanvasGraphics(At);St.groupLevel=v.groupLevel,this.setFillAndStrokeStyleToContext(St,l,h);let yt=n,$=B,d=V,p=z;return n<0&&(yt=0,d+=Math.abs(n)),B<0&&($=0,p+=Math.abs(B)),At.translate(-(ot.scale*yt),-(ct.scale*$)),St.transform(ot.scale,0,0,ct.scale,0,0),At.save(),this.clipBbox(St,yt,$,d,p),St.baseTransform=(0,A.getCurrentTransform)(St.ctx),St.executeOperatorList(P),St.endDrawing(),{canvas:gt.canvas,scaleX:ot.scale,scaleY:ct.scale,offsetX:yt,offsetY:$}}getSizeAndScale(v,P,g){v=Math.abs(v);const e=Math.max(a.MAX_PATTERN_SIZE,P);let o=Math.ceil(v*g);return o>=e?o=e:g=o/v,{scale:g,size:o}}clipBbox(v,P,g,e,o){const l=e-P,s=o-g;v.ctx.rect(P,g,l,s),v.current.updateRectMinMax((0,A.getCurrentTransform)(v.ctx),[P,g,e,o]),v.clip(),v.endPath()}setFillAndStrokeStyleToContext(v,P,g){const e=v.ctx,o=v.current;switch(P){case f.COLORED:const l=this.ctx;e.fillStyle=l.fillStyle,e.strokeStyle=l.strokeStyle,o.fillColor=l.fillStyle,o.strokeColor=l.strokeStyle;break;case f.UNCOLORED:const s=c.Util.makeHexColor(g[0],g[1],g[2]);e.fillStyle=s,e.strokeStyle=s,o.fillColor=s,o.strokeColor=s;break;default:throw new c.FormatError(`Unsupported paint type: ${P}`)}}getPattern(v,P,g,e){let o=g;e!==W.SHADING&&(o=c.Util.transform(o,P.baseTransform),this.matrix&&(o=c.Util.transform(o,this.matrix)));const l=this.createPatternCanvas(P);let s=new DOMMatrix(o);s=s.translate(l.offsetX,l.offsetY),s=s.scale(1/l.scaleX,1/l.scaleY);const h=v.createPattern(l.canvas,"repeat");return h.setTransform(s),h}};Dt(a,"MAX_PATTERN_SIZE",3e3);let u=a;r.TilingPattern=u},(N,r,j)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.convertBlackAndWhiteToRGBA=W,r.convertToRGBA=A,r.grayToRGBA=Q;var c=j(1);function A(L){switch(L.kind){case c.ImageKind.GRAYSCALE_1BPP:return W(L);case c.ImageKind.RGB_24BPP:return q(L)}return null}function W({src:L,srcPos:k=0,dest:_,width:I,height:T,nonBlackColor:x=4294967295,inverseDecode:f=!1}){const u=c.FeatureTest.isLittleEndian?4278190080:255,[a,y]=f?[x,u]:[u,x],v=I>>3,P=I&7,g=L.length;_=new Uint32Array(_.buffer);let e=0;for(let o=0;o<T;o++){for(const s=k+v;k<s;k++){const h=k<g?L[k]:255;_[e++]=h&128?y:a,_[e++]=h&64?y:a,_[e++]=h&32?y:a,_[e++]=h&16?y:a,_[e++]=h&8?y:a,_[e++]=h&4?y:a,_[e++]=h&2?y:a,_[e++]=h&1?y:a}if(P===0)continue;const l=k<g?L[k++]:255;for(let s=0;s<P;s++)_[e++]=l&1<<7-s?y:a}return{srcPos:k,destPos:e}}function q({src:L,srcPos:k=0,dest:_,destPos:I=0,width:T,height:x}){let f=0;const u=L.length>>2,a=new Uint32Array(L.buffer,k,u);if(c.FeatureTest.isLittleEndian){for(;f<u-2;f+=3,I+=4){const y=a[f],v=a[f+1],P=a[f+2];_[I]=y|4278190080,_[I+1]=y>>>24|v<<8|4278190080,_[I+2]=v>>>16|P<<16|4278190080,_[I+3]=P>>>8|4278190080}for(let y=f*4,v=L.length;y<v;y+=3)_[I++]=L[y]|L[y+1]<<8|L[y+2]<<16|4278190080}else{for(;f<u-2;f+=3,I+=4){const y=a[f],v=a[f+1],P=a[f+2];_[I]=y|255,_[I+1]=y<<24|v>>>8|255,_[I+2]=v<<16|P>>>16|255,_[I+3]=P<<8|255}for(let y=f*4,v=L.length;y<v;y+=3)_[I++]=L[y]<<24|L[y+1]<<16|L[y+2]<<8|255}return{srcPos:k,destPos:I}}function Q(L,k){if(c.FeatureTest.isLittleEndian)for(let _=0,I=L.length;_<I;_++)k[_]=L[_]*65793|4278190080;else for(let _=0,I=L.length;_<I;_++)k[_]=L[_]*16843008|255}},(N,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.GlobalWorkerOptions=void 0;const j=Object.create(null);r.GlobalWorkerOptions=j,j.workerPort=null,j.workerSrc=""},(N,r,j)=>{var L,We,_,He,T,ae;Object.defineProperty(r,"__esModule",{value:!0}),r.MessageHandler=void 0;var c=j(1);const A={UNKNOWN:0,DATA:1,ERROR:2},W={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function q(f){switch(f instanceof Error||typeof f=="object"&&f!==null||(0,c.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),f.name){case"AbortException":return new c.AbortException(f.message);case"MissingPDFException":return new c.MissingPDFException(f.message);case"PasswordException":return new c.PasswordException(f.message,f.code);case"UnexpectedResponseException":return new c.UnexpectedResponseException(f.message,f.status);case"UnknownErrorException":return new c.UnknownErrorException(f.message,f.details);default:return new c.UnknownErrorException(f.message,f.toString())}}class Q{constructor(u,a,y){Z(this,L);Z(this,_);Z(this,T);this.sourceName=u,this.targetName=a,this.comObj=y,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=v=>{const P=v.data;if(P.targetName!==this.sourceName)return;if(P.stream){st(this,_,He).call(this,P);return}if(P.callback){const e=P.callbackId,o=this.callbackCapabilities[e];if(!o)throw new Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],P.callback===A.DATA)o.resolve(P.data);else if(P.callback===A.ERROR)o.reject(q(P.reason));else throw new Error("Unexpected callback case");return}const g=this.actionHandler[P.action];if(!g)throw new Error(`Unknown action from worker: ${P.action}`);if(P.callbackId){const e=this.sourceName,o=P.sourceName;new Promise(function(l){l(g(P.data))}).then(function(l){y.postMessage({sourceName:e,targetName:o,callback:A.DATA,callbackId:P.callbackId,data:l})},function(l){y.postMessage({sourceName:e,targetName:o,callback:A.ERROR,callbackId:P.callbackId,reason:q(l)})});return}if(P.streamId){st(this,L,We).call(this,P);return}g(P.data)},y.addEventListener("message",this._onComObjOnMessage)}on(u,a){const y=this.actionHandler;if(y[u])throw new Error(`There is already an actionName called "${u}"`);y[u]=a}send(u,a,y){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,data:a},y)}sendWithPromise(u,a,y){const v=this.callbackId++,P=new c.PromiseCapability;this.callbackCapabilities[v]=P;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,callbackId:v,data:a},y)}catch(g){P.reject(g)}return P.promise}sendWithStream(u,a,y,v){const P=this.streamId++,g=this.sourceName,e=this.targetName,o=this.comObj;return new ReadableStream({start:l=>{const s=new c.PromiseCapability;return this.streamControllers[P]={controller:l,startCall:s,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:g,targetName:e,action:u,streamId:P,data:a,desiredSize:l.desiredSize},v),s.promise},pull:l=>{const s=new c.PromiseCapability;return this.streamControllers[P].pullCall=s,o.postMessage({sourceName:g,targetName:e,stream:W.PULL,streamId:P,desiredSize:l.desiredSize}),s.promise},cancel:l=>{(0,c.assert)(l instanceof Error,"cancel must have a valid reason");const s=new c.PromiseCapability;return this.streamControllers[P].cancelCall=s,this.streamControllers[P].isClosed=!0,o.postMessage({sourceName:g,targetName:e,stream:W.CANCEL,streamId:P,reason:q(l)}),s.promise}},y)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}L=new WeakSet,We=function(u){const a=u.streamId,y=this.sourceName,v=u.sourceName,P=this.comObj,g=this,e=this.actionHandler[u.action],o={enqueue(l,s=1,h){if(this.isCancelled)return;const R=this.desiredSize;this.desiredSize-=s,R>0&&this.desiredSize<=0&&(this.sinkCapability=new c.PromiseCapability,this.ready=this.sinkCapability.promise),P.postMessage({sourceName:y,targetName:v,stream:W.ENQUEUE,streamId:a,chunk:l},h)},close(){this.isCancelled||(this.isCancelled=!0,P.postMessage({sourceName:y,targetName:v,stream:W.CLOSE,streamId:a}),delete g.streamSinks[a])},error(l){(0,c.assert)(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,P.postMessage({sourceName:y,targetName:v,stream:W.ERROR,streamId:a,reason:q(l)}))},sinkCapability:new c.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:u.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[a]=o,new Promise(function(l){l(e(u.data,o))}).then(function(){P.postMessage({sourceName:y,targetName:v,stream:W.START_COMPLETE,streamId:a,success:!0})},function(l){P.postMessage({sourceName:y,targetName:v,stream:W.START_COMPLETE,streamId:a,reason:q(l)})})},_=new WeakSet,He=function(u){const a=u.streamId,y=this.sourceName,v=u.sourceName,P=this.comObj,g=this.streamControllers[a],e=this.streamSinks[a];switch(u.stream){case W.START_COMPLETE:u.success?g.startCall.resolve():g.startCall.reject(q(u.reason));break;case W.PULL_COMPLETE:u.success?g.pullCall.resolve():g.pullCall.reject(q(u.reason));break;case W.PULL:if(!e){P.postMessage({sourceName:y,targetName:v,stream:W.PULL_COMPLETE,streamId:a,success:!0});break}e.desiredSize<=0&&u.desiredSize>0&&e.sinkCapability.resolve(),e.desiredSize=u.desiredSize,new Promise(function(o){var l;o((l=e.onPull)==null?void 0:l.call(e))}).then(function(){P.postMessage({sourceName:y,targetName:v,stream:W.PULL_COMPLETE,streamId:a,success:!0})},function(o){P.postMessage({sourceName:y,targetName:v,stream:W.PULL_COMPLETE,streamId:a,reason:q(o)})});break;case W.ENQUEUE:if((0,c.assert)(g,"enqueue should have stream controller"),g.isClosed)break;g.controller.enqueue(u.chunk);break;case W.CLOSE:if((0,c.assert)(g,"close should have stream controller"),g.isClosed)break;g.isClosed=!0,g.controller.close(),st(this,T,ae).call(this,g,a);break;case W.ERROR:(0,c.assert)(g,"error should have stream controller"),g.controller.error(q(u.reason)),st(this,T,ae).call(this,g,a);break;case W.CANCEL_COMPLETE:u.success?g.cancelCall.resolve():g.cancelCall.reject(q(u.reason)),st(this,T,ae).call(this,g,a);break;case W.CANCEL:if(!e)break;new Promise(function(o){var l;o((l=e.onCancel)==null?void 0:l.call(e,q(u.reason)))}).then(function(){P.postMessage({sourceName:y,targetName:v,stream:W.CANCEL_COMPLETE,streamId:a,success:!0})},function(o){P.postMessage({sourceName:y,targetName:v,stream:W.CANCEL_COMPLETE,streamId:a,reason:q(o)})}),e.sinkCapability.reject(q(u.reason)),e.isCancelled=!0,delete this.streamSinks[a];break;default:throw new Error("Unexpected stream case")}},T=new WeakSet,ae=async function(u,a){var y,v,P;await Promise.allSettled([(y=u.startCall)==null?void 0:y.promise,(v=u.pullCall)==null?void 0:v.promise,(P=u.cancelCall)==null?void 0:P.promise]),delete this.streamControllers[a]},r.MessageHandler=Q},(N,r,j)=>{var W,q;Object.defineProperty(r,"__esModule",{value:!0}),r.Metadata=void 0;var c=j(1);class A{constructor({parsedData:L,rawData:k}){Z(this,W,void 0);Z(this,q,void 0);pt(this,W,L),pt(this,q,k)}getRaw(){return b(this,q)}get(L){return b(this,W).get(L)??null}getAll(){return(0,c.objectFromMap)(b(this,W))}has(L){return b(this,W).has(L)}}W=new WeakMap,q=new WeakMap,r.Metadata=A},(N,r,j)=>{var L,k,_,I,T,x,Ae;Object.defineProperty(r,"__esModule",{value:!0}),r.OptionalContentConfig=void 0;var c=j(1),A=j(8);const W=Symbol("INTERNAL");class q{constructor(a,y){Z(this,L,!0);this.name=a,this.intent=y}get visible(){return b(this,L)}_setVisible(a,y){a!==W&&(0,c.unreachable)("Internal method `_setVisible` called."),pt(this,L,y)}}L=new WeakMap;class Q{constructor(a){Z(this,x);Z(this,k,null);Z(this,_,new Map);Z(this,I,null);Z(this,T,null);if(this.name=null,this.creator=null,a!==null){this.name=a.name,this.creator=a.creator,pt(this,T,a.order);for(const y of a.groups)b(this,_).set(y.id,new q(y.name,y.intent));if(a.baseState==="OFF")for(const y of b(this,_).values())y._setVisible(W,!1);for(const y of a.on)b(this,_).get(y)._setVisible(W,!0);for(const y of a.off)b(this,_).get(y)._setVisible(W,!1);pt(this,I,this.getHash())}}isVisible(a){if(b(this,_).size===0)return!0;if(!a)return(0,c.warn)("Optional content group not defined."),!0;if(a.type==="OCG")return b(this,_).has(a.id)?b(this,_).get(a.id).visible:((0,c.warn)(`Optional content group not found: ${a.id}`),!0);if(a.type==="OCMD"){if(a.expression)return st(this,x,Ae).call(this,a.expression);if(!a.policy||a.policy==="AnyOn"){for(const y of a.ids){if(!b(this,_).has(y))return(0,c.warn)(`Optional content group not found: ${y}`),!0;if(b(this,_).get(y).visible)return!0}return!1}else if(a.policy==="AllOn"){for(const y of a.ids){if(!b(this,_).has(y))return(0,c.warn)(`Optional content group not found: ${y}`),!0;if(!b(this,_).get(y).visible)return!1}return!0}else if(a.policy==="AnyOff"){for(const y of a.ids){if(!b(this,_).has(y))return(0,c.warn)(`Optional content group not found: ${y}`),!0;if(!b(this,_).get(y).visible)return!0}return!1}else if(a.policy==="AllOff"){for(const y of a.ids){if(!b(this,_).has(y))return(0,c.warn)(`Optional content group not found: ${y}`),!0;if(b(this,_).get(y).visible)return!1}return!0}return(0,c.warn)(`Unknown optional content policy ${a.policy}.`),!0}return(0,c.warn)(`Unknown group type ${a.type}.`),!0}setVisibility(a,y=!0){if(!b(this,_).has(a)){(0,c.warn)(`Optional content group not found: ${a}`);return}b(this,_).get(a)._setVisible(W,!!y),pt(this,k,null)}get hasInitialVisibility(){return this.getHash()===b(this,I)}getOrder(){return b(this,_).size?b(this,T)?b(this,T).slice():[...b(this,_).keys()]:null}getGroups(){return b(this,_).size>0?(0,c.objectFromMap)(b(this,_)):null}getGroup(a){return b(this,_).get(a)||null}getHash(){if(b(this,k)!==null)return b(this,k);const a=new A.MurmurHash3_64;for(const[y,v]of b(this,_))a.update(`${y}:${v.visible}`);return pt(this,k,a.hexdigest())}}k=new WeakMap,_=new WeakMap,I=new WeakMap,T=new WeakMap,x=new WeakSet,Ae=function(a){const y=a.length;if(y<2)return!0;const v=a[0];for(let P=1;P<y;P++){const g=a[P];let e;if(Array.isArray(g))e=st(this,x,Ae).call(this,g);else if(b(this,_).has(g))e=b(this,_).get(g).visible;else return(0,c.warn)(`Optional content group not found: ${g}`),!0;switch(v){case"And":if(!e)return!1;break;case"Or":if(e)return!0;break;case"Not":return!e;default:return!0}}return v==="And"},r.OptionalContentConfig=Q},(N,r,j)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFDataTransportStream=void 0;var c=j(1),A=j(6);class W{constructor({length:k,initialData:_,progressiveDone:I=!1,contentDispositionFilename:T=null,disableRange:x=!1,disableStream:f=!1},u){if((0,c.assert)(u,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=I,this._contentDispositionFilename=T,(_==null?void 0:_.length)>0){const a=_ instanceof Uint8Array&&_.byteLength===_.buffer.byteLength?_.buffer:new Uint8Array(_).buffer;this._queuedChunks.push(a)}this._pdfDataRangeTransport=u,this._isStreamingSupported=!f,this._isRangeSupported=!x,this._contentLength=k,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((a,y)=>{this._onReceiveData({begin:a,chunk:y})}),this._pdfDataRangeTransport.addProgressListener((a,y)=>{this._onProgress({loaded:a,total:y})}),this._pdfDataRangeTransport.addProgressiveReadListener(a=>{this._onReceiveData({chunk:a})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:k,chunk:_}){const I=_ instanceof Uint8Array&&_.byteLength===_.buffer.byteLength?_.buffer:new Uint8Array(_).buffer;if(k===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(I):this._queuedChunks.push(I);else{const T=this._rangeReaders.some(function(x){return x._begin!==k?!1:(x._enqueue(I),!0)});(0,c.assert)(T,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var k;return((k=this._fullRequestReader)==null?void 0:k._loaded)??0}_onProgress(k){var _,I,T,x;k.total===void 0?(I=(_=this._rangeReaders[0])==null?void 0:_.onProgress)==null||I.call(_,{loaded:k.loaded}):(x=(T=this._fullRequestReader)==null?void 0:T.onProgress)==null||x.call(T,{loaded:k.loaded,total:k.total})}_onProgressiveDone(){var k;(k=this._fullRequestReader)==null||k.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(k){const _=this._rangeReaders.indexOf(k);_>=0&&this._rangeReaders.splice(_,1)}getFullReader(){(0,c.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const k=this._queuedChunks;return this._queuedChunks=null,new q(this,k,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(k,_){if(_<=this._progressiveDataLength)return null;const I=new Q(this,k,_);return this._pdfDataRangeTransport.requestDataRange(k,_),this._rangeReaders.push(I),I}cancelAllRequests(k){var _;(_=this._fullRequestReader)==null||_.cancel(k);for(const I of this._rangeReaders.slice(0))I.cancel(k);this._pdfDataRangeTransport.abort()}}r.PDFDataTransportStream=W;class q{constructor(k,_,I=!1,T=null){this._stream=k,this._done=I||!1,this._filename=(0,A.isPdfFile)(T)?T:null,this._queuedChunks=_||[],this._loaded=0;for(const x of this._queuedChunks)this._loaded+=x.byteLength;this._requests=[],this._headersReady=Promise.resolve(),k._fullRequestReader=this,this.onProgress=null}_enqueue(k){this._done||(this._requests.length>0?this._requests.shift().resolve({value:k,done:!1}):this._queuedChunks.push(k),this._loaded+=k.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const k=new c.PromiseCapability;return this._requests.push(k),k.promise}cancel(k){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Q{constructor(k,_,I){this._stream=k,this._begin=_,this._end=I,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(k){if(!this._done){if(this._requests.length===0)this._queuedChunk=k;else{this._requests.shift().resolve({value:k,done:!1});for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const _=this._queuedChunk;return this._queuedChunk=null,{value:_,done:!1}}if(this._done)return{value:void 0,done:!0};const k=new c.PromiseCapability;return this._requests.push(k),k.promise}cancel(k){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(N,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.XfaText=void 0;class j{static textContent(A){const W=[],q={items:W,styles:Object.create(null)};function Q(L){var I;if(!L)return;let k=null;const _=L.name;if(_==="#text")k=L.value;else if(j.shouldBuildText(_))(I=L==null?void 0:L.attributes)!=null&&I.textContent?k=L.attributes.textContent:L.value&&(k=L.value);else return;if(k!==null&&W.push({str:k}),!!L.children)for(const T of L.children)Q(T)}return Q(A),q}static shouldBuildText(A){return!(A==="textarea"||A==="input"||A==="option"||A==="select")}}r.XfaText=j},(N,r,j)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.NodeStandardFontDataFactory=r.NodeFilterFactory=r.NodeCanvasFactory=r.NodeCMapReaderFactory=void 0;var c=j(7);const A=function(k){return new Promise((_,I)=>{require$$5.readFile(k,(x,f)=>{if(x||!f){I(new Error(x));return}_(new Uint8Array(f))})})};class W extends c.BaseFilterFactory{}r.NodeFilterFactory=W;class q extends c.BaseCanvasFactory{_createCanvas(_,I){return require$$5.createCanvas(_,I)}}r.NodeCanvasFactory=q;class Q extends c.BaseCMapReaderFactory{_fetchData(_,I){return A(_).then(T=>({cMapData:T,compressionType:I}))}}r.NodeCMapReaderFactory=Q;class L extends c.BaseStandardFontDataFactory{_fetchData(_){return A(_)}}r.NodeStandardFontDataFactory=L},(N,r,j)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNodeStream=void 0;var c=j(1),A=j(22);const W=require$$5,q=require$$5,Q=require$$5,L=require$$5,k=/^file:\/\/\/[a-zA-Z]:\//;function _(P){const g=L.parse(P);return g.protocol==="file:"||g.host?g:/^[a-z]:[/\\]/i.test(P)?L.parse(`file:///${P}`):(g.host||(g.protocol="file:"),g)}class I{constructor(g){this.source=g,this.url=_(g.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&g.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}getFullReader(){return(0,c.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new y(this):new u(this),this._fullRequestReader}getRangeReader(g,e){if(e<=this._progressiveDataLength)return null;const o=this.isFsUrl?new v(this,g,e):new a(this,g,e);return this._rangeRequestReaders.push(o),o}cancelAllRequests(g){var e;(e=this._fullRequestReader)==null||e.cancel(g);for(const o of this._rangeRequestReaders.slice(0))o.cancel(g)}}r.PDFNodeStream=I;class T{constructor(g){this._url=g.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=g.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=new c.PromiseCapability,this._headersCapability=new c.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var o;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const g=this._readableStream.read();return g===null?(this._readCapability=new c.PromiseCapability,this.read()):(this._loaded+=g.length,(o=this.onProgress)==null||o.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){if(!this._readableStream){this._error(g);return}this._readableStream.destroy(g)}_error(g){this._storedError=g,this._readCapability.resolve()}_setReadableStream(g){this._readableStream=g,g.on("readable",()=>{this._readCapability.resolve()}),g.on("end",()=>{g.destroy(),this._done=!0,this._readCapability.resolve()}),g.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new c.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class x{constructor(g){this._url=g.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new c.PromiseCapability;const e=g.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var o;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const g=this._readableStream.read();return g===null?(this._readCapability=new c.PromiseCapability,this.read()):(this._loaded+=g.length,(o=this.onProgress)==null||o.call(this,{loaded:this._loaded}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){if(!this._readableStream){this._error(g);return}this._readableStream.destroy(g)}_error(g){this._storedError=g,this._readCapability.resolve()}_setReadableStream(g){this._readableStream=g,g.on("readable",()=>{this._readCapability.resolve()}),g.on("end",()=>{g.destroy(),this._done=!0,this._readCapability.resolve()}),g.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function f(P,g){return{protocol:P.protocol,auth:P.auth,host:P.hostname,port:P.port,path:P.path,method:"GET",headers:g}}class u extends T{constructor(g){super(g);const e=o=>{if(o.statusCode===404){const R=new c.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=R,this._headersCapability.reject(R);return}this._headersCapability.resolve(),this._setReadableStream(o);const l=R=>this._readableStream.headers[R.toLowerCase()],{allowRangeRequests:s,suggestedLength:h}=(0,A.validateRangeRequestCapabilities)({getResponseHeader:l,isHttp:g.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=h||this._contentLength,this._filename=(0,A.extractFilenameFromHeader)(l)};this._request=null,this._url.protocol==="http:"?this._request=q.request(f(this._url,g.httpHeaders),e):this._request=Q.request(f(this._url,g.httpHeaders),e),this._request.on("error",o=>{this._storedError=o,this._headersCapability.reject(o)}),this._request.end()}}class a extends x{constructor(g,e,o){super(g),this._httpHeaders={};for(const s in g.httpHeaders){const h=g.httpHeaders[s];h!==void 0&&(this._httpHeaders[s]=h)}this._httpHeaders.Range=`bytes=${e}-${o-1}`;const l=s=>{if(s.statusCode===404){const h=new c.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=h;return}this._setReadableStream(s)};this._request=null,this._url.protocol==="http:"?this._request=q.request(f(this._url,this._httpHeaders),l):this._request=Q.request(f(this._url,this._httpHeaders),l),this._request.on("error",s=>{this._storedError=s}),this._request.end()}}class y extends T{constructor(g){super(g);let e=decodeURIComponent(this._url.path);k.test(this._url.href)&&(e=e.replace(/^\//,"")),W.lstat(e,(o,l)=>{if(o){o.code==="ENOENT"&&(o=new c.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=o,this._headersCapability.reject(o);return}this._contentLength=l.size,this._setReadableStream(W.createReadStream(e)),this._headersCapability.resolve()})}}class v extends x{constructor(g,e,o){super(g);let l=decodeURIComponent(this._url.path);k.test(this._url.href)&&(l=l.replace(/^\//,"")),this._setReadableStream(W.createReadStream(l,{start:e,end:o-1}))}}},(N,r,j)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createResponseStatusError=L,r.extractFilenameFromHeader=Q,r.validateRangeRequestCapabilities=q,r.validateResponseStatus=k;var c=j(1),A=j(23),W=j(6);function q({getResponseHeader:_,isHttp:I,rangeChunkSize:T,disableRange:x}){const f={allowRangeRequests:!1,suggestedLength:void 0},u=parseInt(_("Content-Length"),10);return!Number.isInteger(u)||(f.suggestedLength=u,u<=2*T)||x||!I||_("Accept-Ranges")!=="bytes"||(_("Content-Encoding")||"identity")!=="identity"||(f.allowRangeRequests=!0),f}function Q(_){const I=_("Content-Disposition");if(I){let T=(0,A.getFilenameFromContentDispositionHeader)(I);if(T.includes("%"))try{T=decodeURIComponent(T)}catch{}if((0,W.isPdfFile)(T))return T}return null}function L(_,I){return _===404||_===0&&I.startsWith("file:")?new c.MissingPDFException('Missing PDF "'+I+'".'):new c.UnexpectedResponseException(`Unexpected server response (${_}) while retrieving PDF "${I}".`,_)}function k(_){return _===200||_===206}},(N,r,j)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getFilenameFromContentDispositionHeader=A;var c=j(1);function A(W){let q=!0,Q=L("filename\\*","i").exec(W);if(Q){Q=Q[1];let u=T(Q);return u=unescape(u),u=x(u),u=f(u),_(u)}if(Q=I(W),Q){const u=f(Q);return _(u)}if(Q=L("filename","i").exec(W),Q){Q=Q[1];let u=T(Q);return u=f(u),_(u)}function L(u,a){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',a)}function k(u,a){if(u){if(!/^[\x00-\xFF]+$/.test(a))return a;try{const y=new TextDecoder(u,{fatal:!0}),v=(0,c.stringToBytes)(a);a=y.decode(v),q=!1}catch{}}return a}function _(u){return q&&/[\x80-\xff]/.test(u)&&(u=k("utf-8",u),q&&(u=k("iso-8859-1",u))),u}function I(u){const a=[];let y;const v=L("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=v.exec(u))!==null;){let[,g,e,o]=y;if(g=parseInt(g,10),g in a){if(g===0)break;continue}a[g]=[e,o]}const P=[];for(let g=0;g<a.length&&g in a;++g){let[e,o]=a[g];o=T(o),e&&(o=unescape(o),g===0&&(o=x(o))),P.push(o)}return P.join("")}function T(u){if(u.startsWith('"')){const a=u.slice(1).split('\\"');for(let y=0;y<a.length;++y){const v=a[y].indexOf('"');v!==-1&&(a[y]=a[y].slice(0,v),a.length=y+1),a[y]=a[y].replaceAll(/\\(.)/g,"$1")}u=a.join('"')}return u}function x(u){const a=u.indexOf("'");if(a===-1)return u;const y=u.slice(0,a),P=u.slice(a+1).replace(/^[^']*'/,"");return k(y,P)}function f(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(a,y,v,P){if(v==="q"||v==="Q")return P=P.replaceAll("_"," "),P=P.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,e){return String.fromCharCode(parseInt(e,16))}),k(y,P);try{P=atob(P)}catch{}return k(y,P)})}return""}},(N,r,j)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNetworkStream=void 0;var c=j(1),A=j(22);const W=200,q=206;function Q(T){const x=T.response;return typeof x!="string"?x:(0,c.stringToBytes)(x).buffer}class L{constructor(x,f={}){this.url=x,this.isHttp=/^https?:/i.test(x),this.httpHeaders=this.isHttp&&f.httpHeaders||Object.create(null),this.withCredentials=f.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(x,f,u){const a={begin:x,end:f};for(const y in u)a[y]=u[y];return this.request(a)}requestFull(x){return this.request(x)}request(x){const f=new XMLHttpRequest,u=this.currXhrId++,a=this.pendingRequests[u]={xhr:f};f.open("GET",this.url),f.withCredentials=this.withCredentials;for(const y in this.httpHeaders){const v=this.httpHeaders[y];v!==void 0&&f.setRequestHeader(y,v)}return this.isHttp&&"begin"in x&&"end"in x?(f.setRequestHeader("Range",`bytes=${x.begin}-${x.end-1}`),a.expectedStatus=q):a.expectedStatus=W,f.responseType="arraybuffer",x.onError&&(f.onerror=function(y){x.onError(f.status)}),f.onreadystatechange=this.onStateChange.bind(this,u),f.onprogress=this.onProgress.bind(this,u),a.onHeadersReceived=x.onHeadersReceived,a.onDone=x.onDone,a.onError=x.onError,a.onProgress=x.onProgress,f.send(null),u}onProgress(x,f){var a;const u=this.pendingRequests[x];u&&((a=u.onProgress)==null||a.call(u,f))}onStateChange(x,f){var g,e,o;const u=this.pendingRequests[x];if(!u)return;const a=u.xhr;if(a.readyState>=2&&u.onHeadersReceived&&(u.onHeadersReceived(),delete u.onHeadersReceived),a.readyState!==4||!(x in this.pendingRequests))return;if(delete this.pendingRequests[x],a.status===0&&this.isHttp){(g=u.onError)==null||g.call(u,a.status);return}const y=a.status||W;if(!(y===W&&u.expectedStatus===q)&&y!==u.expectedStatus){(e=u.onError)==null||e.call(u,a.status);return}const P=Q(a);if(y===q){const l=a.getResponseHeader("Content-Range"),s=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u.onDone({begin:parseInt(s[1],10),chunk:P})}else P?u.onDone({begin:0,chunk:P}):(o=u.onError)==null||o.call(u,a.status)}getRequestXhr(x){return this.pendingRequests[x].xhr}isPendingRequest(x){return x in this.pendingRequests}abortRequest(x){const f=this.pendingRequests[x].xhr;delete this.pendingRequests[x],f.abort()}}class k{constructor(x){this._source=x,this._manager=new L(x.url,{httpHeaders:x.httpHeaders,withCredentials:x.withCredentials}),this._rangeChunkSize=x.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(x){const f=this._rangeRequestReaders.indexOf(x);f>=0&&this._rangeRequestReaders.splice(f,1)}getFullReader(){return(0,c.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new _(this._manager,this._source),this._fullRequestReader}getRangeReader(x,f){const u=new I(this._manager,x,f);return u.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(u),u}cancelAllRequests(x){var f;(f=this._fullRequestReader)==null||f.cancel(x);for(const u of this._rangeRequestReaders.slice(0))u.cancel(x)}}r.PDFNetworkStream=k;class _{constructor(x,f){this._manager=x;const u={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=f.url,this._fullRequestId=x.requestFull(u),this._headersReceivedCapability=new c.PromiseCapability,this._disableRange=f.disableRange||!1,this._contentLength=f.length,this._rangeChunkSize=f.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const x=this._fullRequestId,f=this._manager.getRequestXhr(x),u=v=>f.getResponseHeader(v),{allowRangeRequests:a,suggestedLength:y}=(0,A.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=y||this._contentLength,this._filename=(0,A.extractFilenameFromHeader)(u),this._isRangeSupported&&this._manager.abortRequest(x),this._headersReceivedCapability.resolve()}_onDone(x){if(x&&(this._requests.length>0?this._requests.shift().resolve({value:x.chunk,done:!1}):this._cachedChunks.push(x.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(x){this._storedError=(0,A.createResponseStatusError)(x,this._url),this._headersReceivedCapability.reject(this._storedError);for(const f of this._requests)f.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(x){var f;(f=this.onProgress)==null||f.call(this,{loaded:x.loaded,total:x.lengthComputable?x.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const x=new c.PromiseCapability;return this._requests.push(x),x.promise}cancel(x){this._done=!0,this._headersReceivedCapability.reject(x);for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class I{constructor(x,f,u){this._manager=x;const a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=x.url,this._requestId=x.requestRange(f,u,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var x;(x=this.onClosed)==null||x.call(this,this)}_onDone(x){const f=x.chunk;this._requests.length>0?this._requests.shift().resolve({value:f,done:!1}):this._queuedChunk=f,this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(x){this._storedError=(0,A.createResponseStatusError)(x,this._url);for(const f of this._requests)f.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(x){var f;this.isStreamingSupported||(f=this.onProgress)==null||f.call(this,{loaded:x.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const x=new c.PromiseCapability;return this._requests.push(x),x.promise}cancel(x){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(N,r,j)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFFetchStream=void 0;var c=j(1),A=j(22);function W(I,T,x){return{method:"GET",headers:I,signal:x.signal,mode:"cors",credentials:T?"include":"same-origin",redirect:"follow"}}function q(I){const T=new Headers;for(const x in I){const f=I[x];f!==void 0&&T.append(x,f)}return T}function Q(I){return I instanceof Uint8Array?I.buffer:I instanceof ArrayBuffer?I:((0,c.warn)(`getArrayBuffer - unexpected data format: ${I}`),new Uint8Array(I).buffer)}class L{constructor(T){this.source=T,this.isHttp=/^https?:/i.test(T.url),this.httpHeaders=this.isHttp&&T.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var T;return((T=this._fullRequestReader)==null?void 0:T._loaded)??0}getFullReader(){return(0,c.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new k(this),this._fullRequestReader}getRangeReader(T,x){if(x<=this._progressiveDataLength)return null;const f=new _(this,T,x);return this._rangeRequestReaders.push(f),f}cancelAllRequests(T){var x;(x=this._fullRequestReader)==null||x.cancel(T);for(const f of this._rangeRequestReaders.slice(0))f.cancel(T)}}r.PDFFetchStream=L;class k{constructor(T){this._stream=T,this._reader=null,this._loaded=0,this._filename=null;const x=T.source;this._withCredentials=x.withCredentials||!1,this._contentLength=x.length,this._headersCapability=new c.PromiseCapability,this._disableRange=x.disableRange||!1,this._rangeChunkSize=x.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!x.disableStream,this._isRangeSupported=!x.disableRange,this._headers=q(this._stream.httpHeaders);const f=x.url;fetch(f,W(this._headers,this._withCredentials,this._abortController)).then(u=>{if(!(0,A.validateResponseStatus)(u.status))throw(0,A.createResponseStatusError)(u.status,f);this._reader=u.body.getReader(),this._headersCapability.resolve();const a=P=>u.headers.get(P),{allowRangeRequests:y,suggestedLength:v}=(0,A.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=y,this._contentLength=v||this._contentLength,this._filename=(0,A.extractFilenameFromHeader)(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new c.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var f;await this._headersCapability.promise;const{value:T,done:x}=await this._reader.read();return x?{value:T,done:x}:(this._loaded+=T.byteLength,(f=this.onProgress)==null||f.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Q(T),done:!1})}cancel(T){var x;(x=this._reader)==null||x.cancel(T),this._abortController.abort()}}class _{constructor(T,x,f){this._stream=T,this._reader=null,this._loaded=0;const u=T.source;this._withCredentials=u.withCredentials||!1,this._readCapability=new c.PromiseCapability,this._isStreamingSupported=!u.disableStream,this._abortController=new AbortController,this._headers=q(this._stream.httpHeaders),this._headers.append("Range",`bytes=${x}-${f-1}`);const a=u.url;fetch(a,W(this._headers,this._withCredentials,this._abortController)).then(y=>{if(!(0,A.validateResponseStatus)(y.status))throw(0,A.createResponseStatusError)(y.status,a);this._readCapability.resolve(),this._reader=y.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var f;await this._readCapability.promise;const{value:T,done:x}=await this._reader.read();return x?{value:T,done:x}:(this._loaded+=T.byteLength,(f=this.onProgress)==null||f.call(this,{loaded:this._loaded}),{value:Q(T),done:!1})}cancel(T){var x;(x=this._reader)==null||x.cancel(T),this._abortController.abort()}}},(N,r,j)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TextLayerRenderTask=void 0,r.renderTextLayer=u,r.updateTextLayer=a;var c=j(1),A=j(6);const W=1e5,q=30,Q=.8,L=new Map;function k(y,v){let P;if(v&&c.FeatureTest.isOffscreenCanvasSupported)P=new OffscreenCanvas(y,y).getContext("2d",{alpha:!1});else{const g=document.createElement("canvas");g.width=g.height=y,P=g.getContext("2d",{alpha:!1})}return P}function _(y,v){const P=L.get(y);if(P)return P;const g=k(q,v);g.font=`${q}px ${y}`;const e=g.measureText("");let o=e.fontBoundingBoxAscent,l=Math.abs(e.fontBoundingBoxDescent);if(o){const h=o/(o+l);return L.set(y,h),g.canvas.width=g.canvas.height=0,h}g.strokeStyle="red",g.clearRect(0,0,q,q),g.strokeText("g",0,0);let s=g.getImageData(0,0,q,q).data;l=0;for(let h=s.length-1-3;h>=0;h-=4)if(s[h]>0){l=Math.ceil(h/4/q);break}g.clearRect(0,0,q,q),g.strokeText("A",0,q),s=g.getImageData(0,0,q,q).data,o=0;for(let h=0,R=s.length;h<R;h+=4)if(s[h]>0){o=q-Math.floor(h/4/q);break}if(g.canvas.width=g.canvas.height=0,o){const h=o/(o+l);return L.set(y,h),h}return L.set(y,Q),Q}function I(y,v,P){const g=document.createElement("span"),e={angle:0,canvasWidth:0,hasText:v.str!=="",hasEOL:v.hasEOL,fontSize:0};y._textDivs.push(g);const o=c.Util.transform(y._transform,v.transform);let l=Math.atan2(o[1],o[0]);const s=P[v.fontName];s.vertical&&(l+=Math.PI/2);const h=Math.hypot(o[2],o[3]),R=h*_(s.fontFamily,y._isOffscreenCanvasSupported);let n,B;l===0?(n=o[4],B=o[5]-R):(n=o[4]+R*Math.sin(l),B=o[5]-R*Math.cos(l));const V="calc(var(--scale-factor)*",z=g.style;y._container===y._rootContainer?(z.left=`${(100*n/y._pageWidth).toFixed(2)}%`,z.top=`${(100*B/y._pageHeight).toFixed(2)}%`):(z.left=`${V}${n.toFixed(2)}px)`,z.top=`${V}${B.toFixed(2)}px)`),z.fontSize=`${V}${h.toFixed(2)}px)`,z.fontFamily=s.fontFamily,e.fontSize=h,g.setAttribute("role","presentation"),g.textContent=v.str,g.dir=v.dir,y._fontInspectorEnabled&&(g.dataset.fontName=v.fontName),l!==0&&(e.angle=l*(180/Math.PI));let J=!1;if(v.str.length>1)J=!0;else if(v.str!==" "&&v.transform[0]!==v.transform[3]){const tt=Math.abs(v.transform[0]),dt=Math.abs(v.transform[3]);tt!==dt&&Math.max(tt,dt)/Math.min(tt,dt)>1.5&&(J=!0)}J&&(e.canvasWidth=s.vertical?v.height:v.width),y._textDivProperties.set(g,e),y._isReadableStream&&y._layoutText(g)}function T(y){const{div:v,scale:P,properties:g,ctx:e,prevFontSize:o,prevFontFamily:l}=y,{style:s}=v;let h="";if(g.canvasWidth!==0&&g.hasText){const{fontFamily:R}=s,{canvasWidth:n,fontSize:B}=g;(o!==B||l!==R)&&(e.font=`${B*P}px ${R}`,y.prevFontSize=B,y.prevFontFamily=R);const{width:V}=e.measureText(v.textContent);V>0&&(h=`scaleX(${n*P/V})`)}g.angle!==0&&(h=`rotate(${g.angle}deg) ${h}`),h.length>0&&(s.transform=h)}function x(y){if(y._canceled)return;const v=y._textDivs,P=y._capability;if(v.length>W){P.resolve();return}if(!y._isReadableStream)for(const e of v)y._layoutText(e);P.resolve()}class f{constructor({textContentSource:v,container:P,viewport:g,textDivs:e,textDivProperties:o,textContentItemsStr:l,isOffscreenCanvasSupported:s}){var V;this._textContentSource=v,this._isReadableStream=v instanceof ReadableStream,this._container=this._rootContainer=P,this._textDivs=e||[],this._textContentItemsStr=l||[],this._isOffscreenCanvasSupported=s,this._fontInspectorEnabled=!!((V=globalThis.FontInspector)!=null&&V.enabled),this._reader=null,this._textDivProperties=o||new WeakMap,this._canceled=!1,this._capability=new c.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:g.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:k(0,s)};const{pageWidth:h,pageHeight:R,pageX:n,pageY:B}=g.rawDims;this._transform=[1,0,0,-1,-n,B+R],this._pageWidth=h,this._pageHeight=R,(0,A.setLayerDimensions)(P,g),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new c.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new c.AbortException("TextLayer task cancelled."))}_processItems(v,P){for(const g of v){if(g.str===void 0){if(g.type==="beginMarkedContentProps"||g.type==="beginMarkedContent"){const e=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),g.id!==null&&this._container.setAttribute("id",`${g.id}`),e.append(this._container)}else g.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(g.str),I(this,g,P)}}_layoutText(v){const P=this._layoutTextParams.properties=this._textDivProperties.get(v);if(this._layoutTextParams.div=v,T(this._layoutTextParams),P.hasText&&this._container.append(v),P.hasEOL){const g=document.createElement("br");g.setAttribute("role","presentation"),this._container.append(g)}}_render(){const v=new c.PromiseCapability;let P=Object.create(null);if(this._isReadableStream){const g=()=>{this._reader.read().then(({value:e,done:o})=>{if(o){v.resolve();return}Object.assign(P,e.styles),this._processItems(e.items,P),g()},v.reject)};this._reader=this._textContentSource.getReader(),g()}else if(this._textContentSource){const{items:g,styles:e}=this._textContentSource;this._processItems(g,e),v.resolve()}else throw new Error('No "textContentSource" parameter specified.');v.promise.then(()=>{P=null,x(this)},this._capability.reject)}}r.TextLayerRenderTask=f;function u(y){!y.textContentSource&&(y.textContent||y.textContentStream)&&((0,A.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),y.textContentSource=y.textContent||y.textContentStream);const{container:v,viewport:P}=y,g=getComputedStyle(v),e=g.getPropertyValue("visibility"),o=parseFloat(g.getPropertyValue("--scale-factor"));e==="visible"&&(!o||Math.abs(o-P.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const l=new f(y);return l._render(),l}function a({container:y,viewport:v,textDivs:P,textDivProperties:g,isOffscreenCanvasSupported:e,mustRotate:o=!0,mustRescale:l=!0}){if(o&&(0,A.setLayerDimensions)(y,{rotation:v.rotation}),l){const s=k(0,e),R={prevFontSize:null,prevFontFamily:null,div:null,scale:v.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:s};for(const n of P)R.properties=g.get(n),R.div=n,T(R)}}},(N,r,j)=>{var k,_,I,T,x,f,u,a,y,_e,P,Ge,e,ve,l,Se;Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationEditorLayer=void 0;var c=j(1),A=j(5),W=j(28),q=j(29),Q=j(6);const h=class h{constructor(n){Z(this,y);Z(this,P);Z(this,e);Z(this,l);Z(this,k,void 0);Z(this,_,!1);Z(this,I,this.pointerup.bind(this));Z(this,T,this.pointerdown.bind(this));Z(this,x,new Map);Z(this,f,!1);Z(this,u,!1);Z(this,a,void 0);h._initialized||(h._initialized=!0,W.FreeTextEditor.initialize(n.l10n),q.InkEditor.initialize(n.l10n)),n.uiManager.registerEditorTypes([W.FreeTextEditor,q.InkEditor]),pt(this,a,n.uiManager),this.pageIndex=n.pageIndex,this.div=n.div,pt(this,k,n.accessibilityManager),b(this,a).addLayer(this)}get isEmpty(){return b(this,x).size===0}updateToolbar(n){b(this,a).updateToolbar(n)}updateMode(n=b(this,a).getMode()){st(this,l,Se).call(this),n===c.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),b(this,a).unselectAll(),n!==c.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",n===c.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",n===c.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(n){if(!n&&b(this,a).getMode()!==c.AnnotationEditorType.INK)return;if(!n){for(const V of b(this,x).values())if(V.isEmpty()){V.setInBackground();return}}st(this,e,ve).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(n){b(this,a).setEditingState(n)}addCommands(n){b(this,a).addCommands(n)}enable(){this.div.style.pointerEvents="auto";for(const n of b(this,x).values())n.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const n of b(this,x).values())n.disableEditing();st(this,l,Se).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(n){b(this,a).getActive()!==n&&b(this,a).setActiveEditor(n)}enableClick(){this.div.addEventListener("pointerdown",b(this,T)),this.div.addEventListener("pointerup",b(this,I))}disableClick(){this.div.removeEventListener("pointerdown",b(this,T)),this.div.removeEventListener("pointerup",b(this,I))}attach(n){b(this,x).set(n.id,n)}detach(n){var B;b(this,x).delete(n.id),(B=b(this,k))==null||B.removePointerInTextLayer(n.contentDiv)}remove(n){b(this,a).removeEditor(n),this.detach(n),n.div.style.display="none",setTimeout(()=>{n.div.style.display="",n.div.remove(),n.isAttachedToDOM=!1,document.activeElement===document.body&&b(this,a).focusMainContainer()},0),b(this,u)||this.addInkEditorIfNeeded(!1)}add(n){if(st(this,y,_e).call(this,n),b(this,a).addEditor(n),this.attach(n),!n.isAttachedToDOM){const B=n.render();this.div.append(B),n.isAttachedToDOM=!0}this.moveEditorInDOM(n),n.onceAdded(),b(this,a).addToAnnotationStorage(n)}moveEditorInDOM(n){var B;(B=b(this,k))==null||B.moveElementInDOM(this.div,n.div,n.contentDiv,!0)}addOrRebuild(n){n.needsToBeRebuilt()?n.rebuild():this.add(n)}addANewEditor(n){const B=()=>{this.addOrRebuild(n)},V=()=>{n.remove()};this.addCommands({cmd:B,undo:V,mustExec:!0})}addUndoableEditor(n){const B=()=>{this.addOrRebuild(n)},V=()=>{n.remove()};this.addCommands({cmd:B,undo:V,mustExec:!1})}getNextId(){return b(this,a).getId()}deserialize(n){switch(n.annotationType){case c.AnnotationEditorType.FREETEXT:return W.FreeTextEditor.deserialize(n,this,b(this,a));case c.AnnotationEditorType.INK:return q.InkEditor.deserialize(n,this,b(this,a))}return null}setSelected(n){b(this,a).setSelected(n)}toggleSelected(n){b(this,a).toggleSelected(n)}isSelected(n){return b(this,a).isSelected(n)}unselect(n){b(this,a).unselect(n)}pointerup(n){const{isMac:B}=c.FeatureTest.platform;if(!(n.button!==0||n.ctrlKey&&B)&&n.target===this.div&&b(this,f)){if(pt(this,f,!1),!b(this,_)){pt(this,_,!0);return}st(this,e,ve).call(this,n)}}pointerdown(n){const{isMac:B}=c.FeatureTest.platform;if(n.button!==0||n.ctrlKey&&B||n.target!==this.div)return;pt(this,f,!0);const V=b(this,a).getActive();pt(this,_,!V||V.isEmpty())}drop(n){const B=n.dataTransfer.getData("text/plain"),V=b(this,a).getEditor(B);if(!V)return;n.preventDefault(),n.dataTransfer.dropEffect="move",st(this,y,_e).call(this,V);const z=this.div.getBoundingClientRect(),J=n.clientX-z.x,tt=n.clientY-z.y;V.translate(J-V.startX,tt-V.startY),this.moveEditorInDOM(V),V.div.focus()}dragover(n){n.preventDefault()}destroy(){var n,B;((n=b(this,a).getActive())==null?void 0:n.parent)===this&&b(this,a).setActiveEditor(null);for(const V of b(this,x).values())(B=b(this,k))==null||B.removePointerInTextLayer(V.contentDiv),V.setParent(null),V.isAttachedToDOM=!1,V.div.remove();this.div=null,b(this,x).clear(),b(this,a).removeLayer(this)}render({viewport:n}){this.viewport=n,(0,Q.setLayerDimensions)(this.div,n),(0,A.bindEvents)(this,this.div,["dragover","drop"]);for(const B of b(this,a).getEditors(this.pageIndex))this.add(B);this.updateMode()}update({viewport:n}){b(this,a).commitOrRemove(),this.viewport=n,(0,Q.setLayerDimensions)(this.div,{rotation:n.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:n,pageHeight:B}=this.viewport.rawDims;return[n,B]}};k=new WeakMap,_=new WeakMap,I=new WeakMap,T=new WeakMap,x=new WeakMap,f=new WeakMap,u=new WeakMap,a=new WeakMap,y=new WeakSet,_e=function(n){var B;n.parent!==this&&(this.attach(n),(B=n.parent)==null||B.detach(n),n.setParent(this),n.div&&n.isAttachedToDOM&&(n.div.remove(),this.div.append(n.div)))},P=new WeakSet,Ge=function(n){switch(b(this,a).getMode()){case c.AnnotationEditorType.FREETEXT:return new W.FreeTextEditor(n);case c.AnnotationEditorType.INK:return new q.InkEditor(n)}return null},e=new WeakSet,ve=function(n){const B=this.getNextId(),V=st(this,P,Ge).call(this,{parent:this,id:B,x:n.offsetX,y:n.offsetY,uiManager:b(this,a)});return V&&this.add(V),V},l=new WeakSet,Se=function(){pt(this,u,!0);for(const n of b(this,x).values())n.isEmpty()&&n.remove();pt(this,u,!1)},Dt(h,"_initialized",!1);let L=h;r.AnnotationEditorLayer=L},(N,r,j)=>{var Q,L,k,_,I,T,x,f,u,a,qe,v,Ve,g,$e,o,Ee;Object.defineProperty(r,"__esModule",{value:!0}),r.FreeTextEditor=void 0;var c=j(1),A=j(5),W=j(4);const s=class s extends W.AnnotationEditor{constructor(n){super({...n,name:"freeTextEditor"});Z(this,a);Z(this,v);Z(this,g);Z(this,o);Z(this,Q,this.editorDivBlur.bind(this));Z(this,L,this.editorDivFocus.bind(this));Z(this,k,this.editorDivInput.bind(this));Z(this,_,this.editorDivKeydown.bind(this));Z(this,I,void 0);Z(this,T,"");Z(this,x,`${this.id}-editor`);Z(this,f,!1);Z(this,u,void 0);pt(this,I,n.color||s._defaultColor||W.AnnotationEditor._defaultLineColor),pt(this,u,n.fontSize||s._defaultFontSize)}static initialize(n){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(V=>[V,n.get(V)]));const B=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(B.getPropertyValue("--freetext-padding"))}static updateDefaultParams(n,B){switch(n){case c.AnnotationEditorParamsType.FREETEXT_SIZE:s._defaultFontSize=B;break;case c.AnnotationEditorParamsType.FREETEXT_COLOR:s._defaultColor=B;break}}updateParams(n,B){switch(n){case c.AnnotationEditorParamsType.FREETEXT_SIZE:st(this,a,qe).call(this,B);break;case c.AnnotationEditorParamsType.FREETEXT_COLOR:st(this,v,Ve).call(this,B);break}}static get defaultPropertiesToUpdate(){return[[c.AnnotationEditorParamsType.FREETEXT_SIZE,s._defaultFontSize],[c.AnnotationEditorParamsType.FREETEXT_COLOR,s._defaultColor||W.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[c.AnnotationEditorParamsType.FREETEXT_SIZE,b(this,u)],[c.AnnotationEditorParamsType.FREETEXT_COLOR,b(this,I)]]}getInitialTranslation(){const n=this.parentScale;return[-s._internalPadding*n,-(s._internalPadding+b(this,u))*n]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(c.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",b(this,_)),this.editorDiv.addEventListener("focus",b(this,L)),this.editorDiv.addEventListener("blur",b(this,Q)),this.editorDiv.addEventListener("input",b(this,k)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",b(this,x)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",b(this,_)),this.editorDiv.removeEventListener("focus",b(this,L)),this.editorDiv.removeEventListener("blur",b(this,Q)),this.editorDiv.removeEventListener("input",b(this,k)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(n){super.focusin(n),n.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),b(this,f)||(pt(this,f,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),pt(this,T,st(this,g,$e).call(this).trimEnd()),st(this,o,Ee).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(n){this.enableEditMode(),this.editorDiv.focus()}keydown(n){n.target===this.div&&n.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(n){s._keyboardManager.exec(this,n)}editorDivFocus(n){this.isEditing=!0}editorDivBlur(n){this.isEditing=!1}editorDivInput(n){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let n,B;this.width&&(n=this.x,B=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",b(this,x)),this.enableEditing(),s._l10nPromise.get("editor_free_text2_aria_label").then(z=>{var J;return(J=this.editorDiv)==null?void 0:J.setAttribute("aria-label",z)}),s._l10nPromise.get("free_text2_default_content").then(z=>{var J;return(J=this.editorDiv)==null?void 0:J.setAttribute("default-content",z)}),this.editorDiv.contentEditable=!0;const{style:V}=this.editorDiv;if(V.fontSize=`calc(${b(this,u)}px * var(--scale-factor))`,V.color=b(this,I),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,A.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[z,J]=this.parentDimensions;this.setAt(n*z,B*J,this.width*z,this.height*J);for(const tt of b(this,T).split(`
`)){const dt=document.createElement("div");dt.append(tt?document.createTextNode(tt):document.createElement("br")),this.editorDiv.append(dt)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(n,B,V){const z=super.deserialize(n,B,V);return pt(z,u,n.fontSize),pt(z,I,c.Util.makeHexColor(...n.color)),pt(z,T,n.value),z}serialize(){if(this.isEmpty())return null;const n=s._internalPadding*this.parentScale,B=this.getRect(n,n),V=W.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:b(this,I));return{annotationType:c.AnnotationEditorType.FREETEXT,color:V,fontSize:b(this,u),value:b(this,T),pageIndex:this.pageIndex,rect:B,rotation:this.rotation}}};Q=new WeakMap,L=new WeakMap,k=new WeakMap,_=new WeakMap,I=new WeakMap,T=new WeakMap,x=new WeakMap,f=new WeakMap,u=new WeakMap,a=new WeakSet,qe=function(n){const B=z=>{this.editorDiv.style.fontSize=`calc(${z}px * var(--scale-factor))`,this.translate(0,-(z-b(this,u))*this.parentScale),pt(this,u,z),st(this,o,Ee).call(this)},V=b(this,u);this.addCommands({cmd:()=>{B(n)},undo:()=>{B(V)},mustExec:!0,type:c.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},v=new WeakSet,Ve=function(n){const B=b(this,I);this.addCommands({cmd:()=>{pt(this,I,this.editorDiv.style.color=n)},undo:()=>{pt(this,I,this.editorDiv.style.color=B)},mustExec:!0,type:c.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},g=new WeakSet,$e=function(){const n=this.editorDiv.getElementsByTagName("div");if(n.length===0)return this.editorDiv.innerText;const B=[];for(const V of n)B.push(V.innerText.replace(/\r\n?|\n/,""));return B.join(`
`)},o=new WeakSet,Ee=function(){const[n,B]=this.parentDimensions;let V;if(this.isAttachedToDOM)V=this.div.getBoundingClientRect();else{const{currentLayer:z,div:J}=this,tt=J.style.display;J.style.display="hidden",z.div.append(this.div),V=J.getBoundingClientRect(),J.remove(),J.style.display=tt}this.width=V.width/n,this.height=V.height/B},Dt(s,"_freeTextDefaultContent",""),Dt(s,"_l10nPromise"),Dt(s,"_internalPadding",0),Dt(s,"_defaultColor",null),Dt(s,"_defaultFontSize",10),Dt(s,"_keyboardManager",new A.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],s.prototype.commitOrRemove]])),Dt(s,"_type","freetext");let q=s;r.FreeTextEditor=q},(N,r,j)=>{var k,_,I,T,x,f,u,a,y,v,P,g,e,o,l,Xe,h,ze,n,Ye,V,Ke,J,Te,dt,Je,ct,Qe,At,Ze,yt,$t,d,Pe,E,oe,M,le,U,Qt,O,Ce,i,ce,S,xe,G,tn,K,en,at,nn,rt,we,ft,he,_t,Zt,Y,Re;Object.defineProperty(r,"__esModule",{value:!0}),r.InkEditor=void 0,Object.defineProperty(r,"fitCurve",{enumerable:!0,get:function(){return W.fitCurve}});var c=j(1),A=j(4),W=j(30),q=j(5);const Q=16,vt=class vt extends A.AnnotationEditor{constructor(w){super({...w,name:"inkEditor"});Z(this,l);Z(this,h);Z(this,n);Z(this,V);Z(this,J);Z(this,dt);Z(this,ct);Z(this,At);Z(this,yt);Z(this,d);Z(this,E);Z(this,M);Z(this,U);Z(this,O);Z(this,i);Z(this,G);Z(this,K);Z(this,at);Z(this,rt);Z(this,ft);Z(this,_t);Z(this,Y);Z(this,k,0);Z(this,_,0);Z(this,I,0);Z(this,T,this.canvasPointermove.bind(this));Z(this,x,this.canvasPointerleave.bind(this));Z(this,f,this.canvasPointerup.bind(this));Z(this,u,this.canvasPointerdown.bind(this));Z(this,a,!1);Z(this,y,!1);Z(this,v,null);Z(this,P,null);Z(this,g,0);Z(this,e,0);Z(this,o,null);this.color=w.color||null,this.thickness=w.thickness||null,this.opacity=w.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(w){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(D=>[D,w.get(D)]))}static updateDefaultParams(w,D){switch(w){case c.AnnotationEditorParamsType.INK_THICKNESS:vt._defaultThickness=D;break;case c.AnnotationEditorParamsType.INK_COLOR:vt._defaultColor=D;break;case c.AnnotationEditorParamsType.INK_OPACITY:vt._defaultOpacity=D/100;break}}updateParams(w,D){switch(w){case c.AnnotationEditorParamsType.INK_THICKNESS:st(this,l,Xe).call(this,D);break;case c.AnnotationEditorParamsType.INK_COLOR:st(this,h,ze).call(this,D);break;case c.AnnotationEditorParamsType.INK_OPACITY:st(this,n,Ye).call(this,D);break}}static get defaultPropertiesToUpdate(){return[[c.AnnotationEditorParamsType.INK_THICKNESS,vt._defaultThickness],[c.AnnotationEditorParamsType.INK_COLOR,vt._defaultColor||A.AnnotationEditor._defaultLineColor],[c.AnnotationEditorParamsType.INK_OPACITY,Math.round(vt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[c.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||vt._defaultThickness],[c.AnnotationEditorParamsType.INK_COLOR,this.color||vt._defaultColor||A.AnnotationEditor._defaultLineColor],[c.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??vt._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(st(this,E,oe).call(this),st(this,M,le).call(this)),this.isAttachedToDOM||(this.parent.add(this),st(this,U,Qt).call(this)),st(this,_t,Zt).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,b(this,P).disconnect(),pt(this,P,null),super.remove())}setParent(w){!this.parent&&w?this._uiManager.removeShouldRescale(this):this.parent&&w===null&&this._uiManager.addShouldRescale(this),super.setParent(w)}onScaleChanging(){const[w,D]=this.parentDimensions,lt=this.width*w,mt=this.height*D;this.setDimensions(lt,mt)}enableEditMode(){b(this,a)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",b(this,u)),this.canvas.addEventListener("pointerup",b(this,f)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",b(this,u)),this.canvas.removeEventListener("pointerup",b(this,f)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){b(this,a)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),pt(this,a,!0),this.div.classList.add("disabled"),st(this,_t,Zt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(w){super.focusin(w),this.enableEditMode()}canvasPointerdown(w){w.button!==0||!this.isInEditMode()||b(this,a)||(this.setInForeground(),w.type!=="mouse"&&this.div.focus(),w.stopPropagation(),this.canvas.addEventListener("pointerleave",b(this,x)),this.canvas.addEventListener("pointermove",b(this,T)),st(this,dt,Je).call(this,w.offsetX,w.offsetY))}canvasPointermove(w){w.stopPropagation(),st(this,ct,Qe).call(this,w.offsetX,w.offsetY)}canvasPointerup(w){w.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(w.stopPropagation(),st(this,d,Pe).call(this,w),this.setInBackground())}canvasPointerleave(w){st(this,d,Pe).call(this,w),this.setInBackground()}render(){if(this.div)return this.div;let w,D;this.width&&(w=this.x,D=this.y),super.render(),vt._l10nPromise.get("editor_ink2_aria_label").then(Rt=>{var wt;return(wt=this.div)==null?void 0:wt.setAttribute("aria-label",Rt)});const[lt,mt,Pt,xt]=st(this,V,Ke).call(this);if(this.setAt(lt,mt,0,0),this.setDims(Pt,xt),st(this,E,oe).call(this),this.width){const[Rt,wt]=this.parentDimensions;this.setAt(w*Rt,D*wt,this.width*Rt,this.height*wt),pt(this,y,!0),st(this,U,Qt).call(this),this.setDims(this.width*Rt,this.height*wt),st(this,yt,$t).call(this),st(this,Y,Re).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return st(this,M,le).call(this),this.div}setDimensions(w,D){const lt=Math.round(w),mt=Math.round(D);if(b(this,g)===lt&&b(this,e)===mt)return;pt(this,g,lt),pt(this,e,mt),this.canvas.style.visibility="hidden",b(this,k)&&Math.abs(b(this,k)-w/D)>.01&&(D=Math.ceil(w/b(this,k)),this.setDims(w,D));const[Pt,xt]=this.parentDimensions;this.width=w/Pt,this.height=D/xt,b(this,a)&&st(this,O,Ce).call(this,w,D),st(this,U,Qt).call(this),st(this,yt,$t).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(w,D,lt){var Ot,Lt;const mt=super.deserialize(w,D,lt);mt.thickness=w.thickness,mt.color=c.Util.makeHexColor(...w.color),mt.opacity=w.opacity;const[Pt,xt]=mt.pageDimensions,Rt=mt.width*Pt,wt=mt.height*xt,Mt=mt.parentScale,Ct=w.thickness/2;pt(mt,k,Rt/wt),pt(mt,a,!0),pt(mt,g,Math.round(Rt)),pt(mt,e,Math.round(wt));for(const{bezier:kt}of w.paths){const Bt=[];mt.paths.push(Bt);let Ut=Mt*(kt[0]-Ct),Wt=Mt*(wt-kt[1]-Ct);for(let Nt=2,jt=kt.length;Nt<jt;Nt+=6){const qt=Mt*(kt[Nt]-Ct),Xt=Mt*(wt-kt[Nt+1]-Ct),ne=Mt*(kt[Nt+2]-Ct),se=Mt*(wt-kt[Nt+3]-Ct),Me=Mt*(kt[Nt+4]-Ct),Oe=Mt*(wt-kt[Nt+5]-Ct);Bt.push([[Ut,Wt],[qt,Xt],[ne,se],[Me,Oe]]),Ut=Me,Wt=Oe}const Gt=st(this,S,xe).call(this,Bt);mt.bezierPath2D.push(Gt)}const It=st(Ot=mt,rt,we).call(Ot);return pt(mt,I,Math.max(Q,It[2]-It[0])),pt(mt,_,Math.max(Q,It[3]-It[1])),st(Lt=mt,O,Ce).call(Lt,Rt,wt),mt}serialize(){if(this.isEmpty())return null;const w=this.getRect(0,0),D=this.rotation%180===0?w[3]-w[1]:w[2]-w[0],lt=A.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:c.AnnotationEditorType.INK,color:lt,thickness:this.thickness,opacity:this.opacity,paths:st(this,G,tn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,D),pageIndex:this.pageIndex,rect:w,rotation:this.rotation}}};k=new WeakMap,_=new WeakMap,I=new WeakMap,T=new WeakMap,x=new WeakMap,f=new WeakMap,u=new WeakMap,a=new WeakMap,y=new WeakMap,v=new WeakMap,P=new WeakMap,g=new WeakMap,e=new WeakMap,o=new WeakMap,l=new WeakSet,Xe=function(w){const D=this.thickness;this.addCommands({cmd:()=>{this.thickness=w,st(this,_t,Zt).call(this)},undo:()=>{this.thickness=D,st(this,_t,Zt).call(this)},mustExec:!0,type:c.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},h=new WeakSet,ze=function(w){const D=this.color;this.addCommands({cmd:()=>{this.color=w,st(this,yt,$t).call(this)},undo:()=>{this.color=D,st(this,yt,$t).call(this)},mustExec:!0,type:c.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},n=new WeakSet,Ye=function(w){w/=100;const D=this.opacity;this.addCommands({cmd:()=>{this.opacity=w,st(this,yt,$t).call(this)},undo:()=>{this.opacity=D,st(this,yt,$t).call(this)},mustExec:!0,type:c.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},V=new WeakSet,Ke=function(){const{parentRotation:w,parentDimensions:[D,lt]}=this;switch(w){case 90:return[0,lt,lt,D];case 180:return[D,lt,D,lt];case 270:return[D,0,lt,D];default:return[0,0,D,lt]}},J=new WeakSet,Te=function(){const{ctx:w,color:D,opacity:lt,thickness:mt,parentScale:Pt,scaleFactor:xt}=this;w.lineWidth=mt*Pt/xt,w.lineCap="round",w.lineJoin="round",w.miterLimit=10,w.strokeStyle=`${D}${(0,q.opacityToHex)(lt)}`},dt=new WeakSet,Je=function(w,D){this.isEditing=!0,b(this,y)||(pt(this,y,!0),st(this,U,Qt).call(this),this.thickness||(this.thickness=vt._defaultThickness),this.color||(this.color=vt._defaultColor||A.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=vt._defaultOpacity)),this.currentPath.push([w,D]),pt(this,v,null),st(this,J,Te).call(this),this.ctx.beginPath(),this.ctx.moveTo(w,D),pt(this,o,()=>{b(this,o)&&(b(this,v)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):st(this,yt,$t).call(this),this.ctx.lineTo(...b(this,v)),pt(this,v,null),this.ctx.stroke()),window.requestAnimationFrame(b(this,o)))}),window.requestAnimationFrame(b(this,o))},ct=new WeakSet,Qe=function(w,D){const[lt,mt]=this.currentPath.at(-1);w===lt&&D===mt||(this.currentPath.push([w,D]),pt(this,v,[w,D]))},At=new WeakSet,Ze=function(w,D){var Mt;this.ctx.closePath(),pt(this,o,null),w=Math.min(Math.max(w,0),this.canvas.width),D=Math.min(Math.max(D,0),this.canvas.height);const[lt,mt]=this.currentPath.at(-1);(w!==lt||D!==mt)&&this.currentPath.push([w,D]);let Pt;if(this.currentPath.length!==1)Pt=(0,W.fitCurve)(this.currentPath,30,null);else{const Ct=[w,D];Pt=[[Ct,Ct.slice(),Ct.slice(),Ct]]}const xt=st(Mt=vt,S,xe).call(Mt,Pt);this.currentPath.length=0;const Rt=()=>{this.paths.push(Pt),this.bezierPath2D.push(xt),this.rebuild()},wt=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(st(this,E,oe).call(this),st(this,M,le).call(this)),st(this,_t,Zt).call(this))};this.addCommands({cmd:Rt,undo:wt,mustExec:!0})},yt=new WeakSet,$t=function(){if(this.isEmpty()){st(this,i,ce).call(this);return}st(this,J,Te).call(this);const{canvas:w,ctx:D}=this;D.setTransform(1,0,0,1,0,0),D.clearRect(0,0,w.width,w.height),st(this,i,ce).call(this);for(const lt of this.bezierPath2D)D.stroke(lt)},d=new WeakSet,Pe=function(w){st(this,At,Ze).call(this,w.offsetX,w.offsetY),this.canvas.removeEventListener("pointerleave",b(this,x)),this.canvas.removeEventListener("pointermove",b(this,T)),this.addToAnnotationStorage()},E=new WeakSet,oe=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",vt._l10nPromise.get("editor_ink_canvas_aria_label").then(w=>{var D;return(D=this.canvas)==null?void 0:D.setAttribute("aria-label",w)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},M=new WeakSet,le=function(){pt(this,P,new ResizeObserver(w=>{const D=w[0].contentRect;D.width&&D.height&&this.setDimensions(D.width,D.height)})),b(this,P).observe(this.div)},U=new WeakSet,Qt=function(){if(!b(this,y))return;const[w,D]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*w),this.canvas.height=Math.ceil(this.height*D),st(this,i,ce).call(this)},O=new WeakSet,Ce=function(w,D){const lt=st(this,ft,he).call(this),mt=(w-lt)/b(this,I),Pt=(D-lt)/b(this,_);this.scaleFactor=Math.min(mt,Pt)},i=new WeakSet,ce=function(){const w=st(this,ft,he).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+w,this.translationY*this.scaleFactor+w)},S=new WeakSet,xe=function(w){const D=new Path2D;for(let lt=0,mt=w.length;lt<mt;lt++){const[Pt,xt,Rt,wt]=w[lt];lt===0&&D.moveTo(...Pt),D.bezierCurveTo(xt[0],xt[1],Rt[0],Rt[1],wt[0],wt[1])}return D},G=new WeakSet,tn=function(w,D,lt,mt){const xt=[],Rt=this.thickness/2;let wt,Mt;for(const Ct of this.paths){wt=[],Mt=[];for(let It=0,Ot=Ct.length;It<Ot;It++){const[Lt,kt,Bt,Ut]=Ct[It],Wt=w*(Lt[0]+D)+Rt,Gt=mt-w*(Lt[1]+lt)-Rt,Nt=w*(kt[0]+D)+Rt,jt=mt-w*(kt[1]+lt)-Rt,qt=w*(Bt[0]+D)+Rt,Xt=mt-w*(Bt[1]+lt)-Rt,ne=w*(Ut[0]+D)+Rt,se=mt-w*(Ut[1]+lt)-Rt;It===0&&(wt.push(Wt,Gt),Mt.push(Wt,Gt)),wt.push(Nt,jt,qt,Xt,ne,se),st(this,K,en).call(this,Wt,Gt,Nt,jt,qt,Xt,ne,se,4,Mt)}xt.push({bezier:wt,points:Mt})}return xt},K=new WeakSet,en=function(w,D,lt,mt,Pt,xt,Rt,wt,Mt,Ct){if(st(this,at,nn).call(this,w,D,lt,mt,Pt,xt,Rt,wt)){Ct.push(Rt,wt);return}for(let It=1;It<Mt-1;It++){const Ot=It/Mt,Lt=1-Ot;let kt=Ot*w+Lt*lt,Bt=Ot*D+Lt*mt,Ut=Ot*lt+Lt*Pt,Wt=Ot*mt+Lt*xt;const Gt=Ot*Pt+Lt*Rt,Nt=Ot*xt+Lt*wt;kt=Ot*kt+Lt*Ut,Bt=Ot*Bt+Lt*Wt,Ut=Ot*Ut+Lt*Gt,Wt=Ot*Wt+Lt*Nt,kt=Ot*kt+Lt*Ut,Bt=Ot*Bt+Lt*Wt,Ct.push(kt,Bt)}Ct.push(Rt,wt)},at=new WeakSet,nn=function(w,D,lt,mt,Pt,xt,Rt,wt){const Ct=(3*lt-2*w-Rt)**2,It=(3*mt-2*D-wt)**2,Ot=(3*Pt-w-2*Rt)**2,Lt=(3*xt-D-2*wt)**2;return Math.max(Ct,Ot)+Math.max(It,Lt)<=10},rt=new WeakSet,we=function(){let w=1/0,D=-1/0,lt=1/0,mt=-1/0;for(const Pt of this.paths)for(const[xt,Rt,wt,Mt]of Pt){const Ct=c.Util.bezierBoundingBox(...xt,...Rt,...wt,...Mt);w=Math.min(w,Ct[0]),lt=Math.min(lt,Ct[1]),D=Math.max(D,Ct[2]),mt=Math.max(mt,Ct[3])}return[w,lt,D,mt]},ft=new WeakSet,he=function(){return b(this,a)?Math.ceil(this.thickness*this.parentScale):0},_t=new WeakSet,Zt=function(w=!1){if(this.isEmpty())return;if(!b(this,a)){st(this,yt,$t).call(this);return}const D=st(this,rt,we).call(this),lt=st(this,ft,he).call(this);pt(this,I,Math.max(Q,D[2]-D[0])),pt(this,_,Math.max(Q,D[3]-D[1]));const mt=Math.ceil(lt+b(this,I)*this.scaleFactor),Pt=Math.ceil(lt+b(this,_)*this.scaleFactor),[xt,Rt]=this.parentDimensions;this.width=mt/xt,this.height=Pt/Rt,pt(this,k,mt/Pt),st(this,Y,Re).call(this);const wt=this.translationX,Mt=this.translationY;this.translationX=-D[0],this.translationY=-D[1],st(this,U,Qt).call(this),st(this,yt,$t).call(this),pt(this,g,mt),pt(this,e,Pt),this.setDims(mt,Pt);const Ct=w?lt/this.scaleFactor/2:0;this.translate(wt-this.translationX-Ct,Mt-this.translationY-Ct)},Y=new WeakSet,Re=function(){const{style:w}=this.div;b(this,k)>=1?(w.minHeight=`${Q}px`,w.minWidth=`${Math.round(b(this,k)*Q)}px`):(w.minWidth=`${Q}px`,w.minHeight=`${Math.round(Q/b(this,k))}px`)},Z(vt,S),Dt(vt,"_defaultColor",null),Dt(vt,"_defaultOpacity",1),Dt(vt,"_defaultThickness",1),Dt(vt,"_l10nPromise"),Dt(vt,"_type","ink");let L=vt;r.InkEditor=L},(N,r,j)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.fitCurve=void 0;const c=j(31);r.fitCurve=c},N=>{function r(f,u,a){if(!Array.isArray(f))throw new TypeError("First argument should be an array");if(f.forEach(g=>{if(!Array.isArray(g)||g.some(e=>typeof e!="number")||g.length!==f[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),f=f.filter((g,e)=>e===0||!g.every((o,l)=>o===f[e-1][l])),f.length<2)return[];const y=f.length,v=I(f[1],f[0]),P=I(f[y-2],f[y-1]);return j(f,v,P,u,a)}function j(f,u,a,y,v){var g,e,o,l,s,h,R,n,B,V,z,J,tt;if(f.length===2)return J=T.vectorLen(T.subtract(f[0],f[1]))/3,g=[f[0],T.addArrays(f[0],T.mulItems(u,J)),T.addArrays(f[1],T.mulItems(a,J)),f[1]],[g];if(e=Q(f),[g,l,h]=c(f,e,e,u,a,v),l===0||l<y)return[g];if(l<y*y)for(o=e,s=l,R=h,tt=0;tt<20;tt++){if(o=W(g,f,o),[g,l,h]=c(f,e,o,u,a,v),l<y)return[g];if(h===R){let dt=l/s;if(dt>.9999&&dt<1.0001)break}s=l,R=h}return z=[],n=T.subtract(f[h-1],f[h+1]),n.every(dt=>dt===0)&&(n=T.subtract(f[h-1],f[h]),[n[0],n[1]]=[-n[1],n[0]]),B=T.normalize(n),V=T.mulItems(B,-1),z=z.concat(j(f.slice(0,h+1),u,B,y,v)),z=z.concat(j(f.slice(h),V,a,y,v)),z}function c(f,u,a,y,v,P){var g,e,o;return g=A(f,a,y,v),[e,o]=L(f,g,u),P&&P({bez:g,points:f,params:u,maxErr:e,maxPoint:o}),[g,e,o]}function A(f,u,a,y){var v,P,g,e,o,l,s,h,R,n,B,V,z,J,tt,dt,ot,ct=f[0],gt=f[f.length-1];for(v=[ct,null,null,gt],P=T.zeros_Xx2x2(u.length),z=0,J=u.length;z<J;z++)dt=u[z],ot=1-dt,g=P[z],g[0]=T.mulItems(a,3*dt*(ot*ot)),g[1]=T.mulItems(y,3*ot*(dt*dt));for(e=[[0,0],[0,0]],o=[0,0],z=0,J=f.length;z<J;z++)dt=u[z],g=P[z],e[0][0]+=T.dot(g[0],g[0]),e[0][1]+=T.dot(g[0],g[1]),e[1][0]+=T.dot(g[0],g[1]),e[1][1]+=T.dot(g[1],g[1]),tt=T.subtract(f[z],x.q([ct,ct,gt,gt],dt)),o[0]+=T.dot(g[0],tt),o[1]+=T.dot(g[1],tt);return l=e[0][0]*e[1][1]-e[1][0]*e[0][1],s=e[0][0]*o[1]-e[1][0]*o[0],h=o[0]*e[1][1]-o[1]*e[0][1],R=l===0?0:h/l,n=l===0?0:s/l,V=T.vectorLen(T.subtract(ct,gt)),B=1e-6*V,R<B||n<B?(v[1]=T.addArrays(ct,T.mulItems(a,V/3)),v[2]=T.addArrays(gt,T.mulItems(y,V/3))):(v[1]=T.addArrays(ct,T.mulItems(a,R)),v[2]=T.addArrays(gt,T.mulItems(y,n))),v}function W(f,u,a){return a.map((y,v)=>q(f,u[v],y))}function q(f,u,a){var y=T.subtract(x.q(f,a),u),v=x.qprime(f,a),P=T.mulMatrix(y,v),g=T.sum(T.squareItems(v))+2*T.mulMatrix(y,x.qprimeprime(f,a));return g===0?a:a-P/g}function Q(f){var u=[],a,y,v;return f.forEach((P,g)=>{a=g?y+T.vectorLen(T.subtract(P,v)):0,u.push(a),y=a,v=P}),u=u.map(P=>P/y),u}function L(f,u,a){var y,v,P,g,e,o,l,s;v=0,P=Math.floor(f.length/2);const h=k(u,10);for(e=0,o=f.length;e<o;e++)l=f[e],s=_(u,a[e],h,10),g=T.subtract(x.q(u,s),l),y=g[0]*g[0]+g[1]*g[1],y>v&&(v=y,P=e);return[v,P]}var k=function(f,u){for(var a,y=[0],v=f[0],P=0,g=1;g<=u;g++)a=x.q(f,g/u),P+=T.vectorLen(T.subtract(a,v)),y.push(P),v=a;return y=y.map(e=>e/P),y};function _(f,u,a,y){if(u<0)return 0;if(u>1)return 1;for(var v,P,g,e,o,l=1;l<=y;l++)if(u<=a[l]){e=(l-1)/y,g=l/y,P=a[l-1],v=a[l],o=(u-P)/(v-P)*(g-e)+e;break}return o}function I(f,u){return T.normalize(T.subtract(f,u))}class T{static zeros_Xx2x2(u){for(var a=[];u--;)a.push([0,0]);return a}static mulItems(u,a){return u.map(y=>y*a)}static mulMatrix(u,a){return u.reduce((y,v,P)=>y+v*a[P],0)}static subtract(u,a){return u.map((y,v)=>y-a[v])}static addArrays(u,a){return u.map((y,v)=>y+a[v])}static addItems(u,a){return u.map(y=>y+a)}static sum(u){return u.reduce((a,y)=>a+y)}static dot(u,a){return T.mulMatrix(u,a)}static vectorLen(u){return Math.hypot(...u)}static divItems(u,a){return u.map(y=>y/a)}static squareItems(u){return u.map(a=>a*a)}static normalize(u){return this.divItems(u,this.vectorLen(u))}}class x{static q(u,a){var y=1-a,v=T.mulItems(u[0],y*y*y),P=T.mulItems(u[1],3*y*y*a),g=T.mulItems(u[2],3*y*a*a),e=T.mulItems(u[3],a*a*a);return T.addArrays(T.addArrays(v,P),T.addArrays(g,e))}static qprime(u,a){var y=1-a,v=T.mulItems(T.subtract(u[1],u[0]),3*y*y),P=T.mulItems(T.subtract(u[2],u[1]),6*y*a),g=T.mulItems(T.subtract(u[3],u[2]),3*a*a);return T.addArrays(T.addArrays(v,P),g)}static qprimeprime(u,a){return T.addArrays(T.mulItems(T.addArrays(T.subtract(u[2],T.mulItems(u[1],2)),u[0]),6*(1-a)),T.mulItems(T.addArrays(T.subtract(u[3],T.mulItems(u[2],2)),u[1]),6*a))}}N.exports=r,N.exports.fitCubic=j,N.exports.createTangent=I},(N,r,j)=>{var yt,Yt,d,sn,H,ke,X,Fe;Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationLayer=void 0;var c=j(1),A=j(6),W=j(3),q=j(33),Q=j(34);const L=1e3,k=9,_=new WeakSet;function I(O){return{width:O[2]-O[0],height:O[3]-O[1]}}class T{static create(t){switch(t.data.annotationType){case c.AnnotationType.LINK:return new f(t);case c.AnnotationType.TEXT:return new u(t);case c.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new y(t);case"Btn":return t.data.radioButton?new P(t):t.data.checkBox?new v(t):new g(t);case"Ch":return new e(t)}return new a(t);case c.AnnotationType.POPUP:return new o(t);case c.AnnotationType.FREETEXT:return new s(t);case c.AnnotationType.LINE:return new h(t);case c.AnnotationType.SQUARE:return new R(t);case c.AnnotationType.CIRCLE:return new n(t);case c.AnnotationType.POLYLINE:return new B(t);case c.AnnotationType.CARET:return new z(t);case c.AnnotationType.INK:return new J(t);case c.AnnotationType.POLYGON:return new V(t);case c.AnnotationType.HIGHLIGHT:return new tt(t);case c.AnnotationType.UNDERLINE:return new dt(t);case c.AnnotationType.SQUIGGLY:return new ot(t);case c.AnnotationType.STRIKEOUT:return new ct(t);case c.AnnotationType.STAMP:return new gt(t);case c.AnnotationType.FILEATTACHMENT:return new At(t);default:return new x(t)}}}class x{constructor(t,{isRenderable:i=!1,ignoreBorder:m=!1,createQuadrilaterals:S=!1}={}){this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,i&&(this.container=this._createContainer(m)),S&&(this.quadrilaterals=this._createQuadrilaterals(m))}_createContainer(t=!1){const{data:i,page:m,viewport:S}=this,C=document.createElement("section");C.setAttribute("data-annotation-id",i.id),i.noRotate&&C.classList.add("norotate");const{pageWidth:G,pageHeight:nt,pageX:K,pageY:it}=S.rawDims,{width:at,height:et}=I(i.rect),rt=c.Util.normalizeRect([i.rect[0],m.view[3]-i.rect[1]+m.view[1],i.rect[2],m.view[3]-i.rect[3]+m.view[1]]);if(!t&&i.borderStyle.width>0){C.style.borderWidth=`${i.borderStyle.width}px`;const ft=i.borderStyle.horizontalCornerRadius,Et=i.borderStyle.verticalCornerRadius;if(ft>0||Et>0){const Tt=`calc(${ft}px * var(--scale-factor)) / calc(${Et}px * var(--scale-factor))`;C.style.borderRadius=Tt}else if(this instanceof P){const Tt=`calc(${at}px * var(--scale-factor)) / calc(${et}px * var(--scale-factor))`;C.style.borderRadius=Tt}switch(i.borderStyle.style){case c.AnnotationBorderStyleType.SOLID:C.style.borderStyle="solid";break;case c.AnnotationBorderStyleType.DASHED:C.style.borderStyle="dashed";break;case c.AnnotationBorderStyleType.BEVELED:(0,c.warn)("Unimplemented border style: beveled");break;case c.AnnotationBorderStyleType.INSET:(0,c.warn)("Unimplemented border style: inset");break;case c.AnnotationBorderStyleType.UNDERLINE:C.style.borderBottomStyle="solid";break}const _t=i.borderColor||null;_t?C.style.borderColor=c.Util.makeHexColor(_t[0]|0,_t[1]|0,_t[2]|0):C.style.borderWidth=0}C.style.left=`${100*(rt[0]-K)/G}%`,C.style.top=`${100*(rt[1]-it)/nt}%`;const{rotation:ut}=i;return i.hasOwnCanvas||ut===0?(C.style.width=`${100*at/G}%`,C.style.height=`${100*et/nt}%`):this.setRotation(ut,C),C}setRotation(t,i=this.container){const{pageWidth:m,pageHeight:S}=this.viewport.rawDims,{width:C,height:G}=I(this.data.rect);let nt,K;t%180===0?(nt=100*C/m,K=100*G/S):(nt=100*G/m,K=100*C/S),i.style.width=`${nt}%`,i.style.height=`${K}%`,i.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(i,m,S)=>{const C=S.detail[i];S.target.style[m]=q.ColorConverters[`${C[0]}_HTML`](C.slice(1))};return(0,c.shadow)(this,"_commonActions",{display:i=>{const m=i.detail.display%2===1;this.container.style.visibility=m?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:m,print:i.detail.display===0||i.detail.display===3})},print:i=>{this.annotationStorage.setValue(this.data.id,{print:i.detail.print})},hidden:i=>{this.container.style.visibility=i.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:i.detail.hidden})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.detail.readonly?i.target.setAttribute("readonly",""):i.target.removeAttribute("readonly")},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)},rotation:i=>{const m=i.detail.rotation;this.setRotation(m),this.annotationStorage.setValue(this.data.id,{rotation:m})}})}_dispatchEventFromSandbox(t,i){const m=this._commonActions;for(const S of Object.keys(i.detail)){const C=t[S]||m[S];C==null||C(i)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const m=this._commonActions;for(const[S,C]of Object.entries(i)){const G=m[S];if(G){const nt={detail:{[S]:C},target:t};G(nt),delete i[S]}}}_createQuadrilaterals(t=!1){if(!this.data.quadPoints)return null;const i=[],m=this.data.rect;for(const S of this.data.quadPoints)this.data.rect=[S[2].x,S[2].y,S[1].x,S[1].y],i.push(this._createContainer(t));return this.data.rect=m,i}_createPopup(t,i){let m=this.container;this.quadrilaterals&&(t||(t=this.quadrilaterals),m=this.quadrilaterals[0]),t||(t=document.createElement("div"),t.classList.add("popupTriggerArea"),m.append(t));const C=new l({container:m,trigger:t,color:i.color,titleObj:i.titleObj,modificationDate:i.modificationDate,contentsObj:i.contentsObj,richText:i.richText,hideWrapper:!0}).render();C.style.left="100%",m.append(C)}_renderQuadrilaterals(t){for(const i of this.quadrilaterals)i.classList.add(t);return this.quadrilaterals}render(){(0,c.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const m=[];if(this._fieldObjects){const S=this._fieldObjects[t];if(S)for(const{page:C,id:G,exportValues:nt}of S){if(C===-1||G===i)continue;const K=typeof nt=="string"?nt:null,it=document.querySelector(`[data-element-id="${G}"]`);if(it&&!_.has(it)){(0,c.warn)(`_getElementsByName - element not allowed: ${G}`);continue}m.push({id:G,exportValue:K,domElement:it})}return m}for(const S of document.getElementsByName(t)){const{exportValue:C}=S,G=S.getAttribute("data-element-id");G!==i&&_.has(S)&&m.push({id:G,exportValue:C,domElement:S})}return m}}class f extends x{constructor(i,m=null){super(i,{isRenderable:!0,ignoreBorder:!!(m!=null&&m.ignoreBorder),createQuadrilaterals:!0});Z(this,yt);Z(this,d);this.isTooltipOnly=i.data.isTooltipOnly}render(){const{data:i,linkService:m}=this,S=document.createElement("a");S.setAttribute("data-element-id",i.id);let C=!1;return i.url?(m.addLinkAttributes(S,i.url,i.newWindow),C=!0):i.action?(this._bindNamedAction(S,i.action),C=!0):i.attachment?(this._bindAttachment(S,i.attachment),C=!0):i.setOCGState?(st(this,d,sn).call(this,S,i.setOCGState),C=!0):i.dest?(this._bindLink(S,i.dest),C=!0):(i.actions&&(i.actions.Action||i.actions["Mouse Up"]||i.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(S,i),C=!0),i.resetForm?(this._bindResetFormAction(S,i.resetForm),C=!0):this.isTooltipOnly&&!C&&(this._bindLink(S,""),C=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((G,nt)=>{const K=nt===0?S:S.cloneNode();return G.append(K),G}):(this.container.classList.add("linkAnnotation"),C&&this.container.append(S),this.container)}_bindLink(i,m){i.href=this.linkService.getDestinationHash(m),i.onclick=()=>(m&&this.linkService.goToDestination(m),!1),(m||m==="")&&st(this,yt,Yt).call(this)}_bindNamedAction(i,m){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeNamedAction(m),!1),st(this,yt,Yt).call(this)}_bindAttachment(i,m){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>{var S;return(S=this.downloadManager)==null||S.openOrDownloadData(this.container,m.content,m.filename),!1},st(this,yt,Yt).call(this)}_bindJSAction(i,m){i.href=this.linkService.getAnchorUrl("");const S=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const C of Object.keys(m.actions)){const G=S.get(C);G&&(i[G]=()=>{var nt;return(nt=this.linkService.eventBus)==null||nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:m.id,name:C}}),!1})}i.onclick||(i.onclick=()=>!1),st(this,yt,Yt).call(this)}_bindResetFormAction(i,m){const S=i.onclick;if(S||(i.href=this.linkService.getAnchorUrl("")),st(this,yt,Yt).call(this),!this._fieldObjects){(0,c.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),S||(i.onclick=()=>!1);return}i.onclick=()=>{var et;S==null||S();const{fields:C,refs:G,include:nt}=m,K=[];if(C.length!==0||G.length!==0){const rt=new Set(G);for(const ut of C){const ft=this._fieldObjects[ut]||[];for(const{id:Et}of ft)rt.add(Et)}for(const ut of Object.values(this._fieldObjects))for(const ft of ut)rt.has(ft.id)===nt&&K.push(ft)}else for(const rt of Object.values(this._fieldObjects))K.push(...rt);const it=this.annotationStorage,at=[];for(const rt of K){const{id:ut}=rt;switch(at.push(ut),rt.type){case"text":{const Et=rt.defaultValue||"";it.setValue(ut,{value:Et});break}case"checkbox":case"radiobutton":{const Et=rt.defaultValue===rt.exportValues;it.setValue(ut,{value:Et});break}case"combobox":case"listbox":{const Et=rt.defaultValue||"";it.setValue(ut,{value:Et});break}default:continue}const ft=document.querySelector(`[data-element-id="${ut}"]`);if(ft){if(!_.has(ft)){(0,c.warn)(`_bindResetFormAction - element not allowed: ${ut}`);continue}}else continue;ft.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((et=this.linkService.eventBus)==null||et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:at,name:"ResetForm"}})),!1}}}yt=new WeakSet,Yt=function(){this.container.setAttribute("data-internal-link","")},d=new WeakSet,sn=function(i,m){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeSetOCGState(m),!1),st(this,yt,Yt).call(this)};class u extends x{constructor(t){var m,S,C;const i=!!(t.data.hasPopup||(m=t.data.titleObj)!=null&&m.str||(S=t.data.contentsObj)!=null&&S.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:i})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.append(t),this.container}}class a extends x{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(t){var i;this.data.hasOwnCanvas&&(((i=t.previousSibling)==null?void 0:i.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){const{isWin:i,isMac:m}=c.FeatureTest.platform;return i&&t.ctrlKey||m&&t.metaKey}_setEventListener(t,i,m,S){i.includes("mouse")?t.addEventListener(i,C=>{var G;(G=this.linkService.eventBus)==null||G.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:m,value:S(C),shift:C.shiftKey,modifier:this._getKeyModifier(C)}})}):t.addEventListener(i,C=>{var G;(G=this.linkService.eventBus)==null||G.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:m,value:S(C)}})})}_setEventListeners(t,i,m){var S;for(const[C,G]of i)(G==="Action"||(S=this.data.actions)!=null&&S[G])&&this._setEventListener(t,C,G,m)}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":c.Util.makeHexColor(i[0],i[1],i[2])}_setTextStyle(t){const i=["left","center","right"],{fontColor:m}=this.data.defaultAppearanceData,S=this.data.defaultAppearanceData.fontSize||k,C=t.style;let G;const nt=2,K=it=>Math.round(10*it)/10;if(this.data.multiLine){const it=Math.abs(this.data.rect[3]-this.data.rect[1]-nt),at=Math.round(it/(c.LINE_FACTOR*S))||1,et=it/at;G=Math.min(S,K(et/c.LINE_FACTOR))}else{const it=Math.abs(this.data.rect[3]-this.data.rect[1]-nt);G=Math.min(S,K(it/c.LINE_FACTOR))}C.fontSize=`calc(${G}px * var(--scale-factor))`,C.color=c.Util.makeHexColor(m[0],m[1],m[2]),this.data.textAlignment!==null&&(C.textAlign=i[this.data.textAlignment])}_setRequired(t,i){i?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",i)}}class y extends a{constructor(t){const i=t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,m,S){const C=this.annotationStorage;for(const G of this._getElementsByName(t.name,t.id))G.domElement&&(G.domElement[i]=m),C.setValue(G.id,{[S]:m})}render(){var S;const t=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let m=null;if(this.renderForms){const C=t.getValue(i,{value:this.data.fieldValue});let G=C.formattedValue||C.value||"";const nt=t.getValue(i,{charLimit:this.data.maxLen}).charLimit;nt&&G.length>nt&&(G=G.slice(0,nt));const K={userValue:G,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(m=document.createElement("textarea"),m.textContent=G,this.data.doNotScroll&&(m.style.overflowY="hidden")):(m=document.createElement("input"),m.type="text",m.setAttribute("value",G),this.data.doNotScroll&&(m.style.overflowX="hidden")),this.data.hasOwnCanvas&&(m.hidden=!0),_.add(m),m.setAttribute("data-element-id",i),m.disabled=this.data.readOnly,m.name=this.data.fieldName,m.tabIndex=L,this._setRequired(m,this.data.required),nt&&(m.maxLength=nt),m.addEventListener("input",at=>{t.setValue(i,{value:at.target.value}),this.setPropertyOnSiblings(m,"value",at.target.value,"value")}),m.addEventListener("resetform",at=>{const et=this.data.defaultFieldValue??"";m.value=K.userValue=et,K.formattedValue=null});let it=at=>{const{formattedValue:et}=K;et!=null&&(at.target.value=et),at.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){m.addEventListener("focus",et=>{const{target:rt}=et;K.userValue&&(rt.value=K.userValue),K.lastCommittedValue=rt.value,K.commitKey=1}),m.addEventListener("updatefromsandbox",et=>{this.showElementAndHideCanvas(et.target);const rt={value(ut){K.userValue=ut.detail.value??"",t.setValue(i,{value:K.userValue.toString()}),ut.target.value=K.userValue},formattedValue(ut){const{formattedValue:ft}=ut.detail;K.formattedValue=ft,ft!=null&&ut.target!==document.activeElement&&(ut.target.value=ft),t.setValue(i,{formattedValue:ft})},selRange(ut){ut.target.setSelectionRange(...ut.detail.selRange)},charLimit:ut=>{var Tt;const{charLimit:ft}=ut.detail,{target:Et}=ut;if(ft===0){Et.removeAttribute("maxLength");return}Et.setAttribute("maxLength",ft);let _t=K.userValue;!_t||_t.length<=ft||(_t=_t.slice(0,ft),Et.value=K.userValue=_t,t.setValue(i,{value:_t}),(Tt=this.linkService.eventBus)==null||Tt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:_t,willCommit:!0,commitKey:1,selStart:Et.selectionStart,selEnd:Et.selectionEnd}}))}};this._dispatchEventFromSandbox(rt,et)}),m.addEventListener("keydown",et=>{var ft;K.commitKey=1;let rt=-1;if(et.key==="Escape"?rt=0:et.key==="Enter"&&!this.data.multiLine?rt=2:et.key==="Tab"&&(K.commitKey=3),rt===-1)return;const{value:ut}=et.target;K.lastCommittedValue!==ut&&(K.lastCommittedValue=ut,K.userValue=ut,(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:ut,willCommit:!0,commitKey:rt,selStart:et.target.selectionStart,selEnd:et.target.selectionEnd}}))});const at=it;it=null,m.addEventListener("blur",et=>{var ut;if(!et.relatedTarget)return;const{value:rt}=et.target;K.userValue=rt,K.lastCommittedValue!==rt&&((ut=this.linkService.eventBus)==null||ut.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:rt,willCommit:!0,commitKey:K.commitKey,selStart:et.target.selectionStart,selEnd:et.target.selectionEnd}})),at(et)}),(S=this.data.actions)!=null&&S.Keystroke&&m.addEventListener("beforeinput",et=>{var bt;K.lastCommittedValue=null;const{data:rt,target:ut}=et,{value:ft,selectionStart:Et,selectionEnd:_t}=ut;let Tt=Et,Y=_t;switch(et.inputType){case"deleteWordBackward":{const vt=ft.substring(0,Et).match(/\w*[^\w]*$/);vt&&(Tt-=vt[0].length);break}case"deleteWordForward":{const vt=ft.substring(Et).match(/^[^\w]*\w*/);vt&&(Y+=vt[0].length);break}case"deleteContentBackward":Et===_t&&(Tt-=1);break;case"deleteContentForward":Et===_t&&(Y+=1);break}et.preventDefault(),(bt=this.linkService.eventBus)==null||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:ft,change:rt||"",willCommit:!1,selStart:Tt,selEnd:Y}})}),this._setEventListeners(m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],et=>et.target.value)}if(it&&m.addEventListener("blur",it),this.data.comb){const et=(this.data.rect[2]-this.data.rect[0])/nt;m.classList.add("comb"),m.style.letterSpacing=`calc(${et}px * var(--scale-factor) - 1ch)`}}else m=document.createElement("div"),m.textContent=this.data.fieldValue,m.style.verticalAlign="middle",m.style.display="table-cell";return this._setTextStyle(m),this._setBackgroundColor(m),this._setDefaultPropertiesFromJS(m),this.container.append(m),this.container}}class v extends a{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,m=i.id;let S=t.getValue(m,{value:i.exportValue===i.fieldValue}).value;typeof S=="string"&&(S=S!=="Off",t.setValue(m,{value:S})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const C=document.createElement("input");return _.add(C),C.setAttribute("data-element-id",m),C.disabled=i.readOnly,this._setRequired(C,this.data.required),C.type="checkbox",C.name=i.fieldName,S&&C.setAttribute("checked",!0),C.setAttribute("exportValue",i.exportValue),C.tabIndex=L,C.addEventListener("change",G=>{const{name:nt,checked:K}=G.target;for(const it of this._getElementsByName(nt,m)){const at=K&&it.exportValue===i.exportValue;it.domElement&&(it.domElement.checked=at),t.setValue(it.id,{value:at})}t.setValue(m,{value:K})}),C.addEventListener("resetform",G=>{const nt=i.defaultFieldValue||"Off";G.target.checked=nt===i.exportValue}),this.enableScripting&&this.hasJSActions&&(C.addEventListener("updatefromsandbox",G=>{const nt={value(K){K.target.checked=K.detail.value!=="Off",t.setValue(m,{value:K.target.checked})}};this._dispatchEventFromSandbox(nt,G)}),this._setEventListeners(C,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],G=>G.target.checked)),this._setBackgroundColor(C),this._setDefaultPropertiesFromJS(C),this.container.append(C),this.container}}class P extends a{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,i=this.data,m=i.id;let S=t.getValue(m,{value:i.fieldValue===i.buttonValue}).value;typeof S=="string"&&(S=S!==i.buttonValue,t.setValue(m,{value:S}));const C=document.createElement("input");if(_.add(C),C.setAttribute("data-element-id",m),C.disabled=i.readOnly,this._setRequired(C,this.data.required),C.type="radio",C.name=i.fieldName,S&&C.setAttribute("checked",!0),C.tabIndex=L,C.addEventListener("change",G=>{const{name:nt,checked:K}=G.target;for(const it of this._getElementsByName(nt,m))t.setValue(it.id,{value:!1});t.setValue(m,{value:K})}),C.addEventListener("resetform",G=>{const nt=i.defaultFieldValue;G.target.checked=nt!=null&&nt===i.buttonValue}),this.enableScripting&&this.hasJSActions){const G=i.buttonValue;C.addEventListener("updatefromsandbox",nt=>{const K={value:it=>{const at=G===it.detail.value;for(const et of this._getElementsByName(it.target.name)){const rt=at&&et.id===m;et.domElement&&(et.domElement.checked=rt),t.setValue(et.id,{value:rt})}}};this._dispatchEventFromSandbox(K,nt)}),this._setEventListeners(C,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],nt=>nt.target.checked)}return this._setBackgroundColor(C),this._setDefaultPropertiesFromJS(C),this.container.append(C),this.container}}class g extends f{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(t.title=this.data.alternativeText);const i=t.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",m=>{this._dispatchEventFromSandbox({},m)})),t}}class e extends a{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,i=this.data.id,m=t.getValue(i,{value:this.data.fieldValue}),S=document.createElement("select");_.add(S),S.setAttribute("data-element-id",i),S.disabled=this.data.readOnly,this._setRequired(S,this.data.required),S.name=this.data.fieldName,S.tabIndex=L;let C=this.data.combo&&this.data.options.length>0;this.data.combo||(S.size=this.data.options.length,this.data.multiSelect&&(S.multiple=!0)),S.addEventListener("resetform",at=>{const et=this.data.defaultFieldValue;for(const rt of S.options)rt.selected=rt.value===et});for(const at of this.data.options){const et=document.createElement("option");et.textContent=at.displayValue,et.value=at.exportValue,m.value.includes(at.exportValue)&&(et.setAttribute("selected",!0),C=!1),S.append(et)}let G=null;if(C){const at=document.createElement("option");at.value=" ",at.setAttribute("hidden",!0),at.setAttribute("selected",!0),S.prepend(at),G=()=>{at.remove(),S.removeEventListener("input",G),G=null},S.addEventListener("input",G)}const nt=at=>{const et=at?"value":"textContent",{options:rt,multiple:ut}=S;return ut?Array.prototype.filter.call(rt,ft=>ft.selected).map(ft=>ft[et]):rt.selectedIndex===-1?null:rt[rt.selectedIndex][et]};let K=nt(!1);const it=at=>{const et=at.target.options;return Array.prototype.map.call(et,rt=>({displayValue:rt.textContent,exportValue:rt.value}))};return this.enableScripting&&this.hasJSActions?(S.addEventListener("updatefromsandbox",at=>{const et={value(rt){G==null||G();const ut=rt.detail.value,ft=new Set(Array.isArray(ut)?ut:[ut]);for(const Et of S.options)Et.selected=ft.has(Et.value);t.setValue(i,{value:nt(!0)}),K=nt(!1)},multipleSelection(rt){S.multiple=!0},remove(rt){const ut=S.options,ft=rt.detail.remove;ut[ft].selected=!1,S.remove(ft),ut.length>0&&Array.prototype.findIndex.call(ut,_t=>_t.selected)===-1&&(ut[0].selected=!0),t.setValue(i,{value:nt(!0),items:it(rt)}),K=nt(!1)},clear(rt){for(;S.length!==0;)S.remove(0);t.setValue(i,{value:null,items:[]}),K=nt(!1)},insert(rt){const{index:ut,displayValue:ft,exportValue:Et}=rt.detail.insert,_t=S.children[ut],Tt=document.createElement("option");Tt.textContent=ft,Tt.value=Et,_t?_t.before(Tt):S.append(Tt),t.setValue(i,{value:nt(!0),items:it(rt)}),K=nt(!1)},items(rt){const{items:ut}=rt.detail;for(;S.length!==0;)S.remove(0);for(const ft of ut){const{displayValue:Et,exportValue:_t}=ft,Tt=document.createElement("option");Tt.textContent=Et,Tt.value=_t,S.append(Tt)}S.options.length>0&&(S.options[0].selected=!0),t.setValue(i,{value:nt(!0),items:it(rt)}),K=nt(!1)},indices(rt){const ut=new Set(rt.detail.indices);for(const ft of rt.target.options)ft.selected=ut.has(ft.index);t.setValue(i,{value:nt(!0)}),K=nt(!1)},editable(rt){rt.target.disabled=!rt.detail.editable}};this._dispatchEventFromSandbox(et,at)}),S.addEventListener("input",at=>{var rt;const et=nt(!0);t.setValue(i,{value:et}),at.preventDefault(),(rt=this.linkService.eventBus)==null||rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:K,changeEx:et,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(S,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],at=>at.target.value)):S.addEventListener("input",function(at){t.setValue(i,{value:nt(!0)})}),this.data.combo&&this._setTextStyle(S),this._setBackgroundColor(S),this._setDefaultPropertiesFromJS(S),this.container.append(S),this.container}}const E=class E extends x{constructor(t){var S,C,G;const{data:i}=t,m=!E.IGNORE_TYPES.has(i.parentType)&&!!((S=i.titleObj)!=null&&S.str||(C=i.contentsObj)!=null&&C.str||(G=i.richText)!=null&&G.str);super(t,{isRenderable:m})}render(){this.container.classList.add("popupAnnotation");const t=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(t.length===0)return this.container;const i=new l({container:this.container,trigger:Array.from(t),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),m=this.page,S=c.Util.normalizeRect([this.data.parentRect[0],m.view[3]-this.data.parentRect[1]+m.view[1],this.data.parentRect[2],m.view[3]-this.data.parentRect[3]+m.view[1]]),C=S[0]+this.data.parentRect[2]-this.data.parentRect[0],G=S[1],{pageWidth:nt,pageHeight:K,pageX:it,pageY:at}=this.viewport.rawDims;return this.container.style.left=`${100*(C-it)/nt}%`,this.container.style.top=`${100*(G-at)/K}%`,this.container.append(i.render()),this.container}};Dt(E,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));let o=E;class l{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){var nt,K;const i=document.createElement("div");i.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?i:this.container,this.hideElement.hidden=!0;const m=document.createElement("div");m.classList.add("popup");const S=this.color;if(S){const it=.7*(255-S[0])+S[0],at=.7*(255-S[1])+S[1],et=.7*(255-S[2])+S[2];m.style.backgroundColor=c.Util.makeHexColor(it|0,at|0,et|0)}const C=document.createElement("h1");C.dir=this.titleObj.dir,C.textContent=this.titleObj.str,m.append(C);const G=A.PDFDateString.toDateObject(this.modificationDate);if(G){const it=document.createElement("span");it.classList.add("popupDate"),it.textContent="{{date}}, {{time}}",it.dataset.l10nId="annotation_date_string",it.dataset.l10nArgs=JSON.stringify({date:G.toLocaleDateString(),time:G.toLocaleTimeString()}),m.append(it)}if((nt=this.richText)!=null&&nt.str&&(!((K=this.contentsObj)!=null&&K.str)||this.contentsObj.str===this.richText.str))Q.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:m}),m.lastChild.classList.add("richText","popupContent");else{const it=this._formatContents(this.contentsObj);m.append(it)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const it of this.trigger)it.addEventListener("click",this._toggle.bind(this)),it.addEventListener("mouseover",this._show.bind(this,!1)),it.addEventListener("mouseout",this._hide.bind(this,!1));return m.addEventListener("click",this._hide.bind(this,!0)),i.append(m),i}_formatContents({str:t,dir:i}){const m=document.createElement("p");m.classList.add("popupContent"),m.dir=i;const S=t.split(/(?:\r\n?|\n)/);for(let C=0,G=S.length;C<G;++C){const nt=S[C];m.append(document.createTextNode(nt)),C<G-1&&m.append(document.createElement("br"))}return m}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(t=!0){t&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class s extends x{constructor(t){var m,S,C;const i=!!(t.data.hasPopup||(m=t.data.titleObj)!=null&&m.str||(S=t.data.contentsObj)!=null&&S.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:i,ignoreBorder:!0}),this.textContent=t.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){const m=document.createElement("span");m.textContent=i,t.append(m)}this.container.append(t)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class h extends x{constructor(t){var m,S,C;const i=!!(t.data.hasPopup||(m=t.data.titleObj)!=null&&m.str||(S=t.data.contentsObj)!=null&&S.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:i,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:m}=I(t.rect),S=this.svgFactory.create(i,m,!0),C=this.svgFactory.createElement("svg:line");return C.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),C.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),C.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),C.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),C.setAttribute("stroke-width",t.borderStyle.width||1),C.setAttribute("stroke","transparent"),C.setAttribute("fill","transparent"),S.append(C),this.container.append(S),this._createPopup(C,t),this.container}}class R extends x{constructor(t){var m,S,C;const i=!!(t.data.hasPopup||(m=t.data.titleObj)!=null&&m.str||(S=t.data.contentsObj)!=null&&S.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:i,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:m}=I(t.rect),S=this.svgFactory.create(i,m,!0),C=t.borderStyle.width,G=this.svgFactory.createElement("svg:rect");return G.setAttribute("x",C/2),G.setAttribute("y",C/2),G.setAttribute("width",i-C),G.setAttribute("height",m-C),G.setAttribute("stroke-width",C||1),G.setAttribute("stroke","transparent"),G.setAttribute("fill","transparent"),S.append(G),this.container.append(S),this._createPopup(G,t),this.container}}class n extends x{constructor(t){var m,S,C;const i=!!(t.data.hasPopup||(m=t.data.titleObj)!=null&&m.str||(S=t.data.contentsObj)!=null&&S.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:i,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:m}=I(t.rect),S=this.svgFactory.create(i,m,!0),C=t.borderStyle.width,G=this.svgFactory.createElement("svg:ellipse");return G.setAttribute("cx",i/2),G.setAttribute("cy",m/2),G.setAttribute("rx",i/2-C/2),G.setAttribute("ry",m/2-C/2),G.setAttribute("stroke-width",C||1),G.setAttribute("stroke","transparent"),G.setAttribute("fill","transparent"),S.append(G),this.container.append(S),this._createPopup(G,t),this.container}}class B extends x{constructor(t){var m,S,C;const i=!!(t.data.hasPopup||(m=t.data.titleObj)!=null&&m.str||(S=t.data.contentsObj)!=null&&S.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:i,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:i,height:m}=I(t.rect),S=this.svgFactory.create(i,m,!0);let C=[];for(const nt of t.vertices){const K=nt.x-t.rect[0],it=t.rect[3]-nt.y;C.push(K+","+it)}C=C.join(" ");const G=this.svgFactory.createElement(this.svgElementName);return G.setAttribute("points",C),G.setAttribute("stroke-width",t.borderStyle.width||1),G.setAttribute("stroke","transparent"),G.setAttribute("fill","transparent"),S.append(G),this.container.append(S),this._createPopup(G,t),this.container}}class V extends B{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class z extends x{constructor(t){var m,S,C;const i=!!(t.data.hasPopup||(m=t.data.titleObj)!=null&&m.str||(S=t.data.contentsObj)!=null&&S.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:i,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class J extends x{constructor(t){var m,S,C;const i=!!(t.data.hasPopup||(m=t.data.titleObj)!=null&&m.str||(S=t.data.contentsObj)!=null&&S.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:i,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:i,height:m}=I(t.rect),S=this.svgFactory.create(i,m,!0);for(const C of t.inkLists){let G=[];for(const K of C){const it=K.x-t.rect[0],at=t.rect[3]-K.y;G.push(`${it},${at}`)}G=G.join(" ");const nt=this.svgFactory.createElement(this.svgElementName);nt.setAttribute("points",G),nt.setAttribute("stroke-width",t.borderStyle.width||1),nt.setAttribute("stroke","transparent"),nt.setAttribute("fill","transparent"),this._createPopup(nt,t),S.append(nt)}return this.container.append(S),this.container}}class tt extends x{constructor(t){var m,S,C;const i=!!(t.data.hasPopup||(m=t.data.titleObj)!=null&&m.str||(S=t.data.contentsObj)!=null&&S.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class dt extends x{constructor(t){var m,S,C;const i=!!(t.data.hasPopup||(m=t.data.titleObj)!=null&&m.str||(S=t.data.contentsObj)!=null&&S.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class ot extends x{constructor(t){var m,S,C;const i=!!(t.data.hasPopup||(m=t.data.titleObj)!=null&&m.str||(S=t.data.contentsObj)!=null&&S.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class ct extends x{constructor(t){var m,S,C;const i=!!(t.data.hasPopup||(m=t.data.titleObj)!=null&&m.str||(S=t.data.contentsObj)!=null&&S.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class gt extends x{constructor(t){var m,S,C;const i=!!(t.data.hasPopup||(m=t.data.titleObj)!=null&&m.str||(S=t.data.contentsObj)!=null&&S.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:i,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class At extends x{constructor(t){var S;super(t,{isRenderable:!0});const{filename:i,content:m}=this.data.file;this.filename=(0,A.getFilenameFromUrl)(i,!0),this.content=m,(S=this.linkService.eventBus)==null||S.dispatch("fileattachmentannotation",{source:this,filename:i,content:m})}render(){var i,m;this.container.classList.add("fileAttachmentAnnotation");let t;return this.data.hasAppearance?t=document.createElement("div"):(t=document.createElement("img"),t.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),t.classList.add("popupTriggerArea"),t.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((i=this.data.titleObj)!=null&&i.str||(m=this.data.contentsObj)!=null&&m.str||this.data.richText)&&this._createPopup(t,this.data),this.container.append(t),this.container}_download(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.container,this.content,this.filename)}}const F=class F{static render(t){var K,it;const{annotations:i,div:m,viewport:S,accessibilityManager:C}=t;(0,A.setLayerDimensions)(m,S);const G={data:null,layer:m,page:t.page,viewport:S,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new A.DOMSVGFactory,annotationStorage:t.annotationStorage||new W.AnnotationStorage,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects};let nt=0;for(const at of i){if(at.noHTML)continue;if(at.annotationType!==c.AnnotationType.POPUP){const{width:ut,height:ft}=I(at.rect);if(ut<=0||ft<=0)continue}G.data=at;const et=T.create(G);if(!et.isRenderable)continue;const rt=et.render();if(at.hidden&&(rt.style.visibility="hidden"),Array.isArray(rt))for(const ut of rt)ut.style.zIndex=nt++,st(K=F,H,ke).call(K,ut,at.id,m,C);else rt.style.zIndex=nt++,et instanceof o?m.prepend(rt):st(it=F,H,ke).call(it,rt,at.id,m,C)}st(this,X,Fe).call(this,m,t.annotationCanvasMap)}static update(t){const{annotationCanvasMap:i,div:m,viewport:S}=t;(0,A.setLayerDimensions)(m,{rotation:S.rotation}),st(this,X,Fe).call(this,m,i),m.hidden=!1}};H=new WeakSet,ke=function(t,i,m,S){const C=t.firstChild||t;C.id=`${A.AnnotationPrefix}${i}`,m.append(t),S==null||S.moveElementInDOM(m,t,C,!1)},X=new WeakSet,Fe=function(t,i){if(i){for(const[m,S]of i){const C=t.querySelector(`[data-annotation-id="${m}"]`);if(!C)continue;const{firstChild:G}=C;G?G.nodeName==="CANVAS"?G.replaceWith(S):G.before(S):C.append(S)}i.clear()}},Z(F,H),Z(F,X);let St=F;r.AnnotationLayer=St},(N,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorConverters=void 0;function j(A){return Math.floor(Math.max(0,Math.min(1,A))*255).toString(16).padStart(2,"0")}class c{static CMYK_G([W,q,Q,L]){return["G",1-Math.min(1,.3*W+.59*Q+.11*q+L)]}static G_CMYK([W]){return["CMYK",0,0,0,1-W]}static G_RGB([W]){return["RGB",W,W,W]}static G_HTML([W]){const q=j(W);return`#${q}${q}${q}`}static RGB_G([W,q,Q]){return["G",.3*W+.59*q+.11*Q]}static RGB_HTML([W,q,Q]){const L=j(W),k=j(q),_=j(Q);return`#${L}${k}${_}`}static T_HTML(){return"#00000000"}static CMYK_RGB([W,q,Q,L]){return["RGB",1-Math.min(1,W+L),1-Math.min(1,Q+L),1-Math.min(1,q+L)]}static CMYK_HTML(W){const q=this.CMYK_RGB(W).slice(1);return this.RGB_HTML(q)}static RGB_CMYK([W,q,Q]){const L=1-W,k=1-q,_=1-Q,I=Math.min(L,k,_);return["CMYK",L,k,_,I]}}r.ColorConverters=c},(N,r,j)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.XfaLayer=void 0;var c=j(19);class A{static setupStorage(q,Q,L,k,_){const I=k.getValue(Q,{value:null});switch(L.name){case"textarea":if(I.value!==null&&(q.textContent=I.value),_==="print")break;q.addEventListener("input",T=>{k.setValue(Q,{value:T.target.value})});break;case"input":if(L.attributes.type==="radio"||L.attributes.type==="checkbox"){if(I.value===L.attributes.xfaOn?q.setAttribute("checked",!0):I.value===L.attributes.xfaOff&&q.removeAttribute("checked"),_==="print")break;q.addEventListener("change",T=>{k.setValue(Q,{value:T.target.checked?T.target.getAttribute("xfaOn"):T.target.getAttribute("xfaOff")})})}else{if(I.value!==null&&q.setAttribute("value",I.value),_==="print")break;q.addEventListener("input",T=>{k.setValue(Q,{value:T.target.value})})}break;case"select":if(I.value!==null)for(const T of L.children)T.attributes.value===I.value&&(T.attributes.selected=!0);q.addEventListener("input",T=>{const x=T.target.options,f=x.selectedIndex===-1?"":x[x.selectedIndex].value;k.setValue(Q,{value:f})});break}}static setAttributes({html:q,element:Q,storage:L=null,intent:k,linkService:_}){const{attributes:I}=Q,T=q instanceof HTMLAnchorElement;I.type==="radio"&&(I.name=`${I.name}-${k}`);for(const[x,f]of Object.entries(I))if(f!=null)switch(x){case"class":f.length&&q.setAttribute(x,f.join(" "));break;case"dataId":break;case"id":q.setAttribute("data-element-id",f);break;case"style":Object.assign(q.style,f);break;case"textContent":q.textContent=f;break;default:(!T||x!=="href"&&x!=="newWindow")&&q.setAttribute(x,f)}T&&_.addLinkAttributes(q,I.href,I.newWindow),L&&I.dataId&&this.setupStorage(q,I.dataId,Q,L)}static render(q){var u;const Q=q.annotationStorage,L=q.linkService,k=q.xfaHtml,_=q.intent||"display",I=document.createElement(k.name);k.attributes&&this.setAttributes({html:I,element:k,intent:_,linkService:L});const T=[[k,-1,I]],x=q.div;if(x.append(I),q.viewport){const a=`matrix(${q.viewport.transform.join(",")})`;x.style.transform=a}_!=="richText"&&x.setAttribute("class","xfaLayer xfaFont");const f=[];for(;T.length>0;){const[a,y,v]=T.at(-1);if(y+1===a.children.length){T.pop();continue}const P=a.children[++T.at(-1)[1]];if(P===null)continue;const{name:g}=P;if(g==="#text"){const o=document.createTextNode(P.value);f.push(o),v.append(o);continue}let e;if((u=P==null?void 0:P.attributes)!=null&&u.xmlns?e=document.createElementNS(P.attributes.xmlns,g):e=document.createElement(g),v.append(e),P.attributes&&this.setAttributes({html:e,element:P,storage:Q,intent:_,linkService:L}),P.children&&P.children.length>0)T.push([P,-1,e]);else if(P.value){const o=document.createTextNode(P.value);c.XfaText.shouldBuildText(g)&&f.push(o),e.append(o)}}for(const a of x.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))a.setAttribute("readOnly",!0);return{textDivs:f}}static update(q){const Q=`matrix(${q.viewport.transform.join(",")})`;q.div.style.transform=Q,q.div.hidden=!1}}r.XfaLayer=A},(N,r,j)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SVGGraphics=void 0;var c=j(6),A=j(1),W=j(10);let q=class{constructor(){(0,A.unreachable)("Not implemented: SVGGraphics")}};r.SVGGraphics=q;{let u=function(e){let o=[];const l=[];for(const s of e){if(s.fn==="save"){o.push({fnId:92,fn:"group",items:[]}),l.push(o),o=o.at(-1).items;continue}s.fn==="restore"?o=l.pop():o.push(s)}return o},a=function(e){if(Number.isInteger(e))return e.toString();const o=e.toFixed(10);let l=o.length-1;if(o[l]!=="0")return o;do l--;while(o[l]==="0");return o.substring(0,o[l]==="."?l:l+1)},y=function(e){if(e[4]===0&&e[5]===0){if(e[1]===0&&e[2]===0)return e[0]===1&&e[3]===1?"":`scale(${a(e[0])} ${a(e[3])})`;if(e[0]===e[3]&&e[1]===-e[2]){const o=Math.acos(e[0])*180/Math.PI;return`rotate(${a(o)})`}}else if(e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1)return`translate(${a(e[4])} ${a(e[5])})`;return`matrix(${a(e[0])} ${a(e[1])} ${a(e[2])} ${a(e[3])} ${a(e[4])} ${a(e[5])})`};const Q={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},L="http://www.w3.org/XML/1998/namespace",k="http://www.w3.org/1999/xlink",_=["butt","round","square"],I=["miter","round","bevel"],T=function(e,o="",l=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!l)return URL.createObjectURL(new Blob([e],{type:o}));const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let h=`data:${o};base64,`;for(let R=0,n=e.length;R<n;R+=3){const B=e[R]&255,V=e[R+1]&255,z=e[R+2]&255,J=B>>2,tt=(B&3)<<4|V>>4,dt=R+1<n?(V&15)<<2|z>>6:64,ot=R+2<n?z&63:64;h+=s[J]+s[tt]+s[dt]+s[ot]}return h},x=function(){const e=new Uint8Array([137,80,78,71,13,10,26,10]),o=12,l=new Int32Array(256);for(let z=0;z<256;z++){let J=z;for(let tt=0;tt<8;tt++)J&1?J=3988292384^J>>1&2147483647:J=J>>1&2147483647;l[z]=J}function s(z,J,tt){let dt=-1;for(let ot=J;ot<tt;ot++){const ct=(dt^z[ot])&255,gt=l[ct];dt=dt>>>8^gt}return dt^-1}function h(z,J,tt,dt){let ot=dt;const ct=J.length;tt[ot]=ct>>24&255,tt[ot+1]=ct>>16&255,tt[ot+2]=ct>>8&255,tt[ot+3]=ct&255,ot+=4,tt[ot]=z.charCodeAt(0)&255,tt[ot+1]=z.charCodeAt(1)&255,tt[ot+2]=z.charCodeAt(2)&255,tt[ot+3]=z.charCodeAt(3)&255,ot+=4,tt.set(J,ot),ot+=J.length;const gt=s(tt,dt+4,ot);tt[ot]=gt>>24&255,tt[ot+1]=gt>>16&255,tt[ot+2]=gt>>8&255,tt[ot+3]=gt&255}function R(z,J,tt){let dt=1,ot=0;for(let ct=J;ct<tt;++ct)dt=(dt+(z[ct]&255))%65521,ot=(ot+dt)%65521;return ot<<16|dt}function n(z){if(!W.isNodeJS)return B(z);try{let J;parseInt(process.versions.node)>=8?J=z:J=Buffer.from(z);const tt=require$$5.deflateSync(J,{level:9});return tt instanceof Uint8Array?tt:new Uint8Array(tt)}catch(J){(0,A.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+J)}return B(z)}function B(z){let J=z.length;const tt=65535,dt=Math.ceil(J/tt),ot=new Uint8Array(2+J+dt*5+4);let ct=0;ot[ct++]=120,ot[ct++]=156;let gt=0;for(;J>tt;)ot[ct++]=0,ot[ct++]=255,ot[ct++]=255,ot[ct++]=0,ot[ct++]=0,ot.set(z.subarray(gt,gt+tt),ct),ct+=tt,gt+=tt,J-=tt;ot[ct++]=1,ot[ct++]=J&255,ot[ct++]=J>>8&255,ot[ct++]=~J&65535&255,ot[ct++]=(~J&65535)>>8&255,ot.set(z.subarray(gt),ct),ct+=z.length-gt;const At=R(z,0,z.length);return ot[ct++]=At>>24&255,ot[ct++]=At>>16&255,ot[ct++]=At>>8&255,ot[ct++]=At&255,ot}function V(z,J,tt,dt){const ot=z.width,ct=z.height;let gt,At,St;const yt=z.data;switch(J){case A.ImageKind.GRAYSCALE_1BPP:At=0,gt=1,St=ot+7>>3;break;case A.ImageKind.RGB_24BPP:At=2,gt=8,St=ot*3;break;case A.ImageKind.RGBA_32BPP:At=6,gt=8,St=ot*4;break;default:throw new Error("invalid format")}const $=new Uint8Array((1+St)*ct);let d=0,p=0;for(let F=0;F<ct;++F)$[d++]=0,$.set(yt.subarray(p,p+St),d),p+=St,d+=St;if(J===A.ImageKind.GRAYSCALE_1BPP&&dt){d=0;for(let F=0;F<ct;F++){d++;for(let O=0;O<St;O++)$[d++]^=255}}const E=new Uint8Array([ot>>24&255,ot>>16&255,ot>>8&255,ot&255,ct>>24&255,ct>>16&255,ct>>8&255,ct&255,gt,At,0,0,0]),H=n($),M=e.length+o*3+E.length+H.length,X=new Uint8Array(M);let U=0;return X.set(e,U),U+=e.length,h("IHDR",E,X,U),U+=o+E.length,h("IDATA",H,X,U),U+=o+H.length,h("IEND",new Uint8Array(0),X,U),T(X,"image/png",tt)}return function(J,tt,dt){const ot=J.kind===void 0?A.ImageKind.GRAYSCALE_1BPP:J.kind;return V(J,ot,tt,dt)}}();class f{constructor(){this.fontSizeScale=1,this.fontWeight=Q.fontWeight,this.fontSize=0,this.textMatrix=A.IDENTITY_MATRIX,this.fontMatrix=A.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=A.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Q.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(o,l){this.x=o,this.y=l}}let v=0,P=0,g=0;r.SVGGraphics=q=class{constructor(e,o,l=!1){(0,c.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new c.DOMSVGFactory,this.current=new f,this.transformMatrix=A.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=o,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!l,this._operatorIdMapping=[];for(const s in A.OPS)this._operatorIdMapping[A.OPS[s]]=s}getObject(e,o=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):o}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){const o=e.fnArray,l=e.argsArray;for(let s=0,h=o.length;s<h;s++)if(o[s]===A.OPS.dependency)for(const R of l[s]){const n=R.startsWith("g_")?this.commonObjs:this.objs,B=new Promise(V=>{n.get(R,V)});this.current.dependencies.push(B)}return Promise.all(this.current.dependencies)}transform(e,o,l,s,h,R){const n=[e,o,l,s,h,R];this.transformMatrix=A.Util.transform(this.transformMatrix,n),this.tgrp=null}getSVG(e,o){this.viewport=o;const l=this._initialize(o);return this.loadDependencies(e).then(()=>(this.transformMatrix=A.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),l))}convertOpList(e){const o=this._operatorIdMapping,l=e.argsArray,s=e.fnArray,h=[];for(let R=0,n=s.length;R<n;R++){const B=s[R];h.push({fnId:B,fn:o[B],args:l[R]})}return u(h)}executeOpTree(e){for(const o of e){const l=o.fn,s=o.fnId,h=o.args;switch(s|0){case A.OPS.beginText:this.beginText();break;case A.OPS.dependency:break;case A.OPS.setLeading:this.setLeading(h);break;case A.OPS.setLeadingMoveText:this.setLeadingMoveText(h[0],h[1]);break;case A.OPS.setFont:this.setFont(h);break;case A.OPS.showText:this.showText(h[0]);break;case A.OPS.showSpacedText:this.showText(h[0]);break;case A.OPS.endText:this.endText();break;case A.OPS.moveText:this.moveText(h[0],h[1]);break;case A.OPS.setCharSpacing:this.setCharSpacing(h[0]);break;case A.OPS.setWordSpacing:this.setWordSpacing(h[0]);break;case A.OPS.setHScale:this.setHScale(h[0]);break;case A.OPS.setTextMatrix:this.setTextMatrix(h[0],h[1],h[2],h[3],h[4],h[5]);break;case A.OPS.setTextRise:this.setTextRise(h[0]);break;case A.OPS.setTextRenderingMode:this.setTextRenderingMode(h[0]);break;case A.OPS.setLineWidth:this.setLineWidth(h[0]);break;case A.OPS.setLineJoin:this.setLineJoin(h[0]);break;case A.OPS.setLineCap:this.setLineCap(h[0]);break;case A.OPS.setMiterLimit:this.setMiterLimit(h[0]);break;case A.OPS.setFillRGBColor:this.setFillRGBColor(h[0],h[1],h[2]);break;case A.OPS.setStrokeRGBColor:this.setStrokeRGBColor(h[0],h[1],h[2]);break;case A.OPS.setStrokeColorN:this.setStrokeColorN(h);break;case A.OPS.setFillColorN:this.setFillColorN(h);break;case A.OPS.shadingFill:this.shadingFill(h[0]);break;case A.OPS.setDash:this.setDash(h[0],h[1]);break;case A.OPS.setRenderingIntent:this.setRenderingIntent(h[0]);break;case A.OPS.setFlatness:this.setFlatness(h[0]);break;case A.OPS.setGState:this.setGState(h[0]);break;case A.OPS.fill:this.fill();break;case A.OPS.eoFill:this.eoFill();break;case A.OPS.stroke:this.stroke();break;case A.OPS.fillStroke:this.fillStroke();break;case A.OPS.eoFillStroke:this.eoFillStroke();break;case A.OPS.clip:this.clip("nonzero");break;case A.OPS.eoClip:this.clip("evenodd");break;case A.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case A.OPS.paintImageXObject:this.paintImageXObject(h[0]);break;case A.OPS.paintInlineImageXObject:this.paintInlineImageXObject(h[0]);break;case A.OPS.paintImageMaskXObject:this.paintImageMaskXObject(h[0]);break;case A.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(h[0],h[1]);break;case A.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case A.OPS.closePath:this.closePath();break;case A.OPS.closeStroke:this.closeStroke();break;case A.OPS.closeFillStroke:this.closeFillStroke();break;case A.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case A.OPS.nextLine:this.nextLine();break;case A.OPS.transform:this.transform(h[0],h[1],h[2],h[3],h[4],h[5]);break;case A.OPS.constructPath:this.constructPath(h[0],h[1]);break;case A.OPS.endPath:this.endPath();break;case 92:this.group(o.items);break;default:(0,A.warn)(`Unimplemented operator ${l}`);break}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,o,l,s,h,R){const n=this.current;n.textMatrix=n.lineMatrix=[e,o,l,s,h,R],n.textMatrixScale=Math.hypot(e,o),n.x=n.lineX=0,n.y=n.lineY=0,n.xcoords=[],n.ycoords=[],n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",`${a(n.fontSize)}px`),n.tspan.setAttributeNS(null,"y",a(-n.y)),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtElement.append(n.tspan)}beginText(){const e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=A.IDENTITY_MATRIX,e.lineMatrix=A.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,o){const l=this.current;l.x=l.lineX+=e,l.y=l.lineY+=o,l.xcoords=[],l.ycoords=[],l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${a(l.fontSize)}px`),l.tspan.setAttributeNS(null,"y",a(-l.y))}showText(e){const o=this.current,l=o.font,s=o.fontSize;if(s===0)return;const h=o.fontSizeScale,R=o.charSpacing,n=o.wordSpacing,B=o.fontDirection,V=o.textHScale*B,z=l.vertical,J=z?1:-1,tt=l.defaultVMetrics,dt=s*o.fontMatrix[0];let ot=0;for(const At of e){if(At===null){ot+=B*n;continue}else if(typeof At=="number"){ot+=J*At*s/1e3;continue}const St=(At.isSpace?n:0)+R,yt=At.fontChar;let $,d,p=At.width;if(z){let H;const M=At.vmetric||tt;H=At.vmetric?M[1]:p*.5,H=-H*dt;const X=M[2]*dt;p=M?-M[0]:p,$=H/h,d=(ot+X)/h}else $=ot/h,d=0;(At.isInFont||l.missingFile)&&(o.xcoords.push(o.x+$),z&&o.ycoords.push(-o.y+d),o.tspan.textContent+=yt);let E;z?E=p*dt-St*B:E=p*dt+St*B,ot+=E}o.tspan.setAttributeNS(null,"x",o.xcoords.map(a).join(" ")),z?o.tspan.setAttributeNS(null,"y",o.ycoords.map(a).join(" ")):o.tspan.setAttributeNS(null,"y",a(-o.y)),z?o.y-=ot:o.x+=ot*V,o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",`${a(o.fontSize)}px`),o.fontStyle!==Q.fontStyle&&o.tspan.setAttributeNS(null,"font-style",o.fontStyle),o.fontWeight!==Q.fontWeight&&o.tspan.setAttributeNS(null,"font-weight",o.fontWeight);const ct=o.textRenderingMode&A.TextRenderingMode.FILL_STROKE_MASK;if(ct===A.TextRenderingMode.FILL||ct===A.TextRenderingMode.FILL_STROKE?(o.fillColor!==Q.fillColor&&o.tspan.setAttributeNS(null,"fill",o.fillColor),o.fillAlpha<1&&o.tspan.setAttributeNS(null,"fill-opacity",o.fillAlpha)):o.textRenderingMode===A.TextRenderingMode.ADD_TO_PATH?o.tspan.setAttributeNS(null,"fill","transparent"):o.tspan.setAttributeNS(null,"fill","none"),ct===A.TextRenderingMode.STROKE||ct===A.TextRenderingMode.FILL_STROKE){const At=1/(o.textMatrixScale||1);this._setStrokeAttributes(o.tspan,At)}let gt=o.textMatrix;o.textRise!==0&&(gt=gt.slice(),gt[5]+=o.textRise),o.txtElement.setAttributeNS(null,"transform",`${y(gt)} scale(${a(V)}, -1)`),o.txtElement.setAttributeNS(L,"xml:space","preserve"),o.txtElement.append(o.tspan),o.txtgrp.append(o.txtElement),this._ensureTransformGroup().append(o.txtElement)}setLeadingMoveText(e,o){this.setLeading(-o),this.moveText(e,o)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const o=T(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${e.loadedName}"; src: url(${o}); }
`}setFont(e){const o=this.current,l=this.commonObjs.get(e[0]);let s=e[1];o.font=l,this.embedFonts&&!l.missingFile&&!this.embeddedFonts[l.loadedName]&&(this.addFontStyle(l),this.embeddedFonts[l.loadedName]=l),o.fontMatrix=l.fontMatrix||A.FONT_IDENTITY_MATRIX;let h="normal";l.black?h="900":l.bold&&(h="bold");const R=l.italic?"italic":"normal";s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,o.fontSize=s,o.fontFamily=l.loadedName,o.fontWeight=h,o.fontStyle=R,o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"y",a(-o.y)),o.xcoords=[],o.ycoords=[]}endText(){var o;const e=this.current;e.textRenderingMode&A.TextRenderingMode.ADD_TO_PATH_FLAG&&((o=e.txtElement)!=null&&o.hasChildNodes())&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=_[e]}setLineJoin(e){this.current.lineJoin=I[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,o,l){this.current.strokeColor=A.Util.makeHexColor(e,o,l)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,o,l){this.current.fillColor=A.Util.makeHexColor(e,o,l),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){const o=this.viewport.width,l=this.viewport.height,s=A.Util.inverseTransform(this.transformMatrix),h=A.Util.applyTransform([0,0],s),R=A.Util.applyTransform([0,l],s),n=A.Util.applyTransform([o,0],s),B=A.Util.applyTransform([o,l],s),V=Math.min(h[0],R[0],n[0],B[0]),z=Math.min(h[1],R[1],n[1],B[1]),J=Math.max(h[0],R[0],n[0],B[0]),tt=Math.max(h[1],R[1],n[1],B[1]),dt=this.svgFactory.createElement("svg:rect");dt.setAttributeNS(null,"x",V),dt.setAttributeNS(null,"y",z),dt.setAttributeNS(null,"width",J-V),dt.setAttributeNS(null,"height",tt-z),dt.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&dt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(dt)}_makeColorN_Pattern(e){return e[0]==="TilingPattern"?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){const o=e[1],l=e[2],s=e[3]||A.IDENTITY_MATRIX,[h,R,n,B]=e[4],V=e[5],z=e[6],J=e[7],tt=`shading${g++}`,[dt,ot,ct,gt]=A.Util.normalizeRect([...A.Util.applyTransform([h,R],s),...A.Util.applyTransform([n,B],s)]),[At,St]=A.Util.singularValueDecompose2dScale(s),yt=V*At,$=z*St,d=this.svgFactory.createElement("svg:pattern");d.setAttributeNS(null,"id",tt),d.setAttributeNS(null,"patternUnits","userSpaceOnUse"),d.setAttributeNS(null,"width",yt),d.setAttributeNS(null,"height",$),d.setAttributeNS(null,"x",`${dt}`),d.setAttributeNS(null,"y",`${ot}`);const p=this.svg,E=this.transformMatrix,H=this.current.fillColor,M=this.current.strokeColor,X=this.svgFactory.create(ct-dt,gt-ot);if(this.svg=X,this.transformMatrix=s,J===2){const U=A.Util.makeHexColor(...o);this.current.fillColor=U,this.current.strokeColor=U}return this.executeOpTree(this.convertOpList(l)),this.svg=p,this.transformMatrix=E,this.current.fillColor=H,this.current.strokeColor=M,d.append(X.childNodes[0]),this.defs.append(d),`url(#${tt})`}_makeShadingPattern(e){switch(typeof e=="string"&&(e=this.objs.get(e)),e[0]){case"RadialAxial":const o=`shading${g++}`,l=e[3];let s;switch(e[1]){case"axial":const h=e[4],R=e[5];s=this.svgFactory.createElement("svg:linearGradient"),s.setAttributeNS(null,"id",o),s.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),s.setAttributeNS(null,"x1",h[0]),s.setAttributeNS(null,"y1",h[1]),s.setAttributeNS(null,"x2",R[0]),s.setAttributeNS(null,"y2",R[1]);break;case"radial":const n=e[4],B=e[5],V=e[6],z=e[7];s=this.svgFactory.createElement("svg:radialGradient"),s.setAttributeNS(null,"id",o),s.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),s.setAttributeNS(null,"cx",B[0]),s.setAttributeNS(null,"cy",B[1]),s.setAttributeNS(null,"r",z),s.setAttributeNS(null,"fx",n[0]),s.setAttributeNS(null,"fy",n[1]),s.setAttributeNS(null,"fr",V);break;default:throw new Error(`Unknown RadialAxial type: ${e[1]}`)}for(const h of l){const R=this.svgFactory.createElement("svg:stop");R.setAttributeNS(null,"offset",h[0]),R.setAttributeNS(null,"stop-color",h[1]),s.append(R)}return this.defs.append(s),`url(#${o})`;case"Mesh":return(0,A.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${e[0]}`)}}setDash(e,o){this.current.dashArray=e,this.current.dashPhase=o}constructPath(e,o){const l=this.current;let s=l.x,h=l.y,R=[],n=0;for(const B of e)switch(B|0){case A.OPS.rectangle:s=o[n++],h=o[n++];const V=o[n++],z=o[n++],J=s+V,tt=h+z;R.push("M",a(s),a(h),"L",a(J),a(h),"L",a(J),a(tt),"L",a(s),a(tt),"Z");break;case A.OPS.moveTo:s=o[n++],h=o[n++],R.push("M",a(s),a(h));break;case A.OPS.lineTo:s=o[n++],h=o[n++],R.push("L",a(s),a(h));break;case A.OPS.curveTo:s=o[n+4],h=o[n+5],R.push("C",a(o[n]),a(o[n+1]),a(o[n+2]),a(o[n+3]),a(s),a(h)),n+=6;break;case A.OPS.curveTo2:R.push("C",a(s),a(h),a(o[n]),a(o[n+1]),a(o[n+2]),a(o[n+3])),s=o[n+2],h=o[n+3],n+=4;break;case A.OPS.curveTo3:s=o[n+2],h=o[n+3],R.push("C",a(o[n]),a(o[n+1]),a(s),a(h),a(s),a(h)),n+=4;break;case A.OPS.closePath:R.push("Z");break}R=R.join(" "),l.path&&e.length>0&&e[0]!==A.OPS.rectangle&&e[0]!==A.OPS.moveTo?R=l.path.getAttributeNS(null,"d")+R:(l.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(l.path)),l.path.setAttributeNS(null,"d",R),l.path.setAttributeNS(null,"fill","none"),l.element=l.path,l.setCurrentPoint(s,h)}endPath(){const e=this.current;if(e.path=null,!this.pendingClip)return;if(!e.element){this.pendingClip=null;return}const o=`clippath${v++}`,l=this.svgFactory.createElement("svg:clipPath");l.setAttributeNS(null,"id",o),l.setAttributeNS(null,"transform",y(this.transformMatrix));const s=e.element.cloneNode(!0);if(this.pendingClip==="evenodd"?s.setAttributeNS(null,"clip-rule","evenodd"):s.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,l.append(s),this.defs.append(l),e.activeClipUrl){e.clipGroup=null;for(const h of this.extraStack)h.clipGroup=null;l.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl=`url(#${o})`,this.tgrp=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;if(e.path){const o=`${e.path.getAttributeNS(null,"d")}Z`;e.path.setAttributeNS(null,"d",o)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[o,l]of e)switch(o){case"LW":this.setLineWidth(l);break;case"LC":this.setLineCap(l);break;case"LJ":this.setLineJoin(l);break;case"ML":this.setMiterLimit(l);break;case"D":this.setDash(l[0],l[1]);break;case"RI":this.setRenderingIntent(l);break;case"FL":this.setFlatness(l);break;case"Font":this.setFont(l);break;case"CA":this.setStrokeAlpha(l);break;case"ca":this.setFillAlpha(l);break;default:(0,A.warn)(`Unimplemented graphic state operator ${o}`);break}}fill(){const e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){const e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e,o=1){const l=this.current;let s=l.dashArray;o!==1&&s.length>0&&(s=s.map(function(h){return o*h})),e.setAttributeNS(null,"stroke",l.strokeColor),e.setAttributeNS(null,"stroke-opacity",l.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",a(l.miterLimit)),e.setAttributeNS(null,"stroke-linecap",l.lineCap),e.setAttributeNS(null,"stroke-linejoin",l.lineJoin),e.setAttributeNS(null,"stroke-width",a(o*l.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",s.map(a).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",a(o*l.dashPhase)+"px")}eoFill(){var e;(e=this.current.element)==null||e.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var e;(e=this.current.element)==null||e.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(e)}paintImageXObject(e){const o=this.getObject(e);if(!o){(0,A.warn)(`Dependent image with object ID ${e} is not ready yet`);return}this.paintInlineImageXObject(o)}paintInlineImageXObject(e,o){const l=e.width,s=e.height,h=x(e,this.forceDataSchema,!!o),R=this.svgFactory.createElement("svg:rect");R.setAttributeNS(null,"x","0"),R.setAttributeNS(null,"y","0"),R.setAttributeNS(null,"width",a(l)),R.setAttributeNS(null,"height",a(s)),this.current.element=R,this.clip("nonzero");const n=this.svgFactory.createElement("svg:image");n.setAttributeNS(k,"xlink:href",h),n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y",a(-s)),n.setAttributeNS(null,"width",a(l)+"px"),n.setAttributeNS(null,"height",a(s)+"px"),n.setAttributeNS(null,"transform",`scale(${a(1/l)} ${a(-1/s)})`),o?o.append(n):this._ensureTransformGroup().append(n)}paintImageMaskXObject(e){const o=this.getObject(e.data,e);if(o.bitmap){(0,A.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const l=this.current,s=o.width,h=o.height,R=l.fillColor;l.maskId=`mask${P++}`;const n=this.svgFactory.createElement("svg:mask");n.setAttributeNS(null,"id",l.maskId);const B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x","0"),B.setAttributeNS(null,"y","0"),B.setAttributeNS(null,"width",a(s)),B.setAttributeNS(null,"height",a(h)),B.setAttributeNS(null,"fill",R),B.setAttributeNS(null,"mask",`url(#${l.maskId})`),this.defs.append(n),this._ensureTransformGroup().append(B),this.paintInlineImageXObject(o,n)}paintFormXObjectBegin(e,o){if(Array.isArray(e)&&e.length===6&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),o){const l=o[2]-o[0],s=o[3]-o[1],h=this.svgFactory.createElement("svg:rect");h.setAttributeNS(null,"x",o[0]),h.setAttributeNS(null,"y",o[1]),h.setAttributeNS(null,"width",a(l)),h.setAttributeNS(null,"height",a(s)),this.current.element=h,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const o=this.svgFactory.create(e.width,e.height),l=this.svgFactory.createElement("svg:defs");o.append(l),this.defs=l;const s=this.svgFactory.createElement("svg:g");return s.setAttributeNS(null,"transform",y(e.transform)),o.append(s),this.svg=s,o}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",y(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(N){var r=__webpack_module_cache__[N];if(r!==void 0)return r.exports;var j=__webpack_module_cache__[N]={exports:{}};return __webpack_modules__[N](j,j.exports,__w_pdfjs_require__),j.exports}var __webpack_exports__={};return(()=>{var N=__webpack_exports__;Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"AbortException",{enumerable:!0,get:function(){return r.AbortException}}),Object.defineProperty(N,"AnnotationEditorLayer",{enumerable:!0,get:function(){return W.AnnotationEditorLayer}}),Object.defineProperty(N,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return r.AnnotationEditorParamsType}}),Object.defineProperty(N,"AnnotationEditorType",{enumerable:!0,get:function(){return r.AnnotationEditorType}}),Object.defineProperty(N,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return q.AnnotationEditorUIManager}}),Object.defineProperty(N,"AnnotationLayer",{enumerable:!0,get:function(){return Q.AnnotationLayer}}),Object.defineProperty(N,"AnnotationMode",{enumerable:!0,get:function(){return r.AnnotationMode}}),Object.defineProperty(N,"CMapCompressionType",{enumerable:!0,get:function(){return r.CMapCompressionType}}),Object.defineProperty(N,"FeatureTest",{enumerable:!0,get:function(){return r.FeatureTest}}),Object.defineProperty(N,"GlobalWorkerOptions",{enumerable:!0,get:function(){return L.GlobalWorkerOptions}}),Object.defineProperty(N,"InvalidPDFException",{enumerable:!0,get:function(){return r.InvalidPDFException}}),Object.defineProperty(N,"MissingPDFException",{enumerable:!0,get:function(){return r.MissingPDFException}}),Object.defineProperty(N,"OPS",{enumerable:!0,get:function(){return r.OPS}}),Object.defineProperty(N,"PDFDataRangeTransport",{enumerable:!0,get:function(){return j.PDFDataRangeTransport}}),Object.defineProperty(N,"PDFDateString",{enumerable:!0,get:function(){return c.PDFDateString}}),Object.defineProperty(N,"PDFWorker",{enumerable:!0,get:function(){return j.PDFWorker}}),Object.defineProperty(N,"PasswordResponses",{enumerable:!0,get:function(){return r.PasswordResponses}}),Object.defineProperty(N,"PermissionFlag",{enumerable:!0,get:function(){return r.PermissionFlag}}),Object.defineProperty(N,"PixelsPerInch",{enumerable:!0,get:function(){return c.PixelsPerInch}}),Object.defineProperty(N,"PromiseCapability",{enumerable:!0,get:function(){return r.PromiseCapability}}),Object.defineProperty(N,"RenderingCancelledException",{enumerable:!0,get:function(){return c.RenderingCancelledException}}),Object.defineProperty(N,"SVGGraphics",{enumerable:!0,get:function(){return k.SVGGraphics}}),Object.defineProperty(N,"UnexpectedResponseException",{enumerable:!0,get:function(){return r.UnexpectedResponseException}}),Object.defineProperty(N,"Util",{enumerable:!0,get:function(){return r.Util}}),Object.defineProperty(N,"VerbosityLevel",{enumerable:!0,get:function(){return r.VerbosityLevel}}),Object.defineProperty(N,"XfaLayer",{enumerable:!0,get:function(){return _.XfaLayer}}),Object.defineProperty(N,"build",{enumerable:!0,get:function(){return j.build}}),Object.defineProperty(N,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return r.createValidAbsoluteUrl}}),Object.defineProperty(N,"getDocument",{enumerable:!0,get:function(){return j.getDocument}}),Object.defineProperty(N,"getFilenameFromUrl",{enumerable:!0,get:function(){return c.getFilenameFromUrl}}),Object.defineProperty(N,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return c.getPdfFilenameFromUrl}}),Object.defineProperty(N,"getXfaPageViewport",{enumerable:!0,get:function(){return c.getXfaPageViewport}}),Object.defineProperty(N,"isDataScheme",{enumerable:!0,get:function(){return c.isDataScheme}}),Object.defineProperty(N,"isPdfFile",{enumerable:!0,get:function(){return c.isPdfFile}}),Object.defineProperty(N,"loadScript",{enumerable:!0,get:function(){return c.loadScript}}),Object.defineProperty(N,"normalizeUnicode",{enumerable:!0,get:function(){return r.normalizeUnicode}}),Object.defineProperty(N,"renderTextLayer",{enumerable:!0,get:function(){return A.renderTextLayer}}),Object.defineProperty(N,"setLayerDimensions",{enumerable:!0,get:function(){return c.setLayerDimensions}}),Object.defineProperty(N,"shadow",{enumerable:!0,get:function(){return r.shadow}}),Object.defineProperty(N,"updateTextLayer",{enumerable:!0,get:function(){return A.updateTextLayer}}),Object.defineProperty(N,"version",{enumerable:!0,get:function(){return j.version}});var r=__w_pdfjs_require__(1),j=__w_pdfjs_require__(2),c=__w_pdfjs_require__(6),A=__w_pdfjs_require__(26),W=__w_pdfjs_require__(27),q=__w_pdfjs_require__(5),Q=__w_pdfjs_require__(32),L=__w_pdfjs_require__(14),k=__w_pdfjs_require__(35),_=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjs=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]);var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function N(c,A,W,q,Q,L){if(L!==ReactPropTypesSecret){var k=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw k.name="Invariant Violation",k}}N.isRequired=N;function r(){return N}var j={array:N,bigint:N,bool:N,func:N,number:N,object:N,string:N,symbol:N,any:N,arrayOf:r,element:N,elementType:N,instanceOf:r,node:N,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return j.PropTypes=j,j};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var __spreadArray=globalThis&&globalThis.__spreadArray||function(N,r,j){if(j||arguments.length===2)for(var c=0,A=r.length,W;c<A;c++)(W||!(c in r))&&(W||(W=Array.prototype.slice.call(r,0,c)),W[c]=r[c]);return N.concat(W||Array.prototype.slice.call(r))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(N,r){var j={};return allEvents.forEach(function(c){var A=N[c];A&&(r?j[c]=function(W){return A(W,r(c))}:j[c]=A)}),j}function makeCancellablePromise(N){var r=!1,j=new Promise(function(c,A){N.then(function(W){return!r&&c(W)}).catch(function(W){return!r&&A(W)})});return{promise:j,cancel:function(){r=!0}}}var isProduction$1=!0,prefix="Invariant failed";function invariant(N,r){if(!N){if(isProduction$1)throw new Error(prefix);var j=typeof r=="function"?r():r,c=j?"".concat(prefix,": ").concat(j):prefix;throw new Error(c)}}var isProduction=!0;function warning(N,r){if(!isProduction){if(N)return;var j="Warning: "+r;typeof console<"u"&&console.warn(j);try{throw Error(j)}catch{}}}const DocumentContext=reactExports.createContext(null);function Message({children:N,type:r}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${r}`},N)}Message.propTypes={children:PropTypes.node,type:PropTypes.oneOf(["error","loading","no-data"]).isRequired};const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(r){this.pdfDocument=r}setViewer(r){this.pdfViewer=r}setExternalLinkRel(r){this.externalLinkRel=r}setExternalLinkTarget(r){this.externalLinkTarget=r}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(r){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=r}get rotation(){return 0}set rotation(r){}goToDestination(r){return new Promise(j=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(r,"Destination is not specified."),typeof r=="string"?this.pdfDocument.getDestination(r).then(j):Array.isArray(r)?j(r):r.then(j)}).then(j=>{invariant(Array.isArray(j),`"${j}" is not a valid destination array.`);const c=j[0];new Promise(A=>{invariant(this.pdfDocument,"PDF document not loaded."),c instanceof Object?this.pdfDocument.getPageIndex(c).then(W=>{A(W)}).catch(()=>{invariant(!1,`"${c}" is not a valid page reference.`)}):typeof c=="number"?A(c):invariant(!1,`"${c}" is not a valid destination reference.`)}).then(A=>{const W=A+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(W>=1&&W<=this.pagesCount,`"${W}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:j,pageIndex:A,pageNumber:W})})})}navigateTo(r){this.goToDestination(r)}goToPage(r){const j=r-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(r>=1&&r<=this.pagesCount,`"${r}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:j,pageNumber:r})}addLinkAttributes(r,j,c){r.href=j,r.rel=this.externalLinkRel||DEFAULT_LINK_REL,r.target=c?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses,isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(N){return typeof N<"u"}function isProvided(N){return isDefined(N)&&N!==null}function isString(N){return typeof N=="string"}function isArrayBuffer(N){return N instanceof ArrayBuffer}function isBlob(N){return invariant(isBrowser,"isBlob can only be used in a browser environment"),N instanceof Blob}function isDataURI(N){return isString(N)&&/^data:/.test(N)}function dataURItoByteString(N){invariant(isDataURI(N),"Invalid data URI.");const[r="",j=""]=N.split(",");return r.split(";").indexOf("base64")!==-1?atob(j):unescape(j)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(N){N&&N.cancel&&N.cancel()}function makePageCallback(N,r){return Object.defineProperty(N,"width",{get(){return this.view[2]*r},configurable:!0}),Object.defineProperty(N,"height",{get(){return this.view[3]*r},configurable:!0}),Object.defineProperty(N,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(N,"originalHeight",{get(){return this.view[3]},configurable:!0}),N}function isCancelException(N){return N.name==="RenderingCancelledException"}function loadFromFile(N){return new Promise((r,j)=>{const c=new FileReader;c.onload=()=>{if(!c.result)return j(new Error("Error while reading a file."));r(c.result)},c.onerror=A=>{if(!A.target)return j(new Error("Error while reading a file."));const{error:W}=A.target;if(!W)return j(new Error("Error while reading a file."));switch(W.code){case W.NOT_FOUND_ERR:return j(new Error("Error while reading a file: File not found."));case W.SECURITY_ERR:return j(new Error("Error while reading a file: Security error."));case W.ABORT_ERR:return j(new Error("Error while reading a file: Aborted."));default:return j(new Error("Error while reading a file."))}},c.readAsArrayBuffer(N)})}function reducer(N,r){switch(r.type){case"RESOLVE":return{value:r.value,error:void 0};case"REJECT":return{value:!1,error:r.error};case"RESET":return{value:void 0,error:void 0};default:return N}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const eventProps=(()=>{const N={};return allEvents.forEach(r=>{N[r]=PropTypes.func}),N})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(pdfExports.PDFDataRangeTransport).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function N(r,j,c){const{[j]:A,pageNumber:W,pdf:q}=r;if(!isDefined(q))return null;if(isDefined(A)){if(typeof A!="number")return new Error(`\`${j}\` of type \`${typeof A}\` supplied to \`${c}\`, expected \`number\`.`);if(A<0)return new Error(`Expected \`${j}\` to be greater or equal to 0.`);const{numPages:Q}=q;if(A+1>Q)return new Error(`Expected \`${j}\` to be less or equal to ${Q-1}.`)}else if(!isDefined(W))return new Error(`\`${j}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${c}\`.`);return null},isPageNumber=function N(r,j,c){const{[j]:A,pageIndex:W,pdf:q}=r;if(!isDefined(q))return null;if(isDefined(A)){if(typeof A!="number")return new Error(`\`${j}\` of type \`${typeof A}\` supplied to \`${c}\`, expected \`number\`.`);if(A<1)return new Error(`Expected \`${j}\` to be greater or equal to 1.`);const{numPages:Q}=q;if(A>Q)return new Error(`Expected \`${j}\` to be less or equal to ${Q}.`)}else if(!isDefined(W))return new Error(`\`${j}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${c}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.shape({getDestination:PropTypes.func.isRequired,getOutline:PropTypes.func.isRequired,getPage:PropTypes.func.isRequired,numPages:PropTypes.number.isRequired}),PropTypes.bool]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=globalThis&&globalThis.__awaiter||function(N,r,j,c){function A(W){return W instanceof j?W:new j(function(q){q(W)})}return new(j||(j=Promise))(function(W,q){function Q(_){try{k(c.next(_))}catch(I){q(I)}}function L(_){try{k(c.throw(_))}catch(I){q(I)}}function k(_){_.done?W(_.value):A(_.value).then(Q,L)}k((c=c.apply(N,r||[])).next())})},__rest$1=globalThis&&globalThis.__rest||function(N,r){var j={};for(var c in N)Object.prototype.hasOwnProperty.call(N,c)&&r.indexOf(c)<0&&(j[c]=N[c]);if(N!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,c=Object.getOwnPropertySymbols(N);A<c.length;A++)r.indexOf(c[A])<0&&Object.prototype.propertyIsEnumerable.call(N,c[A])&&(j[c[A]]=N[c[A]]);return j};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(N,r)=>{switch(r){case PasswordResponses$1.NEED_PASSWORD:{const j=prompt("Enter the password to open this PDF file.");N(j);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const j=prompt("Invalid password. Please try again.");N(j);break}}},Document=reactExports.forwardRef(function N(r,j){var{children:c,className:A,error:W="Failed to load PDF file.",externalLinkRel:q,externalLinkTarget:Q,file:L,inputRef:k,imageResourcesPath:_,loading:I="Loading PDF…",noData:T="No PDF file specified.",onItemClick:x,onLoadError:f,onLoadProgress:u,onLoadSuccess:a,onPassword:y=defaultOnPassword,onSourceError:v,onSourceSuccess:P,options:g,renderMode:e,rotate:o}=r,l=__rest$1(r,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[s,h]=useResolver(),{value:R,error:n}=s,[B,V]=useResolver(),{value:z,error:J}=B,tt=reactExports.useRef(new LinkService),dt=reactExports.useRef([]),ot=reactExports.useRef({scrollPageIntoView:t=>{const{dest:i,pageNumber:m,pageIndex:S=m-1}=t;if(x){x({dest:i,pageIndex:S,pageNumber:m});return}const C=dt.current[S];if(C){C.scrollIntoView();return}warning(!1,`An internal link leading to page ${m} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(j,()=>({linkService:tt,pages:dt,viewer:ot}),[]);function ct(){P&&P()}function gt(){n&&(warning(!1,n.toString()),v&&v(n))}function At(){h({type:"RESET"})}reactExports.useEffect(At,[L,h]);const St=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!L)return null;if(typeof L=="string")return isDataURI(L)?{data:dataURItoByteString(L)}:(displayCORSWarning(),{url:L});if(L instanceof PDFDataRangeTransport)return{range:L};if(isArrayBuffer(L))return{data:L};if(isBrowser&&isBlob(L))return{data:yield loadFromFile(L)};if(invariant(typeof L=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant("data"in L||"range"in L||"url"in L,"Invalid parameter object: need either .data, .range or .url"),"url"in L&&typeof L.url=="string"){if(isDataURI(L.url)){const{url:t}=L,i=__rest$1(L,["url"]),m=dataURItoByteString(t);return Object.assign({data:m},i)}displayCORSWarning()}return L}),[L]);reactExports.useEffect(()=>{const t=makeCancellablePromise(St());return t.promise.then(i=>{h({type:"RESOLVE",value:i})}).catch(i=>{h({type:"REJECT",error:i})}),()=>{cancelRunningTask(t)}},[St,h]),reactExports.useEffect(()=>{if(!(typeof R>"u")){if(R===!1){gt();return}ct()}},[R]);function yt(){z&&(a&&a(z),dt.current=new Array(z.numPages),tt.current.setDocument(z))}function $(){J&&(warning(!1,J.toString()),f&&f(J))}function d(){V({type:"RESET"})}reactExports.useEffect(d,[V,R]);function p(){if(!R)return;const t=g?Object.assign(Object.assign({},R),g):R,i=pdfExports.getDocument(t);u&&(i.onProgress=u),y&&(i.onPassword=y);const m=i;return m.promise.then(S=>{V({type:"RESOLVE",value:S})}).catch(S=>{m.destroyed||V({type:"REJECT",error:S})}),()=>{m.destroy()}}reactExports.useEffect(p,[g,V,R]),reactExports.useEffect(()=>{if(!(typeof z>"u")){if(z===!1){$();return}yt()}},[z]);function E(){tt.current.setViewer(ot.current),tt.current.setExternalLinkRel(q),tt.current.setExternalLinkTarget(Q)}reactExports.useEffect(E,[q,Q]);function H(t,i){dt.current[t]=i}function M(t){delete dt.current[t]}const X=reactExports.useMemo(()=>({imageResourcesPath:_,linkService:tt.current,onItemClick:x,pdf:z,registerPage:H,renderMode:e,rotate:o,unregisterPage:M}),[_,x,z,e,o]),U=reactExports.useMemo(()=>makeEventProps(l,()=>z),[l,z]);function F(){return React.createElement(DocumentContext.Provider,{value:X},c)}function O(){return L?z==null?React.createElement(Message,{type:"loading"},typeof I=="function"?I():I):z===!1?React.createElement(Message,{type:"error"},typeof W=="function"?W():W):F():React.createElement(Message,{type:"no-data"},typeof T=="function"?T():T)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",A),ref:k,style:{"--scale-factor":"1"}},U),O())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});const Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var N=[],r=0;r<arguments.length;r++)N[r]=arguments[r];var j=N.filter(Boolean);if(j.length<=1){var c=j[0];return c||null}return function(W){j.forEach(function(q){typeof q=="function"?q(W):q&&(q.current=W)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(N){return N in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(N){return"children"in N}function isStructTreeNodeWithOnlyContentChild(N){return isStructTreeNode(N)?N.children.length===1&&0 in N.children&&"id"in N.children[0]:!1}function getRoleAttributes(N){const r={};if(isStructTreeNode(N)){const{role:j}=N,c=j.match(HEADING_PATTERN);if(c)r.role="heading",r["aria-level"]=Number(c[1]);else if(isPdfRole(j)){const A=PDF_ROLE_TO_HTML_ROLE[j];A&&(r.role=A)}}return r}function getBaseAttributes(N){const r={};if(isStructTreeNode(N)){if(N.alt!==void 0&&(r["aria-label"]=N.alt),N.lang!==void 0&&(r.lang=N.lang),isStructTreeNodeWithOnlyContentChild(N)){const[j]=N.children;if(j){const c=getBaseAttributes(j);return Object.assign(Object.assign({},r),c)}}}else"id"in N&&(r["aria-owns"]=N.id);return r}function getAttributes(N){return N?Object.assign(Object.assign({},getRoleAttributes(N)),getBaseAttributes(N)):null}function StructTreeItem({className:N,node:r}){const j=reactExports.useMemo(()=>getAttributes(r),[r]),c=reactExports.useMemo(()=>!isStructTreeNode(r)||isStructTreeNodeWithOnlyContentChild(r)?null:r.children.map((A,W)=>React.createElement(StructTreeItem,{key:W,node:A})),[r]);return React.createElement("span",Object.assign({className:N},j),c)}StructTreeItem.propTypes={node:PropTypes.oneOfType([PropTypes.shape({children:PropTypes.object,role:PropTypes.string}),PropTypes.shape({id:PropTypes.string,type:PropTypes.string})]).isRequired};function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const N=usePageContext();invariant(N,"Unable to find Page context.");const{onGetStructTreeError:r,onGetStructTreeSuccess:j}=N,[c,A]=useResolver(),{value:W,error:q}=c,{customTextRenderer:Q,page:L}=N;function k(){W&&j&&j(W)}function _(){q&&(warning(!1,q.toString()),r&&r(q))}function I(){A({type:"RESET"})}reactExports.useEffect(I,[A,L]);function T(){if(Q||!L)return;const x=makeCancellablePromise(L.getStructTree()),f=x;return x.promise.then(u=>{A({type:"RESOLVE",value:u})}).catch(u=>{A({type:"REJECT",error:u})}),()=>cancelRunningTask(f)}return reactExports.useEffect(T,[Q,L,A]),reactExports.useEffect(()=>{if(W!==void 0){if(W===!1){_();return}k()}},[W]),W?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:W}):null}const ANNOTATION_MODE=pdfExports.AnnotationMode;function PageCanvas(N){const r=usePageContext();invariant(r,"Unable to find Page context.");const j=Object.assign(Object.assign({},r),N),{_className:c,canvasBackground:A,devicePixelRatio:W,onRenderError:q,onRenderSuccess:Q,page:L,renderForms:k,renderTextLayer:_,rotate:I,scale:T}=j,{canvasRef:x}=N,f=reactExports.useRef(null);invariant(L,"Attempted to render page canvas, but no page was specified.");const u=W||getDevicePixelRatio();function a(){L&&Q&&Q(makePageCallback(L,T))}function y(o){isCancelException(o)||(warning(!1,o.toString()),q&&q(o))}const v=reactExports.useMemo(()=>L.getViewport({scale:T*u,rotation:I}),[u,L,I,T]),P=reactExports.useMemo(()=>L.getViewport({scale:T,rotation:I}),[L,I,T]);function g(){if(!L)return;L.cleanup();const{current:o}=f;if(!o)return;o.width=v.width,o.height=v.height,o.style.width=`${Math.floor(P.width)}px`,o.style.height=`${Math.floor(P.height)}px`,o.style.visibility="hidden";const l={annotationMode:k?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:o.getContext("2d",{alpha:!1}),viewport:v};A&&(l.background=A);const s=L.render(l),h=s;return s.promise.then(()=>{o.style.visibility="",a()}).catch(y),()=>cancelRunningTask(h)}reactExports.useEffect(g,[A,f,u,L,k,v,P]);const e=reactExports.useCallback(()=>{const{current:o}=f;o&&(o.width=0,o.height=0)},[f]);return reactExports.useEffect(()=>e,[e]),React.createElement("canvas",{className:`${c}__canvas`,dir:"ltr",ref:mergeRefs(x,f),style:{display:"block",userSelect:"none"}},_?React.createElement(StructTree,null):null)}PageCanvas.propTypes={canvasRef:isRef};function PageSVG(){const N=usePageContext();invariant(N,"Unable to find Page context.");const{_className:r,onRenderSuccess:j,onRenderError:c,page:A,rotate:W,scale:q}=N,[Q,L]=useResolver(),{value:k,error:_}=Q;invariant(A,"Attempted to render page SVG, but no page was specified.");function I(){A&&j&&j(makePageCallback(A,q))}function T(){_&&(isCancelException(_)||(warning(!1,_.toString()),c&&c(_)))}const x=reactExports.useMemo(()=>A.getViewport({scale:q,rotation:W}),[A,W,q]);function f(){L({type:"RESET"})}reactExports.useEffect(f,[A,L,x]);function u(){if(!A)return;const P=makeCancellablePromise(A.getOperatorList());return P.promise.then(g=>{new pdfExports.SVGGraphics(A.commonObjs,A.objs).getSVG(g,x).then(o=>{L({type:"RESOLVE",value:o})}).catch(o=>{L({type:"REJECT",error:o})})}).catch(g=>{L({type:"REJECT",error:g})}),()=>cancelRunningTask(P)}reactExports.useEffect(u,[A,L,x]),reactExports.useEffect(()=>{if(k!==void 0){if(k===!1){T();return}I()}},[k]);function a(P){if(!P||!k)return;P.firstElementChild||P.appendChild(k);const{width:g,height:e}=x;k.setAttribute("width",`${g}`),k.setAttribute("height",`${e}`)}const{width:y,height:v}=x;return React.createElement("div",{className:`${r}__svg`,ref:P=>a(P),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:y,height:v,userSelect:"none"}})}function isTextItem(N){return"str"in N}function TextLayer(){const N=usePageContext();invariant(N,"Unable to find Page context.");const{customTextRenderer:r,onGetTextError:j,onGetTextSuccess:c,onRenderTextLayerError:A,onRenderTextLayerSuccess:W,page:q,pageIndex:Q,pageNumber:L,rotate:k,scale:_}=N,[I,T]=useResolver(),{value:x,error:f}=I,u=reactExports.useRef(null),a=reactExports.useRef();invariant(q,"Attempted to load page text content, but no page was specified."),warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function y(){x&&c&&c(x)}function v(){f&&(warning(!1,f.toString()),j&&j(f))}function P(){T({type:"RESET"})}reactExports.useEffect(P,[q,T]);function g(){if(!q)return;const n=makeCancellablePromise(q.getTextContent()),B=n;return n.promise.then(V=>{T({type:"RESOLVE",value:V})}).catch(V=>{T({type:"REJECT",error:V})}),()=>cancelRunningTask(B)}reactExports.useEffect(g,[q,T]),reactExports.useEffect(()=>{if(x!==void 0){if(x===!1){v();return}y()}},[x]);const e=reactExports.useCallback(()=>{W&&W()},[W]),o=reactExports.useCallback(n=>{warning(!1,n.toString()),A&&A(n)},[A]);function l(){const n=a.current;n&&n.classList.add("active")}function s(){const n=a.current;n&&n.classList.remove("active")}const h=reactExports.useMemo(()=>q.getViewport({scale:_,rotation:k}),[q,k,_]);function R(){if(!q||!x)return;const{current:n}=u;if(!n)return;n.innerHTML="";const B=q.streamTextContent({includeMarkedContent:!0}),V={container:n,textContentSource:B,viewport:h},z=pdfExports.renderTextLayer(V),J=z;return z.promise.then(()=>{const tt=document.createElement("div");tt.className="endOfContent",n.append(tt),a.current=tt;const ot=!!n.querySelector(".markedContent")?n.querySelectorAll(".markedContent > *:not(.markedContent"):n.children;if(r){let ct=0;x.items.forEach((gt,At)=>{if(!isTextItem(gt))return;const St=ot[ct];if(!St)return;const yt=r(Object.assign({pageIndex:Q,pageNumber:L,itemIndex:At},gt));St.innerHTML=yt,ct+=gt.str&&gt.hasEOL?2:1})}e()}).catch(o),()=>cancelRunningTask(J)}return reactExports.useLayoutEffect(R,[r,o,e,q,Q,L,x,h]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:s,onMouseDown:l,ref:u})}function AnnotationLayer(){const N=useDocumentContext();invariant(N,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const r=usePageContext();invariant(r,"Unable to find Page context.");const j=Object.assign(Object.assign({},N),r),{imageResourcesPath:c,linkService:A,onGetAnnotationsError:W,onGetAnnotationsSuccess:q,onRenderAnnotationLayerError:Q,onRenderAnnotationLayerSuccess:L,page:k,pdf:_,renderForms:I,rotate:T,scale:x=1}=j,[f,u]=useResolver(),{value:a,error:y}=f,v=reactExports.useRef(null);invariant(k,"Attempted to load page annotations, but no page was specified."),warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function P(){a&&q&&q(a)}function g(){y&&(warning(!1,y.toString()),W&&W(y))}function e(){u({type:"RESET"})}reactExports.useEffect(e,[u,k]);function o(){if(!k)return;const n=makeCancellablePromise(k.getAnnotations()),B=n;return n.promise.then(V=>{u({type:"RESOLVE",value:V})}).catch(V=>{u({type:"REJECT",error:V})}),()=>{cancelRunningTask(B)}}reactExports.useEffect(o,[u,k,I]),reactExports.useEffect(()=>{if(a!==void 0){if(a===!1){g();return}P()}},[a]);function l(){L&&L()}function s(n){warning(!1,`${n}`),Q&&Q(n)}const h=reactExports.useMemo(()=>k.getViewport({scale:x,rotation:T}),[k,T,x]);function R(){if(!_||!k||!a)return;const{current:n}=v;if(!n)return;const B=h.clone({dontFlip:!0}),V={annotations:a,annotationStorage:_.annotationStorage,div:n,downloadManager:null,imageResourcesPath:c,linkService:A,page:k,renderForms:I,viewport:B};n.innerHTML="";try{pdfExports.AnnotationLayer.render(V),l()}catch(z){s(z)}return()=>{}}return reactExports.useEffect(R,[a,c,A,k,I,h]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:v})}var __rest=globalThis&&globalThis.__rest||function(N,r){var j={};for(var c in N)Object.prototype.hasOwnProperty.call(N,c)&&r.indexOf(c)<0&&(j[c]=N[c]);if(N!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,c=Object.getOwnPropertySymbols(N);A<c.length;A++)r.indexOf(c[A])<0&&Object.prototype.propertyIsEnumerable.call(N,c[A])&&(j[c[A]]=N[c[A]]);return j};const defaultScale=1;function Page(N){const r=useDocumentContext();invariant(r,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const j=Object.assign(Object.assign({},r),N),{_className:c="react-pdf__Page",_enableRegisterUnregisterPage:A=!0,canvasBackground:W,canvasRef:q,children:Q,className:L,customTextRenderer:k,devicePixelRatio:_,error:I="Failed to load the page.",height:T,inputRef:x,loading:f="Loading page…",noData:u="No page specified.",onGetAnnotationsError:a,onGetAnnotationsSuccess:y,onGetStructTreeError:v,onGetStructTreeSuccess:P,onGetTextError:g,onGetTextSuccess:e,onLoadError:o,onLoadSuccess:l,onRenderAnnotationLayerError:s,onRenderAnnotationLayerSuccess:h,onRenderError:R,onRenderSuccess:n,onRenderTextLayerError:B,onRenderTextLayerSuccess:V,pageIndex:z,pageNumber:J,pdf:tt,registerPage:dt,renderAnnotationLayer:ot=!0,renderForms:ct=!1,renderMode:gt="canvas",renderTextLayer:At=!0,rotate:St,scale:yt=defaultScale,unregisterPage:$,width:d}=j,p=__rest(j,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[E,H]=useResolver(),{value:M,error:X}=E,U=reactExports.useRef(null);invariant(tt,"Attempted to load a page, but no document was specified.");const F=isProvided(J)?J-1:z??null,O=J??(isProvided(z)?z+1:null),t=St??(M?M.rotate:null),i=reactExports.useMemo(()=>{if(!M)return null;let Tt=1;const Y=yt??defaultScale;if(d||T){const bt=M.getViewport({scale:1,rotation:t});d?Tt=d/bt.width:T&&(Tt=T/bt.height)}return Y*Tt},[T,M,t,yt,d]);function m(){return()=>{isProvided(F)&&A&&$&&$(F)}}reactExports.useEffect(m,[A,tt,F,$]);function S(){if(l){if(!M||!i)return;l(makePageCallback(M,i))}if(A&&dt){if(!isProvided(F)||!U.current)return;dt(F,U.current)}}function C(){X&&(warning(!1,X.toString()),o&&o(X))}function G(){H({type:"RESET"})}reactExports.useEffect(G,[H,tt,F]);function nt(){if(!tt||!O)return;const Tt=makeCancellablePromise(tt.getPage(O)),Y=Tt;return Tt.promise.then(bt=>{H({type:"RESOLVE",value:bt})}).catch(bt=>{H({type:"REJECT",error:bt})}),()=>cancelRunningTask(Y)}reactExports.useEffect(nt,[H,tt,F,O,dt]),reactExports.useEffect(()=>{if(M!==void 0){if(M===!1){C();return}S()}},[M,i]);const K=reactExports.useMemo(()=>M&&isProvided(F)&&O&&isProvided(t)&&isProvided(i)?{_className:c,canvasBackground:W,customTextRenderer:k,devicePixelRatio:_,onGetAnnotationsError:a,onGetAnnotationsSuccess:y,onGetStructTreeError:v,onGetStructTreeSuccess:P,onGetTextError:g,onGetTextSuccess:e,onRenderAnnotationLayerError:s,onRenderAnnotationLayerSuccess:h,onRenderError:R,onRenderSuccess:n,onRenderTextLayerError:B,onRenderTextLayerSuccess:V,page:M,pageIndex:F,pageNumber:O,renderForms:ct,renderTextLayer:At,rotate:t,scale:i}:null,[c,W,k,_,a,y,v,P,g,e,s,h,R,n,B,V,M,F,O,ct,At,t,i]),it=reactExports.useMemo(()=>makeEventProps(p,()=>M&&(i?makePageCallback(M,i):void 0)),[p,M,i]),at=`${F}@${i}/${t}`,et=`${F}/${t}`;function rt(){switch(gt){case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${et}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${at}_canvas`,canvasRef:q})}}function ut(){return At?React.createElement(TextLayer,{key:`${at}_text`}):null}function ft(){return ot?React.createElement(AnnotationLayer,{key:`${at}_annotations`}):null}function Et(){return React.createElement(PageContext.Provider,{value:K},rt(),ut(),ft(),Q)}function _t(){return O?tt===null||M===void 0||M===null?React.createElement(Message,{type:"loading"},typeof f=="function"?f():f):tt===!1||M===!1?React.createElement(Message,{type:"error"},typeof I=="function"?I():I):Et():React.createElement(Message,{type:"no-data"},typeof u=="function"?u():u)}return React.createElement("div",Object.assign({className:clsx(c,L),"data-page-number":O,ref:mergeRefs(x,U),style:{"--scale-factor":`${i}`,backgroundColor:W||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},it),_t())}const isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});displayWorkerWarning();pdfExports.GlobalWorkerOptions.workerSrc="pdf.worker.js";pdfExports.GlobalWorkerOptions.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfExports.version}/pdf.worker.min.js`;function InputFileViewer({file:N,isPreview:r=!1}){const{numPages:j,pageNumber:c,setPageScale:A,frameWidth:W,frameHeight:q,frameRef:Q,onDocumentLoadSuccess:L,goToPrevPage:k,goToNextPage:_,calculatePageScale:I}=UseInputFileViewer(N);return jsx(Fragment,{children:jsxs("div",{className:"pdf-container",ref:Q,children:[jsx("div",{className:"pdf-frame shadow-lg",children:jsx(Document$1,{file:N,onLoadSuccess:L,options:{cMapUrl:"cmaps/",cMapPacked:!0},children:jsx(Page,{pageNumber:c,width:W,frame:q,renderAnnotationLayer:!1,renderTextLayer:!1,onLoadSuccess:({width:T,height:x})=>{const f=I(T,x);A(f)}})})}),j>1?jsxs("div",{className:"pagination flex justify-center mt-5 items-center gap-5",children:[jsx(Button,{outline:!0,size:"sm",onClick:k,disabled:c===1,children:jsx(Icon,{icon:"chevron-left"})}),jsxs("p",{children:["Page ",c," / ",j]}),jsx(Button,{outline:!0,size:"sm",onClick:_,disabled:c===j,children:jsx(Icon,{icon:"chevron-right"})})]}):null]})})}export{InputFileViewer as I};
